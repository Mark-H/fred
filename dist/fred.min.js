!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Fred",[],t):"object"==typeof exports?exports.Fred=t():e.Fred=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),a=(i(s),n(3)),c=i(a),u=function(){function e(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.closeSidebar=this.closeSidebar.bind(this),this.init()}return o(e,[{key:"render",value:function(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("fred"),this.wrapper.addEventListener("click",function(e){e.stopPropagation()}),this.wrapper.appendChild(this.buildOpenButton()),this.wrapper.appendChild(this.buildTopBar()),this.wrapper.appendChild(this.buildSidebar()),this.wrapper.appendChild(this.buildSidebar2()),null===document.body.firstChild?document.body.appendChild(this.wrapper):document.body.insertBefore(this.wrapper,document.body.firstChild)}},{key:"liWrapper",value:function(e){var t=document.createElement("li");return t.innerHTML=e.outerHTML,t}},{key:"buildSidebar",value:function(){var e=this;this.sidebar=document.createElement("div"),this.sidebar.classList.add("fred--sidebar"),this.sidebar.setAttribute("hidden","hidden"),this.close=document.createElement("button"),this.close.classList.add("fred--sidebar_close"),this.close.innerHTML='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="-4 -4 20 20" enable-background="new -4 -4 20 20" xml:space="preserve"><polygon points="16.079,-0.666 12.717,-4.027 6.052,2.637 -0.613,-4.027 -3.975,-0.666 2.69,6 -3.975,12.664 -0.612,16.026 6.052,9.362 12.717,16.027 16.079,12.664 9.414,6 "></polygon></svg>',this.close.addEventListener("click",function(t){t.preventDefault(),e.sidebar2.hasAttribute("hidden")===!0?(e.sidebar.setAttribute("hidden","hidden"),window.removeEventListener("click",e.closeSidebar)):e.sidebar2.setAttribute("hidden","hidden")});var t=document.createElement("div");t.classList.add("fred--sidebar_title"),t.innerHTML='<img src="images/modx-revo-icon-48.svg" alt="MODX FRED" class="fred--logo"><h1>Fred</h1>';var n=document.createElement("dl");n.classList.add("fred--accordion"),n.setAttribute("tabindex","0"),n.setAttribute("role","tablist");var i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},r=document.createElement("dt");return r.setAttribute("role","tab"),r.setAttribute("tabindex","0"),r.innerHTML=(n===!0?'<i class="fa fa-angle-left fred--accordion_toggle"></i>':"")+'<span><i class="fa fa-'+t+'"></i> '+e+"</span>",r.addEventListener("click",i),r};return n.appendChild(i("Resources","file-o",!1)),n.appendChild(i("Layouts","television",!0,function(){e.sidebar2.removeAttribute("hidden")})),n.appendChild(i("Components","vcard-o",!1)),this.sidebar.appendChild(this.close),this.sidebar.appendChild(t),this.sidebar.appendChild(n),this.sidebar}},{key:"buildSidebar2",value:function(){this.sidebar2=document.createElement("div"),this.sidebar2.classList.add("fred--sidebar_paneltwo","active"),this.sidebar2.setAttribute("hidden","hidden");var e=document.createElement("dl");e.classList.add("fred--accordion"),e.setAttribute("tabindex","0"),e.setAttribute("role","tablist");var t=document.createElement("dt");t.classList.add("active"),t.setAttribute("role","tab"),t.setAttribute("tabindex","0");var n='<i class="fa fa-television"></i> Layouts';t.innerHTML="<span>"+n+"</span>";var i=document.createElement("dd");i.setAttribute("role","tab"),i.setAttribute("tabindex","0");var r=document.createElement("div");return r.classList.add("fred--thumbs","source"),r.innerHTML='<figure class="fred--thumb">\n                            <div><img src="layouts/full-width.svg" alt=""></div>\n                            <figcaption>\n                                <strong>Full Width</strong>\n                            </figcaption>\n                            <div class="chunk" hidden="hidden">\n                                <h2>Header #2</h2>\n                                <p>Description</p>\n                            </div>\n                        </figure>\n                        <figure class="fred--thumb">\n                            <div><img src="layouts/right-panel-layout.svg" alt=""></div>\n                            <figcaption>\n                                <strong>2 Column</strong>\n                                <em>Content Left. Component Right.</em>\n                            </figcaption>\n                            <div class="chunk" hidden="hidden">\n                                <h3>Header #3</h3>\n                                <img src="http://via.placeholder.com/350x150" />\n                                <p>Description</p>\n                            </div>\n                        </figure>\n                        <figure class="fred--thumb">\n                            <div><img src="layouts/four-grid.svg" alt=""></div>\n                            <figcaption>\n                                <strong>Grid</strong>\n                            </figcaption>\n                            <div class="chunk" hidden="hidden">\n                                <p>Description Only</p>\n                            </div>\n                        </figure>',i.appendChild(r),e.appendChild(t),e.appendChild(i),this.sidebar2.appendChild(e),this.sidebar2}},{key:"buildOpenButton",value:function(){var e=this;return this.open=document.createElement("button"),this.open.classList.add("fred--open"),this.open.innerHTML='<i class="fa fa-angle-right"></i> <i class="fa fa-angle-right"></i>',this.open.addEventListener("click",function(t){t.preventDefault(),e.sidebar.removeAttribute("hidden"),window.addEventListener("click",e.closeSidebar)}),this.open}},{key:"closeSidebar",value:function(e){e.preventDefault(),this.sidebar.setAttribute("hidden","hidden"),this.sidebar2.setAttribute("hidden","hidden"),window.removeEventListener("click",this.closeSidebar)}},{key:"buildTopBar",value:function(){var e=document.createElement("div");e.classList.add("fred--topbar","fred--clearfix");var t=document.createElement("ul");t.classList.add("fred--topbar_links");var n=document.createElement("a");n.innerHTML='New Page <i class="fa fa-angle-down"></i>';var i=document.createElement("a");i.innerHTML='Settings <i class="fa fa-angle-down"></i>',t.appendChild(this.liWrapper(n)),t.appendChild(this.liWrapper(i));var r=document.createElement("div");r.classList.add("fred--topbar_buttons");var o=document.createElement("button");return o.classList.add("fred--btn-small"),o.innerText="Logout",r.appendChild(o),e.appendChild(t),e.appendChild(r),e}},{key:"showFred",value:function(){this.wrapper.removeAttribute("hidden")}},{key:"hideFred",value:function(){this.wrapper.setAttribute("hidden","hidden")}},{key:"init",value:function(){console.log("Hello from Fred!"),this.render();var e=this,t=(0,c.default)([document.querySelector(".source"),document.querySelector(".content")],{copy:function(e,t){return t===document.getElementsByClassName("source")[0]},accepts:function(e,t){return t!==document.getElementsByClassName("source")[0]},moves:function(e,t,n,i){return"content"!==t.id||n.classList.contains("handle")}});t.on("drop",function(e,t,n,i){if(n.classList.contains("source")){var r=document.createElement("div");r.classList.add("test-wrapper");var o=document.createElement("div"),s=document.createElement("i");s.classList.add("fa","fa-heart","handle"),o.appendChild(s),r.appendChild(o);var a=document.createElement("div");a.setAttribute("contenteditable",!0),a.innerHTML=e.getElementsByClassName("chunk")[0].innerHTML,a.addEventListener("keypress",function(e){if(13===e.charCode&&e.shiftKey===!1)return e.preventDefault(),!1}),r.appendChild(a),e.parentNode.replaceChild(r,e)}}),t.on("drag",function(t,n){e.hideFred()}),t.on("dragend",function(t){e.showFred()})}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.emitter=void 0;var r=n(2),o=i(r),s=t.emitter=new o.default;t.default=s},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,a,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),u=n.slice(),r=u.length,c=0;c<r;c++)u[c].apply(this,a);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){(function(t){"use strict";function i(e,t){function n(e){return le.containers.indexOf(e)!==-1||ue.isContainer(e)}function i(e){var t=e?"remove":"add";r(_,t,"mousedown",x),r(_,t,"mouseup",B)}function a(e){var t=e?"remove":"add";r(_,t,"mousemove",C)}function p(e){var t=e?"remove":"add";w[t](_,"selectstart",T),w[t](_,"click",T)}function g(){i(!0),B({})}function T(e){ae&&e.preventDefault()}function x(e){te=e.clientX,ne=e.clientY;var t=1!==o(e)||e.metaKey||e.ctrlKey;if(!t){var n=e.target,i=S(n);i&&(ae=i,a(),"mousedown"===e.type&&(h(n)?n.focus():e.preventDefault()))}}function C(e){if(ae){if(0===o(e))return void B({});if(void 0===e.clientX||e.clientX!==te||void 0===e.clientY||e.clientY!==ne){if(ue.ignoreInputTextSelection){var t=b("clientX",e),n=b("clientY",e),i=L.elementFromPoint(t,n);if(h(i))return}var r=ae;a(!0),p(),N(),M(r);var c=s(Q);Z=b("pageX",e)-c.left,ee=b("pageY",e)-c.top,E.add(oe||Q,"gu-transit"),W(),Y(e)}}}function S(e){if(!(le.dragging&&V||n(e))){for(var t=e;v(e)&&n(v(e))===!1;){if(ue.invalid(e,t))return;if(e=v(e),!e)return}var i=v(e);if(i&&!ue.invalid(e,t)){var r=ue.moves(e,i,t,m(e));if(r)return{item:e,source:i}}}}function k(e){return!!S(e)}function A(e){var t=S(e);t&&M(t)}function M(e){z(e.item,e.source)&&(oe=e.item.cloneNode(!0),le.emit("cloned",oe,e.item,"copy")),J=e.source,Q=e.item,ie=re=m(e.item),le.dragging=!0,le.emit("drag",Q,J)}function O(){return!1}function N(){if(le.dragging){var e=oe||Q;F(e,v(e))}}function I(){ae=!1,a(!0),p(!0)}function B(e){if(I(),le.dragging){var t=oe||Q,n=b("clientX",e),i=b("clientY",e),r=c(V,n,i),o=X(r,n,i);o&&(oe&&ue.copySortSource||!oe||o!==J)?F(t,o):ue.removeOnSpill?H():P()}}function F(e,t){var n=v(e);oe&&ue.copySortSource&&t===J&&n.removeChild(Q),j(t)?le.emit("cancel",e,J,J):le.emit("drop",e,t,J,re),D()}function H(){if(le.dragging){var e=oe||Q,t=v(e);t&&t.removeChild(e),le.emit(oe?"cancel":"remove",e,t,J),D()}}function P(e){if(le.dragging){var t=arguments.length>0?e:ue.revertOnSpill,n=oe||Q,i=v(n),r=j(i);r===!1&&t&&(oe?i&&i.removeChild(oe):J.insertBefore(n,ie)),r||t?le.emit("cancel",n,J,J):le.emit("drop",n,i,J,re),D()}}function D(){var e=oe||Q;I(),K(),e&&E.rm(e,"gu-transit"),se&&clearTimeout(se),le.dragging=!1,ce&&le.emit("out",e,ce,J),le.emit("dragend",e),J=Q=oe=ie=re=se=ce=null}function j(e,t){var n;return n=void 0!==t?t:V?re:m(oe||Q),e===J&&n===ie}function X(e,t,i){function r(){var r=n(o);if(r===!1)return!1;var s=$(o,e),a=q(o,s,t,i),c=j(o,a);return!!c||ue.accepts(Q,o,J,a)}for(var o=e;o&&!r();)o=v(o);return o}function Y(e){function t(e){le.emit(e,u,ce,J)}function n(){f&&t("over")}function i(){ce&&t("out")}if(V){e.preventDefault();var r=b("clientX",e),o=b("clientY",e),s=r-Z,a=o-ee;V.style.left=s+"px",V.style.top=a+"px";var u=oe||Q,l=c(V,r,o),d=X(l,r,o),f=null!==d&&d!==ce;(f||null===d)&&(i(),ce=d,n());var h=v(u);if(d===J&&oe&&!ue.copySortSource)return void(h&&h.removeChild(u));var p,g=$(d,l);if(null!==g)p=q(d,g,r,o);else{if(ue.revertOnSpill!==!0||oe)return void(oe&&h&&h.removeChild(u));p=ie,d=J}(null===p&&f||p!==u&&p!==m(u))&&(re=p,d.insertBefore(u,p),le.emit("shadow",u,d,J))}}function R(e){E.rm(e,"gu-hide")}function U(e){le.dragging&&E.add(e,"gu-hide")}function W(){if(!V){var e=Q.getBoundingClientRect();V=Q.cloneNode(!0),V.style.width=d(e)+"px",V.style.height=f(e)+"px",E.rm(V,"gu-transit"),E.add(V,"gu-mirror"),ue.mirrorContainer.appendChild(V),r(_,"add","mousemove",Y),E.add(ue.mirrorContainer,"gu-unselectable"),le.emit("cloned",V,Q,"mirror")}}function K(){V&&(E.rm(ue.mirrorContainer,"gu-unselectable"),r(_,"remove","mousemove",Y),v(V).removeChild(V),V=null)}function $(e,t){for(var n=t;n!==e&&v(n)!==e;)n=v(n);return n===_?null:n}function q(e,t,n,i){function r(){var t,r,o,s=e.children.length;for(t=0;t<s;t++){if(r=e.children[t],o=r.getBoundingClientRect(),a&&o.left+o.width/2>n)return r;if(!a&&o.top+o.height/2>i)return r}return null}function o(){var e=t.getBoundingClientRect();return s(a?n>e.left+d(e)/2:i>e.top+f(e)/2)}function s(e){return e?m(t):t}var a="horizontal"===ue.direction,c=t!==e?o():r();return c}function z(e,t){return"boolean"==typeof ue.copy?ue.copy:ue.copy(e,t)}var G=arguments.length;1===G&&Array.isArray(e)===!1&&(t=e,e=[]);var V,J,Q,Z,ee,te,ne,ie,re,oe,se,ae,ce=null,ue=t||{};void 0===ue.moves&&(ue.moves=l),void 0===ue.accepts&&(ue.accepts=l),void 0===ue.invalid&&(ue.invalid=O),void 0===ue.containers&&(ue.containers=e||[]),void 0===ue.isContainer&&(ue.isContainer=u),void 0===ue.copy&&(ue.copy=!1),void 0===ue.copySortSource&&(ue.copySortSource=!1),void 0===ue.revertOnSpill&&(ue.revertOnSpill=!1),void 0===ue.removeOnSpill&&(ue.removeOnSpill=!1),void 0===ue.direction&&(ue.direction="vertical"),void 0===ue.ignoreInputTextSelection&&(ue.ignoreInputTextSelection=!0),void 0===ue.mirrorContainer&&(ue.mirrorContainer=L.body);var le=y({containers:ue.containers,start:A,end:N,cancel:P,remove:H,destroy:g,canMove:k,dragging:!1});return ue.removeOnSpill===!0&&le.on("over",R).on("out",U),i(),le}function r(e,n,i,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},s={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},a={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};t.navigator.pointerEnabled?w[n](e,s[i],r):t.navigator.msPointerEnabled?w[n](e,a[i],r):(w[n](e,o[i],r),w[n](e,i,r))}function o(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function s(e){var t=e.getBoundingClientRect();return{left:t.left+a("scrollLeft","pageXOffset"),top:t.top+a("scrollTop","pageYOffset")}}function a(e,n){return"undefined"!=typeof t[n]?t[n]:_.clientHeight?_[e]:L.body[e]}function c(e,t,n){var i,r=e||{},o=r.className;return r.className+=" gu-hide",i=L.elementFromPoint(t,n),r.className=o,i}function u(){return!1}function l(){return!0}function d(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function v(e){return e.parentNode===L?null:e.parentNode}function h(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||p(e)}function p(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||p(v(e))))}function m(e){function t(){var t=e;do t=t.nextSibling;while(t&&1!==t.nodeType);return t}return e.nextElementSibling||t()}function g(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function b(e,t){var n=g(t),i={pageX:"clientX",pageY:"clientY"};return e in i&&!(e in n)&&i[e]in n&&(e=i[e]),n[e]}var y=n(4),w=n(11),E=n(14),L=document,_=L.documentElement;e.exports=i}).call(t,function(){return this}())},function(e,t,n){"use strict";var i=n(5),r=n(6);e.exports=function(e,t){var n=t||{},o={};return void 0===e&&(e={}),e.on=function(t,n){return o[t]?o[t].push(n):o[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var i=arguments.length;if(1===i)delete o[t];else if(0===i)o={};else{var r=o[t];if(!r)return e;r.splice(r.indexOf(n),1)}return e},e.emit=function(){var t=i(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var s=(o[t]||[]).slice(0);return function(){var o=i(arguments),a=this||e;if("error"===t&&n.throws!==!1&&!s.length)throw 1===o.length?o[0]:o;return s.forEach(function(i){n.async?r(i,o,a):i.apply(a,o),i._once&&e.off(t,i)}),e}},e}},function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},function(e,t,n){"use strict";var i=n(7);e.exports=function(e,t,n){e&&i(function(){e.apply(n||null,t||[])})}},function(e,t,n){(function(t){var n,i="function"==typeof t;n=i?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=n}).call(t,n(8).setImmediate)},function(e,t,n){function i(e,t){this._id=e,this._clearFn=t}var r=Function.prototype.apply;t.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(9),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function i(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return p[h]=i,v(h),h++}function r(e){delete p[e]}function o(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function s(e){if(m)setTimeout(s,0,e);else{var t=p[e];if(t){m=!0;try{o(t)}finally{r(e),m=!1}}}}function a(){v=function(e){t.nextTick(function(){s(e)})}}function c(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function u(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&s(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),v=function(n){e.postMessage(t+n,"*")}}function l(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;s(t)},v=function(t){e.port2.postMessage(t)}}function d(){var e=g.documentElement;v=function(t){var n=g.createElement("script");n.onreadystatechange=function(){s(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function f(){v=function(e){setTimeout(s,0,e)}}if(!e.setImmediate){var v,h=1,p={},m=!1,g=e.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(e);b=b&&b.setTimeout?b:e,"[object process]"==={}.toString.call(e.process)?a():c()?u():e.MessageChannel?l():g&&"onreadystatechange"in g.createElement("script")?d():f(),b.setImmediate=i,b.clearImmediate=r}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(10))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){p&&v&&(p=!1,v.length?h=v.concat(h):m=-1,h.length&&a())}function a(){if(!p){var e=r(s);p=!0;for(var t=h.length;t;){for(v=h,h=[];++m<t;)v&&v[m].run();m=-1,t=h.length}v=null,p=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,d,f=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var v,h=[],p=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new c(e,t)),1!==h.length||p||r(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){(function(t){"use strict";function i(e,t,n,i){return e.addEventListener(t,n,i)}function r(e,t,n){return e.attachEvent("on"+t,u(e,t,n))}function o(e,t,n,i){return e.removeEventListener(t,n,i)}function s(e,t,n){var i=l(e,t,n);if(i)return e.detachEvent("on"+t,i)}function a(e,t,n){function i(){var e;return h.createEvent?(e=h.createEvent("Event"),e.initEvent(t,!0,!0)):h.createEventObject&&(e=h.createEventObject()),e}function r(){return new f(t,{detail:n})}var o=v.indexOf(t)===-1?r():i();e.dispatchEvent?e.dispatchEvent(o):e.fireEvent("on"+t,o)}function c(e,n,i){return function(n){var r=n||t.event;r.target=r.target||r.srcElement,r.preventDefault=r.preventDefault||function(){r.returnValue=!1},r.stopPropagation=r.stopPropagation||function(){r.cancelBubble=!0},r.which=r.which||r.keyCode,i.call(e,r)}}function u(e,t,n){var i=l(e,t,n)||c(e,t,n);return g.push({wrapper:i,element:e,type:t,fn:n}),i}function l(e,t,n){var i=d(e,t,n);if(i){var r=g[i].wrapper;return g.splice(i,1),r}}function d(e,t,n){var i,r;for(i=0;i<g.length;i++)if(r=g[i],r.element===e&&r.type===t&&r.fn===n)return i}var f=n(12),v=n(13),h=t.document,p=i,m=o,g=[];t.addEventListener||(p=r,m=s),e.exports={add:p,remove:m,fabricate:a}}).call(t,function(){return this}())},function(e,t){(function(t){function n(){try{var e=new i("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}var i=t.CustomEvent;e.exports=n()?i:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,function(){return this}())},function(e,t){(function(t){"use strict";var n=[],i="",r=/^on/;for(i in t)r.test(i)&&n.push(i.slice(2));e.exports=n}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){var t=o[e];return t?t.lastIndex=0:o[e]=t=new RegExp(s+e+a,"g"),t}function i(e,t){var i=e.className;i.length?n(t).test(i)||(e.className+=" "+t):e.className=t}function r(e,t){e.className=e.className.replace(n(t)," ").trim()}var o={},s="(?:^|\\s)",a="(?:\\s|$)";e.exports={add:i,rm:r}}])});