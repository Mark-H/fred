!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Fred",[],t):"object"==typeof exports?exports.Fred=t():e.Fred=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(3),c=i(l),d=n(31),u=i(d),f=n(6),h=i(f),p=n(10),m=i(p),v=n(24),g=i(v),y=n(26),b=i(y),w=n(23),E=i(w),_=n(32),C=i(_),T=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.config=n||{},this.drake=null,this.loading=null,this.wrapper=null,this.config.pageSettings={},document.addEventListener("DOMContentLoaded",function(){t.init()})}return a(e,[{key:"render",value:function(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("fred");var e=document.createElement("div");this.config.fredWrapper=this.wrapper,document.body.appendChild(this.wrapper),document.body.appendChild(e)}},{key:"renderComponents",value:function(){new u.default(this.config.launcherPosition||"bottom_left"),new c.default(this.config,this.wrapper),new C.default}},{key:"getDataFromDropZone",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var a,o=e.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.push(s.fredEl.getContent())}}catch(e){i=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}return t}},{key:"getCleanDropZoneContent",value:function(e){var t="",n=!0,i=!1,r=void 0;try{for(var a,o=e.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t+=s.fredEl.cleanRender().innerHTML}}catch(e){i=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}return t}},{key:"save",value:function(){s.default.emit("fred-loading","Saving Page");for(var e={},t={},n=0;n<this.dropzones.length;n++){t[this.dropzones[n].dataset.fredDropzone]=this.getDataFromDropZone(this.dropzones[n]);var i=this.dropzones[n].querySelectorAll('[data-fred-target]:not([data-fred-target=""])'),r=!0,a=!1,o=void 0;try{for(var l,c=i[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var d=l.value;this.config.pageSettings.hasOwnProperty(d.dataset.fredTarget)||(e[d.dataset.fredTarget]=d.innerHTML)}}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}e[this.dropzones[n].dataset.fredDropzone]=this.getCleanDropZoneContent(this.dropzones[n])}e.id=this.config.resource.id,e.data=t,e.pageSettings=this.config.pageSettings,console.log("body: ",e),(0,h.default)(this.config.assetsUrl+"endpoints/ajax.php?action=save-content",{method:"post",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.url&&(location.href=e.url),s.default.emit("fred-loading-hide")})}},{key:"loadContent",value:function(){var e=this;return s.default.emit("fred-loading","Preparing Content"),(0,h.default)(this.config.assetsUrl+"endpoints/ajax.php?action=load-content&id="+this.config.resource.id,{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(t){var n=t.data.data;e.config.pageSettings=t.data.pageSettings||{};var i=function(i){if(n.hasOwnProperty(i)){var r=document.querySelector('[data-fred-dropzone="'+i+'"]');r&&(r.innerHTML="",n[i].forEach(function(n){var a=document.createElement("div");a.classList.add("chunk"),a.setAttribute("hidden","hidden"),a.dataset.fredElementId=n.widget,a.innerHTML=t.data.elements[n.widget].html,a.elementOptions=t.data.elements[n.widget].options;var o=new E.default(e.config,a,i,null,n.values,n.settings||{});e.loadChildren(n.children,o,t.data.elements),r.appendChild(o.wrapper)}))}};for(var r in n)i(r);m.default.reloadContainers(),s.default.emit("fred-loading-hide")})}},{key:"loadChildren",value:function(e,t,n){var i=this,r=function(r){e.hasOwnProperty(r)&&e[r].forEach(function(e){var a=document.createElement("div");a.classList.add("chunk"),a.setAttribute("hidden","hidden"),a.dataset.fredElementId=e.widget,a.innerHTML=n[e.widget].html,a.elementOptions=n[e.widget].options||{};var o=new E.default(i.config,a,r,t,e.values,e.settings||{});t.addElementToDropZone(r,o),i.loadChildren(e.children,o,n)})};for(var a in e)r(a)}},{key:"registerListeners",value:function(){var e=this;s.default.on("fred-save",function(){e.save()}),s.default.on("fred-wrapper-insert",function(t){e.wrapper.appendChild(t)}),s.default.on("fred-loading",function(t){null===e.loading&&(t=t||"",e.loading=document.createElement("section"),e.loading.classList.add("fred--modal-bg"),e.loading.innerHTML='<div class="fred--modal" aria-hidden="false"><div style="color:white;text-align:center;"><span class="fred--loading"></span> '+t+"</div></div>",e.wrapper.appendChild(e.loading))}),s.default.on("fred-loading-hide",function(){null!==e.loading&&(e.loading.remove(),e.loading=null)}),s.default.on("fred-undo",function(){console.log("Undo not yet implemented.")})}},{key:"init",value:function(){var e=this;console.log("Hello from Fred!"),this.registerListeners(),this.dropzones=document.querySelectorAll('[data-fred-dropzone]:not([data-fred-dropzone=""])');for(var t=[],n=0;n<this.dropzones.length;n++){if(t.indexOf(this.dropzones[n].dataset.fredDropzone)!=-1)return console.error("There are several dropzones with same name: "+this.dropzones[n].dataset.fredDropzone+". The name of each dropzone has to be unique."),!1;t.push(this.dropzones[n].dataset.fredDropzone)}this.render(),m.default.initDrake(this.config),g.default.init(this.wrapper),b.default.init(this.wrapper),this.loadContent().then(function(){e.renderComponents()})}}]),e}();t.default=T,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.emitter=void 0;var r=n(2),a=i(r),o=t.emitter=new a.default;t.default=o},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,s,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(n=this._events[e],o(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(a(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,l=0;l<r;l++)c[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(4),c=i(l),d=n(9),u=i(d),f=n(28),h=i(f),p=n(30),m=i(p),v=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1];r(this,e),this.lastRequest=null,this.config=n||{},this.components=[],this.visible=!1,this.fredWrapper=i,this.hideSidebar=this.hideSidebar.bind(this),this.globalHideSidebar=this.globalHideSidebar.bind(this),s.default.on("fred-sidebar-expand",function(e,n,i){e.loading(),t.components.forEach(function(e){e.hide()}),e.expand(),t.lastRequest=(0,m.default)(Promise.resolve(i)),t.lastRequest.promise.then(function(n){t.lastRequest=null,e.setContent(n),e.afterExpand()}).catch(function(n){t.lastRequest=null,"cancel"!==n.type&&e.setContent("SOMETHING WRONG HAPPENED")})}),s.default.on("fred-sidebar-collapse",function(e){null!==t.lastRequest&&(t.lastRequest.cancel(),t.lastRequest=null),t.components.forEach(function(e){e.collapse()})}),s.default.on("fred-sidebar-hide",function(e){t.hideSidebar(e)}),s.default.on("fred-sidebar-show",function(e){t.showSidebar(e)}),s.default.on("fred-sidebar-toggle",function(){t.wrapper.classList.contains("fred--hidden")?s.default.emit("fred-sidebar-show"):s.default.emit("fred-sidebar-hide")}),this.render()}return a(e,[{key:"render",value:function(){return this.wrapper=document.createElement("div"),this.wrapper.classList.add("fred--sidebar","fred--hidden"),this.wrapper.setAttribute("aria-hidden","true"),this.wrapper.appendChild(this.buildCloseButton()),this.wrapper.appendChild(this.buildSidebarHeader()),this.wrapper.appendChild(this.buildSidebar()),s.default.emit("fred-wrapper-insert",this.wrapper),this}},{key:"buildCloseButton",value:function(){var e=document.createElement("button");return e.classList.add("fred--sidebar_close"),e.setAttribute("role","button"),e.innerHTML='<i class="fred--angle-left"></i><i class="fred--angle-left"></i>',e.addEventListener("click",function(e){e.preventDefault(),s.default.emit("fred-sidebar-hide")}),e}},{key:"buildSidebarHeader",value:function(){var e=document.createElement("div");e.classList.add("fred--sidebar_title");var t=document.createElement("img");t.setAttribute("alt","MODX FRED"),t.classList.add("fred--logo"),t.src=(this.config.assetsUrl||"")+"images/modx-revo-icon-48.svg";var n=document.createElement("h1");return n.innerText="Fred",e.appendChild(t),e.appendChild(n),e}},{key:"buildSidebar",value:function(){return this.sidebar=document.createElement("dl"),this.sidebar.classList.add("fred--accordion"),this.sidebar.setAttribute("tabindex","0"),this.sidebar.setAttribute("role","tablist"),this.components.push(new c.default(this.sidebar,this.config)),this.components.push(new u.default(this.sidebar,this.config)),this.components.push(new h.default(this.sidebar,this.config)),this.sidebar}},{key:"hideSidebar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e===!1&&(this.visible=!1),this.wrapper.classList.add("fred--hidden"),window.removeEventListener("click",this.globalHideSidebar)}},{key:"showSidebar",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t===!0&&this.visible===!1||(this.visible=!0,this.wrapper.classList.remove("fred--hidden"),setTimeout(function(){window.addEventListener("click",e.globalHideSidebar)},50))}},{key:"globalHideSidebar",value:function(e){this.fredWrapper.contains(e.target)||this.hideSidebar(!1)}}]),e}();t.default=v,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(5),c=i(l),d=n(6),u=i(d),f=n(8),h=i(f),p=n(1),m=i(p),v=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"init",value:function(){this.content=null,this.parents=[{id:0,value:"0",label:"No Parent"}]}},{key:"click",value:function(){var e=this;return null!==this.content?this.buildPanel():(0,u.default)(this.config.assetsUrl+"endpoints/ajax.php?action=get-resources").then(function(e){return e.json()}).then(function(t){return e.content=t.data.resources,e.buildPanel()})}},{key:"buildPanel",value:function(){var e=document.createElement("div");e.classList.add("fred--pages");var t=document.createElement("dl");return t.classList.add("fred--pages_list"),this.buildTree(this.content,t),e.appendChild(t),e.appendChild(this.buildCreatePage()),e}},{key:"buildCreatePage",value:function(){var e=this,t=document.createElement("div"),n=document.createElement("form");n.classList.add("fred--pages_create","fred--hidden");var i=document.createElement("fieldset"),r=document.createElement("legend");r.innerHTML="Create Page";var a=document.createElement("label");a.setAttribute("for","fred_create_page_parent"),a.classList.add("fred--label-choices"),a.innerHTML="Parent";var o=document.createElement("select");o.setAttribute("id","fred_create_page_parent");var s=document.createElement("label");s.setAttribute("for","fred_create_page_template"),s.classList.add("fred--label-choices"),s.innerHTML="Template";var l=document.createElement("select");l.setAttribute("id","fred_create_page_template");var c=document.createElement("label");c.setAttribute("for","fred_create_page_pagetitle"),c.classList.add("fred--label-choices"),c.innerHTML="Page Title";var d=document.createElement("input");d.setAttribute("id","fred_create_page_pagetitle"),d.setAttribute("type","text");var f=document.createElement("button");f.classList.add("fred--btn-panel","fred--btn-apply"),f.innerHTML="Create",f.addEventListener("click",function(t){t.preventDefault(),m.default.emit("fred-loading","Creating Page"),(0,u.default)(e.config.assetsUrl+"endpoints/ajax.php?action=create-resource",{method:"post",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({parent:o.value,template:l.value,pagetitle:d.value})}).then(function(e){return e.json()}).then(function(e){location.href=e.url,m.default.emit("fred-loading-hide")})}),i.appendChild(r),i.appendChild(a),i.appendChild(o),i.appendChild(s),i.appendChild(l),i.appendChild(c),i.appendChild(d),i.appendChild(f),n.appendChild(i);var p=document.createElement("button");p.classList.add("fred--btn-sidebar"),p.innerHTML="Create Page",p.addEventListener("click",function(e){e.preventDefault(),n.classList.toggle("fred--hidden")}),t.appendChild(p),t.appendChild(n),new h.default(o,{choices:this.parents,shouldSort:!1});var v=new h.default(l);return v.ajax(function(t){(0,u.default)(e.config.assetsUrl+"endpoints/ajax.php?action=get-templates").then(function(e){return e.json()}).then(function(e){e.data.templates[0]&&(e.data.templates[0].selected=!0),t(e.data.templates,"value","name")}).catch(function(e){console.log(e)})}),window.test=v,t}},{key:"buildTree",value:function(e,t){var n=this;e.forEach(function(e){n.parents.push({id:e.id,value:""+e.id,label:e.pagetitle});var i=document.createElement("dt");if(i.setAttribute("role","tab"),i.setAttribute("tabindex","0"),i.innerHTML=e.pagetitle,e.published!==!0&&i.classList.add("fred--pages_unpublished"),e.deleted===!0&&i.classList.add("fred--pages_deleted"),e.hidemenu===!0&&i.classList.add("fred--pages_hidden"),t.append(i),e.isFred===!0){var r=document.createElement("dd");r.appendChild(n.createMenu(e)),t.append(r)}else i.classList.add("fred--pages_noedit");if(e.children.length>0){var a=document.createElement("dl");a.classList.add("fred--pages_list","fred--hidden"),a.setAttribute("aria-disabled","true"),n.buildTree(e.children,a);var o=document.createElement("button");o.classList.add("fred--btn-list","fred--btn-list_expand"),o.addEventListener("click",function(e){return e.preventDefault(),o.classList.contains("fred--btn-list_close")?(o.classList.remove("fred--btn-list_close"),a.classList.add("fred--hidden"),void a.setAttribute("aria-disabled","true")):(o.classList.add("fred--btn-list_close"),a.classList.remove("fred--hidden"),void a.setAttribute("aria-disabled","false"))}),i.insertBefore(o,i.firstChild),t.append(a)}})}},{key:"createMenu",value:function(e){var t=document.createElement("div");t.classList.add("fred--pages_menu");var n=document.createElement("h3");n.innerHTML=e.pagetitle;var i=document.createElement("button");i.innerHTML="Edit",i.addEventListener("click",function(t){t.preventDefault(),window.location.href=e.url});var r=document.createElement("button");r.innerHTML="Duplicate";var a=document.createElement("button");e.published===!0?a.innerHTML="Unpublish":a.innerHTML="Publish";var o=document.createElement("button");o.innerHTML="Create Child Page";var s=document.createElement("button");return e.deleted===!0?s.innerHTML="Undelete":s.innerHTML="Delete",t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(a),t.appendChild(o),t.appendChild(s),t}}]),t}(c.default);v.title="Pages",v.expandable=!0,t.default=v,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),l=i(s),c=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.sidebarWrapper=t,this.config=i||{},this.titleEl=null,this.contentEl=null;var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.titleEl=document.createElement("dt"),n.titleEl.setAttribute("role","tab"),n.titleEl.setAttribute("tabindex","0"),n.titleEl.classList.add("fred--sidebar_"+n.constructor.title.toLowerCase().replace(/ /g,"_")),n.titleEl.innerHTML=e+(t===!0?'<i class="fred--angle-right fred--accordion_toggle"></i>':""),t===!1?n.titleEl.addEventListener("click",n.click):n.titleEl.addEventListener("click",function(){n.titleEl.classList.contains("active")?l.default.emit("fred-sidebar-collapse",n):l.default.emit("fred-sidebar-expand",n,e,n.click())}),n.contentEl=document.createElement("dd"),n.sidebarWrapper.appendChild(n.titleEl),n.sidebarWrapper.appendChild(n.contentEl)};this.init(),a(this.constructor.title,this.constructor.expandable)}return o(e,[{key:"init",value:function(){}},{key:"click",value:function(){}},{key:"expand",value:function(){this.titleEl.classList.add("active"),this.titleEl.classList.remove("fred--hidden")}},{key:"collapse",value:function(){this.titleEl.classList.remove("active"),this.titleEl.classList.remove("fred--hidden")}},{key:"hide",value:function(){this.titleEl.classList.remove("active"),this.titleEl.classList.add("fred--hidden")}},{key:"setContent",value:function(e){return"object"===("undefined"==typeof e?"undefined":a(e))&&void 0!==e.outerHTML?(this.contentEl.innerHTML="",void this.contentEl.appendChild(e)):void(this.contentEl.innerHTML=e)}},{key:"loading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e||"Retrieving "+this.constructor.title;var t=document.createElement("div");t.classList.add("fred--loading_wrapper"),t.innerHTML='<span class="fred--loading"></span> '+e,this.setContent(t)}},{key:"afterExpand",value:function(){}}]),e}();c.title="TITLE NOT SET",c.expandable=!1,t.default=c,e.exports=t.default},function(e,t,n){n(7),e.exports=self.fetch.bind(self)},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function i(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function a(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function o(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=o(t);return t.readAsArrayBuffer(e),n}function l(e){var t=new FileReader,n=o(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}function d(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(g.arrayBuffer&&g.blob&&b(e))this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var e=a(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?a(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=a(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return E.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function m(e){var t=new r;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}}),t}function v(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var g={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(g.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};r.prototype.append=function(e,i){e=t(e),i=n(i);var r=this.map[e];this.map[e]=r?r+","+i:i},r.prototype.delete=function(e){delete this.map[t(e)]},r.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(e,i){this.map[t(e)]=n(i)},r.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),i(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),i(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),i(e)},g.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},u.call(h.prototype),u.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];v.redirect=function(e,t){if(_.indexOf(t)===-1)throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=h,e.Response=v,e.fetch=function(e,t){return new Promise(function(n,i){var r=new h(e,t),a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:m(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;n(new v(t,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(r.method,r.url,!0),"include"===r.credentials&&(a.withCredentials=!0),"responseType"in a&&g.blob&&(a.responseType="blob"),r.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send("undefined"==typeof r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){/*! choices.js v3.0.4 | (c) 2018 Josh Johnson | https://github.com/jshjohnson/Choices#readme */
!function(t,n){e.exports=n()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="/assets/scripts/dist/",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(2),c=i(l),d=n(3),u=i(d),f=n(4),h=i(f),p=n(31),m=n(32);n(33);var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[data-choice]",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o(this,e),(0,m.isType)("String",t)){var i=document.querySelectorAll(t);if(i.length>1)for(var r=1;r<i.length;r++){var a=i[r];new e(a,n)}}var s={silent:!1,items:[],choices:[],renderChoiceLimit:-1,maxItemCount:-1,addItems:!0,removeItems:!0,removeItemButton:!1,editItems:!1,duplicateItems:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,regexFilter:null,shouldSort:!0,shouldSortItems:!1,sortFilter:m.sortByAlpha,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",addItemText:function(e){return'Press Enter to add <b>"'+(0,m.stripHTML)(e)+'"</b>'},maxItemText:function(e){return"Only "+e+" values can be added."},itemComparer:function(e,t){return e===t},uniqueItemText:"Only unique values can be added.",classNames:{containerOuter:"choices",containerInner:"choices__inner",input:"choices__input",inputCloned:"choices__input--cloned",list:"choices__list",listItems:"choices__list--multiple",listSingle:"choices__list--single",listDropdown:"choices__list--dropdown",item:"choices__item",itemSelectable:"choices__item--selectable",itemDisabled:"choices__item--disabled",itemChoice:"choices__item--choice",placeholder:"choices__placeholder",group:"choices__group",groupHeading:"choices__heading",button:"choices__button",activeState:"is-active",focusState:"is-focused",openState:"is-open",disabledState:"is-disabled",highlightedState:"is-highlighted",hiddenState:"is-hidden",flippedState:"is-flipped",loadingState:"is-loading",noResults:"has-no-results",noChoices:"has-no-choices"},fuseOptions:{include:"score"},callbackOnInit:null,callbackOnCreateTemplates:null};if(this.idNames={itemChoice:"item-choice"},this.config=(0,m.extend)(s,n),"auto"!==this.config.renderSelectedChoices&&"always"!==this.config.renderSelectedChoices&&(this.config.silent||console.warn("renderSelectedChoices: Possible values are 'auto' and 'always'. Falling back to 'auto'."),this.config.renderSelectedChoices="auto"),this.store=new h.default(this.render),this.initialised=!1,this.currentState={},this.prevState={},this.currentValue="",this.element=t,this.passedElement=(0,m.isType)("String",t)?document.querySelector(t):t,!this.passedElement)return void(this.config.silent||console.error("Passed element not found"));this.isTextElement="text"===this.passedElement.type,this.isSelectOneElement="select-one"===this.passedElement.type,this.isSelectMultipleElement="select-multiple"===this.passedElement.type,this.isSelectElement=this.isSelectOneElement||this.isSelectMultipleElement,this.isValidElementType=this.isTextElement||this.isSelectElement,this.isIe11=!(!navigator.userAgent.match(/Trident/)||!navigator.userAgent.match(/rv[ :]11/)),this.isScrollingOnIe=!1,this.config.shouldSortItems===!0&&this.isSelectOneElement&&(this.config.silent||console.warn("shouldSortElements: Type of passed element is 'select-one', falling back to false.")),this.highlightPosition=0,this.canSearch=this.config.searchEnabled,this.placeholder=!1,this.isSelectOneElement||(this.placeholder=!!this.config.placeholder&&(this.config.placeholderValue||this.passedElement.getAttribute("placeholder"))),this.presetChoices=this.config.choices,this.presetItems=this.config.items,this.passedElement.value&&(this.presetItems=this.presetItems.concat(this.passedElement.value.split(this.config.delimiter))),this.baseId=(0,m.generateId)(this.passedElement,"choices-"),this.render=this.render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this.wasTap=!0;var l="classList"in document.documentElement;l||this.config.silent||console.error("Choices: Your browser doesn't support Choices");var c=(0,m.isElement)(this.passedElement)&&this.isValidElementType;if(c){if("active"===this.passedElement.getAttribute("data-choice"))return;this.init()}else this.config.silent||console.error("Incompatible input passed")}return s(e,[{key:"init",value:function(){if(this.initialised!==!0){var e=this.config.callbackOnInit;this.initialised=!0,this._createTemplates(),this._createInput(),this.store.subscribe(this.render),this.render(),this._addEventListeners(),e&&(0,m.isType)("Function",e)&&e.call(this)}}},{key:"destroy",value:function(){if(this.initialised!==!1){this._removeEventListeners(),this.passedElement.classList.remove(this.config.classNames.input,this.config.classNames.hiddenState),this.passedElement.removeAttribute("tabindex");var e=this.passedElement.getAttribute("data-choice-orig-style");Boolean(e)?(this.passedElement.removeAttribute("data-choice-orig-style"),this.passedElement.setAttribute("style",e)):this.passedElement.removeAttribute("style"),this.passedElement.removeAttribute("aria-hidden"),this.passedElement.removeAttribute("data-choice"),this.passedElement.value=this.passedElement.value,this.containerOuter.parentNode.insertBefore(this.passedElement,this.containerOuter),this.containerOuter.parentNode.removeChild(this.containerOuter),this.clearStore(),this.config.templates=null,this.initialised=!1}}},{key:"renderGroups",value:function(e,t,n){var i=this,r=n||document.createDocumentFragment(),a=this.config.sortFilter;return this.config.shouldSort&&e.sort(a),e.forEach(function(e){var n=t.filter(function(t){return i.isSelectOneElement?t.groupId===e.id:t.groupId===e.id&&!t.selected});if(n.length>=1){var a=i._getTemplate("choiceGroup",e);r.appendChild(a),i.renderChoices(n,r,!0)}}),r}},{key:"renderChoices",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t||document.createDocumentFragment(),o=this.config,s=o.renderSelectedChoices,l=o.searchResultLimit,c=o.renderChoiceLimit,d=this.isSearching?m.sortByScore:this.config.sortFilter,u=function(e){var t="auto"!==s||n.isSelectOneElement||!e.selected;if(t){var i=n._getTemplate("choice",e);r.appendChild(i)}},f=e;"auto"!==s||this.isSelectOneElement||(f=e.filter(function(e){return!e.selected}));var h=f.reduce(function(e,t){return t.placeholder?e.placeholderChoices.push(t):e.normalChoices.push(t),e},{placeholderChoices:[],normalChoices:[]}),p=h.placeholderChoices,v=h.normalChoices;(this.config.shouldSort||this.isSearching)&&v.sort(d);var g=f.length,y=[].concat(a(p),a(v));this.isSearching?g=l:c>0&&!i&&(g=c);for(var b=0;b<g;b++)y[b]&&u(y[b]);return r}},{key:"renderItems",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=n||document.createDocumentFragment();if(this.config.shouldSortItems&&!this.isSelectOneElement&&e.sort(this.config.sortFilter),this.isTextElement){var r=this.store.getItemsReducedToValues(e),a=r.join(this.config.delimiter);this.passedElement.setAttribute("value",a),this.passedElement.value=a}else{var o=document.createDocumentFragment();e.forEach(function(e){var n=t._getTemplate("option",e);o.appendChild(n)}),this.passedElement.innerHTML="",this.passedElement.appendChild(o)}return e.forEach(function(e){var n=t._getTemplate("item",e);i.appendChild(n)}),i}},{key:"render",value:function(){if(!this.store.isLoading()&&(this.currentState=this.store.getState(),this.currentState!==this.prevState)){if((this.currentState.choices!==this.prevState.choices||this.currentState.groups!==this.prevState.groups||this.currentState.items!==this.prevState.items)&&this.isSelectElement){var e=this.store.getGroupsFilteredByActive(),t=this.store.getChoicesFilteredByActive(),n=document.createDocumentFragment();this.choiceList.innerHTML="",this.config.resetScrollPosition&&(this.choiceList.scrollTop=0),e.length>=1&&this.isSearching!==!0?n=this.renderGroups(e,t,n):t.length>=1&&(n=this.renderChoices(t,n));var i=this.store.getItemsFilteredByActive(),r=this._canAddItem(i,this.input.value);if(n.childNodes&&n.childNodes.length>0)r.response?(this.choiceList.appendChild(n),this._highlightChoice()):this.choiceList.appendChild(this._getTemplate("notice",r.notice));else{var a=void 0,o=void 0;this.isSearching?(o=(0,m.isType)("Function",this.config.noResultsText)?this.config.noResultsText():this.config.noResultsText,a=this._getTemplate("notice",o,"no-results")):(o=(0,m.isType)("Function",this.config.noChoicesText)?this.config.noChoicesText():this.config.noChoicesText,a=this._getTemplate("notice",o,"no-choices")),this.choiceList.appendChild(a)}}if(this.currentState.items!==this.prevState.items){var s=this.store.getItemsFilteredByActive();if(this.itemList.innerHTML="",s&&s){var l=this.renderItems(s);l.childNodes&&this.itemList.appendChild(l)}}this.prevState=this.currentState}}},{key:"highlightItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return this;var n=e.id,i=e.groupId,r=i>=0?this.store.getGroupById(i):null;return this.store.dispatch((0,p.highlightItem)(n,!0)),t&&(r&&r.value?(0,m.triggerEvent)(this.passedElement,"highlightItem",{id:n,value:e.value,label:e.label,groupValue:r.value}):(0,m.triggerEvent)(this.passedElement,"highlightItem",{id:n,value:e.value,label:e.label})),this}},{key:"unhighlightItem",value:function(e){if(!e)return this;var t=e.id,n=e.groupId,i=n>=0?this.store.getGroupById(n):null;return this.store.dispatch((0,p.highlightItem)(t,!1)),i&&i.value?(0,m.triggerEvent)(this.passedElement,"unhighlightItem",{id:t,value:e.value,label:e.label,groupValue:i.value}):(0,m.triggerEvent)(this.passedElement,"unhighlightItem",{id:t,value:e.value,label:e.label}),this}},{key:"highlightAll",value:function(){var e=this,t=this.store.getItems();return t.forEach(function(t){e.highlightItem(t)}),this}},{key:"unhighlightAll",value:function(){var e=this,t=this.store.getItems();return t.forEach(function(t){e.unhighlightItem(t)}),this}},{key:"removeItemsByValue",value:function(e){var t=this;if(!e||!(0,m.isType)("String",e))return this;var n=this.store.getItemsFilteredByActive();return n.forEach(function(n){n.value===e&&t._removeItem(n)}),this}},{key:"removeActiveItems",value:function(e){var t=this,n=this.store.getItemsFilteredByActive();return n.forEach(function(n){n.active&&e!==n.id&&t._removeItem(n)}),this}},{key:"removeHighlightedItems",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.store.getItemsFilteredByActive();return n.forEach(function(n){n.highlighted&&n.active&&(e._removeItem(n),t&&e._triggerChange(n.value))}),this}},{key:"showDropdown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=document.body,n=document.documentElement,i=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight);this.containerOuter.classList.add(this.config.classNames.openState),this.containerOuter.setAttribute("aria-expanded","true"),this.dropdown.classList.add(this.config.classNames.activeState),this.dropdown.setAttribute("aria-expanded","true");var r=this.dropdown.getBoundingClientRect(),a=Math.ceil(r.top+window.scrollY+this.dropdown.offsetHeight),o=!1;return"auto"===this.config.position?o=a>=i:"top"===this.config.position&&(o=!0),o&&this.containerOuter.classList.add(this.config.classNames.flippedState),e&&this.canSearch&&document.activeElement!==this.input&&this.input.focus(),(0,m.triggerEvent)(this.passedElement,"showDropdown",{}),this}},{key:"hideDropdown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.containerOuter.classList.contains(this.config.classNames.flippedState);return this.containerOuter.classList.remove(this.config.classNames.openState),this.containerOuter.setAttribute("aria-expanded","false"),this.dropdown.classList.remove(this.config.classNames.activeState),this.dropdown.setAttribute("aria-expanded","false"),t&&this.containerOuter.classList.remove(this.config.classNames.flippedState),e&&this.canSearch&&document.activeElement===this.input&&this.input.blur(),(0,m.triggerEvent)(this.passedElement,"hideDropdown",{}),this}},{key:"toggleDropdown",value:function(){var e=this.dropdown.classList.contains(this.config.classNames.activeState);return e?this.hideDropdown():this.showDropdown(!0),this}},{key:"getValue",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.store.getItemsFilteredByActive(),i=[];return n.forEach(function(n){e.isTextElement?i.push(t?n.value:n):n.active&&i.push(t?n.value:n)}),this.isSelectOneElement?i[0]:i}},{key:"setValue",value:function(e){var t=this;if(this.initialised===!0){var n=[].concat(a(e)),i=function(e){var n=(0,m.getType)(e);if("Object"===n){if(!e.value)return;t.isTextElement?t._addItem(e.value,e.label,e.id,void 0,e.customProperties,e.placeholder):t._addChoice(e.value,e.label,!0,!1,-1,e.customProperties,e.placeholder)}else"String"===n&&(t.isTextElement?t._addItem(e):t._addChoice(e,e,!0,!1,-1,null))};n.length>1?n.forEach(function(e){i(e)}):i(n[0])}return this}},{key:"setValueByChoice",value:function(e){var t=this;if(!this.isTextElement){var n=this.store.getChoices(),i=(0,m.isType)("Array",e)?e:[e];i.forEach(function(e){var i=n.find(function(n){return t.config.itemComparer(n.value,e)});i?i.selected?t.config.silent||console.warn("Attempting to select choice already selected"):t._addItem(i.value,i.label,i.id,i.groupId,i.customProperties,i.placeholder,i.keyCode):t.config.silent||console.warn("Attempting to select choice that does not exist")})}return this}},{key:"setChoices",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.initialised===!0&&this.isSelectElement){if(!(0,m.isType)("Array",e)||!t)return this;r&&this._clearChoices(),this._setLoading(!0),e&&e.length&&(this.containerOuter.classList.remove(this.config.classNames.loadingState),e.forEach(function(e){e.choices?i._addGroup(e,e.id||null,t,n):i._addChoice(e[t],e[n],e.selected,e.disabled,void 0,e.customProperties,e.placeholder)})),this._setLoading(!1)}return this}},{key:"clearStore",value:function(){return this.store.dispatch((0,p.clearAll)()),this}},{key:"clearInput",value:function(){return this.input.value&&(this.input.value=""),this.isSelectOneElement||this._setInputWidth(),!this.isTextElement&&this.config.searchEnabled&&(this.isSearching=!1,this.store.dispatch((0,p.activateChoices)(!0))),this}},{key:"enable",value:function(){if(this.initialised){this.passedElement.disabled=!1;var e=this.containerOuter.classList.contains(this.config.classNames.disabledState);e&&(this._addEventListeners(),this.passedElement.removeAttribute("disabled"),this.input.removeAttribute("disabled"),this.containerOuter.classList.remove(this.config.classNames.disabledState),this.containerOuter.removeAttribute("aria-disabled"),this.isSelectOneElement&&this.containerOuter.setAttribute("tabindex","0"))}return this}},{key:"disable",value:function(){if(this.initialised){this.passedElement.disabled=!0;var e=!this.containerOuter.classList.contains(this.config.classNames.disabledState);e&&(this._removeEventListeners(),this.passedElement.setAttribute("disabled",""),this.input.setAttribute("disabled",""),this.containerOuter.classList.add(this.config.classNames.disabledState),this.containerOuter.setAttribute("aria-disabled","true"),this.isSelectOneElement&&this.containerOuter.setAttribute("tabindex","-1"))}return this}},{key:"ajax",value:function(e){var t=this;return this.initialised===!0&&this.isSelectElement&&(requestAnimationFrame(function(){t._handleLoadingState(!0)}),e(this._ajaxCallback())),this}},{key:"_triggerChange",value:function(e){e&&(0,m.triggerEvent)(this.passedElement,"change",{value:e})}},{key:"_handleButtonAction",value:function(e,t){if(e&&t&&this.config.removeItems&&this.config.removeItemButton){var n=t.parentNode.getAttribute("data-id"),i=e.find(function(e){return e.id===parseInt(n,10)});this._removeItem(i),this._triggerChange(i.value),this.isSelectOneElement&&this._selectPlaceholderChoice()}}},{key:"_selectPlaceholderChoice",value:function(){var e=this.store.getPlaceholderChoice();e&&(this._addItem(e.value,e.label,e.id,e.groupId,null,e.placeholder),this._triggerChange(e.value))}},{key:"_handleItemAction",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&t&&this.config.removeItems&&!this.isSelectOneElement){var r=t.getAttribute("data-id");e.forEach(function(e){e.id!==parseInt(r,10)||e.highlighted?i||e.highlighted&&n.unhighlightItem(e):n.highlightItem(e)}),document.activeElement!==this.input&&this.input.focus()}}},{key:"_handleChoiceAction",value:function(e,t){if(e&&t){var n=t.getAttribute("data-id"),i=this.store.getChoiceById(n),r=e[0]&&e[0].keyCode?e[0].keyCode:null,a=this.dropdown.classList.contains(this.config.classNames.activeState);if(i.keyCode=r,(0,m.triggerEvent)(this.passedElement,"choice",{choice:i}),i&&!i.selected&&!i.disabled){var o=this._canAddItem(e,i.value);o.response&&(this._addItem(i.value,i.label,i.id,i.groupId,i.customProperties,i.placeholder,i.keyCode),this._triggerChange(i.value))}this.clearInput(),a&&this.isSelectOneElement&&(this.hideDropdown(),this.containerOuter.focus())}}},{key:"_handleBackspace",value:function(e){if(this.config.removeItems&&e){var t=e[e.length-1],n=e.some(function(e){return e.highlighted});this.config.editItems&&!n&&t?(this.input.value=t.value,this._setInputWidth(),this._removeItem(t),this._triggerChange(t.value)):(n||this.highlightItem(t,!1),this.removeHighlightedItems(!0))}}},{key:"_canAddItem",value:function(e,t){var n=!0,i=(0,m.isType)("Function",this.config.addItemText)?this.config.addItemText(t):this.config.addItemText;(this.isSelectMultipleElement||this.isTextElement)&&this.config.maxItemCount>0&&this.config.maxItemCount<=e.length&&(n=!1,i=(0,m.isType)("Function",this.config.maxItemText)?this.config.maxItemText(this.config.maxItemCount):this.config.maxItemText),this.isTextElement&&this.config.addItems&&n&&this.config.regexFilter&&(n=this._regexFilter(t));var r=!e.some(function(e){return(0,m.isType)("String",t)?e.value===t.trim():e.value===t});return r||this.config.duplicateItems||this.isSelectOneElement||!n||(n=!1,i=(0,m.isType)("Function",this.config.uniqueItemText)?this.config.uniqueItemText(t):this.config.uniqueItemText),{response:n,notice:i}}},{key:"_handleLoadingState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.itemList.querySelector("."+this.config.classNames.placeholder);e?(this.containerOuter.classList.add(this.config.classNames.loadingState),this.containerOuter.setAttribute("aria-busy","true"),this.isSelectOneElement?t?t.innerHTML=this.config.loadingText:(t=this._getTemplate("placeholder",this.config.loadingText),this.itemList.appendChild(t)):this.input.placeholder=this.config.loadingText):(this.containerOuter.classList.remove(this.config.classNames.loadingState),this.isSelectOneElement?t.innerHTML=this.placeholder||"":this.input.placeholder=this.placeholder||"")}},{key:"_ajaxCallback",value:function(){var e=this;return function(t,n,i){if(t&&n){var r=(0,m.isType)("Object",t)?[t]:t;r&&(0,m.isType)("Array",r)&&r.length?(e._handleLoadingState(!1),e._setLoading(!0),r.forEach(function(t){if(t.choices){var r=t.id||null;e._addGroup(t,r,n,i)}else e._addChoice(t[n],t[i],t.selected,t.disabled,void 0,t.customProperties,t.placeholder)}),e._setLoading(!1),e.isSelectOneElement&&e._selectPlaceholderChoice()):e._handleLoadingState(!1),e.containerOuter.removeAttribute("aria-busy")}}}},{key:"_searchChoices",value:function(e){var t=(0,m.isType)("String",e)?e.trim():e,n=(0,m.isType)("String",this.currentValue)?this.currentValue.trim():this.currentValue;if(t.length>=1&&t!==n+" "){var i=this.store.getSearchableChoices(),r=t,a=(0,m.isType)("Array",this.config.searchFields)?this.config.searchFields:[this.config.searchFields],o=Object.assign(this.config.fuseOptions,{keys:a}),s=new c.default(i,o),l=s.search(r);return this.currentValue=t,this.highlightPosition=0,this.isSearching=!0,this.store.dispatch((0,p.filterChoices)(l)),l.length}return 0}},{key:"_handleSearch",value:function(e){if(e){var t=this.store.getChoices(),n=t.some(function(e){return!e.active});if(this.input===document.activeElement)if(e&&e.length>=this.config.searchFloor){var i=0;this.config.searchChoices&&(i=this._searchChoices(e)),(0,m.triggerEvent)(this.passedElement,"search",{value:e,resultCount:i})}else n&&(this.isSearching=!1,this.store.dispatch((0,p.activateChoices)(!0)))}}},{key:"_addEventListeners",value:function(){document.addEventListener("keyup",this._onKeyUp),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("click",this._onClick),document.addEventListener("touchmove",this._onTouchMove),document.addEventListener("touchend",this._onTouchEnd),document.addEventListener("mousedown",this._onMouseDown),document.addEventListener("mouseover",this._onMouseOver),this.isSelectOneElement&&(this.containerOuter.addEventListener("focus",this._onFocus),this.containerOuter.addEventListener("blur",this._onBlur)),this.input.addEventListener("input",this._onInput),this.input.addEventListener("paste",this._onPaste),this.input.addEventListener("focus",this._onFocus),this.input.addEventListener("blur",this._onBlur)}},{key:"_removeEventListeners",value:function(){document.removeEventListener("keyup",this._onKeyUp),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("click",this._onClick),document.removeEventListener("touchmove",this._onTouchMove),document.removeEventListener("touchend",this._onTouchEnd),document.removeEventListener("mousedown",this._onMouseDown),document.removeEventListener("mouseover",this._onMouseOver),this.isSelectOneElement&&(this.containerOuter.removeEventListener("focus",this._onFocus),this.containerOuter.removeEventListener("blur",this._onBlur)),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("paste",this._onPaste),this.input.removeEventListener("focus",this._onFocus),this.input.removeEventListener("blur",this._onBlur)}},{key:"_setInputWidth",value:function(){this.placeholder?this.input.value&&this.input.value.length>=this.placeholder.length/1.25&&(this.input.style.width=(0,m.getWidthOfInput)(this.input)):this.input.style.width=(0,m.getWidthOfInput)(this.input)}},{key:"_onKeyDown",value:function(e){var t,n=this;if(e.target===this.input||this.containerOuter.contains(e.target)){var i=e.target,a=this.store.getItemsFilteredByActive(),o=this.input===document.activeElement,s=this.dropdown.classList.contains(this.config.classNames.activeState),l=this.itemList&&this.itemList.children,c=String.fromCharCode(e.keyCode),d=46,u=8,f=13,h=65,p=27,v=38,g=40,y=33,b=34,w=e.ctrlKey||e.metaKey;this.isTextElement||!/[a-zA-Z0-9-_ ]/.test(c)||s||this.showDropdown(!0),this.canSearch=this.config.searchEnabled;var E=function(){w&&l&&(n.canSearch=!1,n.config.removeItems&&!n.input.value&&n.input===document.activeElement&&n.highlightAll())},_=function(){if(n.isTextElement&&i.value){var t=n.input.value,r=n._canAddItem(a,t);r.response&&(s&&n.hideDropdown(),n._addItem(t),n._triggerChange(t),n.clearInput())}if(i.hasAttribute("data-button")&&(n._handleButtonAction(a,i),e.preventDefault()),s){e.preventDefault();var o=n.dropdown.querySelector("."+n.config.classNames.highlightedState);o&&(a[0]&&(a[0].keyCode=f),n._handleChoiceAction(a,o))}else n.isSelectOneElement&&(s||(n.showDropdown(!0),e.preventDefault()))},C=function(){s&&(n.toggleDropdown(),n.containerOuter.focus())},T=function(){if(s||n.isSelectOneElement){s||n.showDropdown(!0),n.canSearch=!1;var t=e.keyCode===g||e.keyCode===b?1:-1,i=e.metaKey||e.keyCode===b||e.keyCode===y,r=void 0;if(i)r=t>0?Array.from(n.dropdown.querySelectorAll("[data-choice-selectable]")).pop():n.dropdown.querySelector("[data-choice-selectable]");else{var a=n.dropdown.querySelector("."+n.config.classNames.highlightedState);r=a?(0,m.getAdjacentEl)(a,"[data-choice-selectable]",t):n.dropdown.querySelector("[data-choice-selectable]")}r&&((0,m.isScrolledIntoView)(r,n.choiceList,t)||n._scrollToChoice(r,t),n._highlightChoice(r)),e.preventDefault()}},S=function(){!o||e.target.value||n.isSelectOneElement||(n._handleBackspace(a),e.preventDefault())},k=(t={},r(t,h,E),r(t,f,_),r(t,p,C),r(t,v,T),r(t,y,T),r(t,g,T),r(t,b,T),r(t,u,S),r(t,d,S),t);k[e.keyCode]&&k[e.keyCode]()}}},{key:"_onKeyUp",value:function(e){if(e.target===this.input){var t=this.input.value,n=this.store.getItemsFilteredByActive(),i=this._canAddItem(n,t);if(this.isTextElement){var r=this.dropdown.classList.contains(this.config.classNames.activeState);if(t){if(i.notice){var a=this._getTemplate("notice",i.notice);this.dropdown.innerHTML=a.outerHTML}i.response===!0?r||this.showDropdown():!i.notice&&r&&this.hideDropdown()}else r&&this.hideDropdown()}else{var o=46,s=8;e.keyCode!==o&&e.keyCode!==s||e.target.value?this.canSearch&&i.response&&this._handleSearch(this.input.value):!this.isTextElement&&this.isSearching&&(this.isSearching=!1,this.store.dispatch((0,p.activateChoices)(!0)))}this.canSearch=this.config.searchEnabled}}},{key:"_onInput",value:function(){this.isSelectOneElement||this._setInputWidth()}},{key:"_onTouchMove",value:function(){this.wasTap===!0&&(this.wasTap=!1)}},{key:"_onTouchEnd",value:function(e){var t=e.target||e.touches[0].target,n=this.dropdown.classList.contains(this.config.classNames.activeState);this.wasTap===!0&&this.containerOuter.contains(t)&&(t!==this.containerOuter&&t!==this.containerInner||this.isSelectOneElement||(this.isTextElement?document.activeElement!==this.input&&this.input.focus():n||this.showDropdown(!0)),e.stopPropagation()),this.wasTap=!0}},{key:"_onMouseDown",value:function(e){var t=e.target;if(t===this.choiceList&&this.isIe11&&(this.isScrollingOnIe=!0),this.containerOuter.contains(t)&&t!==this.input){var n=void 0,i=this.store.getItemsFilteredByActive(),r=e.shiftKey;(n=(0,m.findAncestorByAttrName)(t,"data-button"))?this._handleButtonAction(i,n):(n=(0,m.findAncestorByAttrName)(t,"data-item"))?this._handleItemAction(i,n,r):(n=(0,m.findAncestorByAttrName)(t,"data-choice"))&&this._handleChoiceAction(i,n),e.preventDefault()}}},{key:"_onClick",value:function(e){var t=e.target,n=this.dropdown.classList.contains(this.config.classNames.activeState),i=this.store.getItemsFilteredByActive();if(this.containerOuter.contains(t))t.hasAttribute("data-button")&&this._handleButtonAction(i,t),n?this.isSelectOneElement&&t!==this.input&&!this.dropdown.contains(t)&&this.hideDropdown(!0):this.isTextElement?document.activeElement!==this.input&&this.input.focus():this.canSearch?this.showDropdown(!0):(this.showDropdown(),this.containerOuter.focus());else{var r=i.some(function(e){return e.highlighted});r&&this.unhighlightAll(),this.containerOuter.classList.remove(this.config.classNames.focusState),n&&this.hideDropdown()}}},{key:"_onMouseOver",value:function(e){(e.target===this.dropdown||this.dropdown.contains(e.target))&&e.target.hasAttribute("data-choice")&&this._highlightChoice(e.target)}},{key:"_onPaste",value:function(e){e.target!==this.input||this.config.paste||e.preventDefault()}},{key:"_onFocus",value:function(e){var t=this,n=e.target;if(this.containerOuter.contains(n)){var i=this.dropdown.classList.contains(this.config.classNames.activeState),r={text:function(){n===t.input&&t.containerOuter.classList.add(t.config.classNames.focusState)},"select-one":function(){t.containerOuter.classList.add(t.config.classNames.focusState),n===t.input&&(i||t.showDropdown())},"select-multiple":function(){n===t.input&&(t.containerOuter.classList.add(t.config.classNames.focusState),i||t.showDropdown(!0))}};r[this.passedElement.type]()}}},{key:"_onBlur",value:function(e){var t=this,n=e.target;if(this.containerOuter.contains(n)&&!this.isScrollingOnIe){var i=this.store.getItemsFilteredByActive(),r=this.dropdown.classList.contains(this.config.classNames.activeState),a=i.some(function(e){return e.highlighted}),o={text:function(){n===t.input&&(t.containerOuter.classList.remove(t.config.classNames.focusState),a&&t.unhighlightAll(),r&&t.hideDropdown())},"select-one":function(){t.containerOuter.classList.remove(t.config.classNames.focusState),n===t.containerOuter&&r&&!t.canSearch&&t.hideDropdown(),n===t.input&&r&&t.hideDropdown()},"select-multiple":function(){n===t.input&&(t.containerOuter.classList.remove(t.config.classNames.focusState),r&&t.hideDropdown(),a&&t.unhighlightAll())}};o[this.passedElement.type]()}else this.isScrollingOnIe=!1,this.input.focus()}},{key:"_regexFilter",value:function(e){if(!e)return!1;var t=this.config.regexFilter,n=new RegExp(t.source,"i");return n.test(e)}},{key:"_scrollToChoice",value:function(e,t){var n=this;if(e){var i=this.choiceList.offsetHeight,r=e.offsetHeight,a=e.offsetTop+r,o=this.choiceList.scrollTop+i,s=t>0?this.choiceList.scrollTop+a-o:e.offsetTop,l=function e(){var i=4,r=n.choiceList.scrollTop,a=!1,o=void 0,l=void 0;t>0?(o=(s-r)/i,l=o>1?o:1,n.choiceList.scrollTop=r+l,r<s&&(a=!0)):(o=(r-s)/i,l=o>1?o:1,n.choiceList.scrollTop=r-l,r>s&&(a=!0)),a&&requestAnimationFrame(function(n){e(n,s,t)})};requestAnimationFrame(function(e){l(e,s,t)})}}},{key:"_highlightChoice",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=Array.from(this.dropdown.querySelectorAll("[data-choice-selectable]")),i=t;if(n&&n.length){var r=Array.from(this.dropdown.querySelectorAll("."+this.config.classNames.highlightedState));r.forEach(function(t){t.classList.remove(e.config.classNames.highlightedState),t.setAttribute("aria-selected","false")}),i?this.highlightPosition=n.indexOf(i):(i=n.length>this.highlightPosition?n[this.highlightPosition]:n[n.length-1],i||(i=n[0])),i.classList.add(this.config.classNames.highlightedState),i.setAttribute("aria-selected","true"),this.containerOuter.setAttribute("aria-activedescendant",i.id)}}},{key:"_addItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=(0,m.isType)("String",e)?e.trim():e,l=o,c=this.store.getItems(),d=t||s,u=parseInt(n,10)||-1,f=i>=0?this.store.getGroupById(i):null,h=c?c.length+1:1;return this.config.prependValue&&(s=this.config.prependValue+s.toString()),this.config.appendValue&&(s+=this.config.appendValue.toString()),this.store.dispatch((0,p.addItem)(s,d,h,u,i,r,a,l)),this.isSelectOneElement&&this.removeActiveItems(h),f&&f.value?(0,m.triggerEvent)(this.passedElement,"addItem",{
id:h,value:s,label:d,groupValue:f.value,keyCode:l}):(0,m.triggerEvent)(this.passedElement,"addItem",{id:h,value:s,label:d,keyCode:l}),this}},{key:"_removeItem",value:function(e){if(!e||!(0,m.isType)("Object",e))return this;var t=e.id,n=e.value,i=e.label,r=e.choiceId,a=e.groupId,o=a>=0?this.store.getGroupById(a):null;return this.store.dispatch((0,p.removeItem)(t,r)),o&&o.value?(0,m.triggerEvent)(this.passedElement,"removeItem",{id:t,value:n,label:i,groupValue:o.value}):(0,m.triggerEvent)(this.passedElement,"removeItem",{id:t,value:n,label:i}),this}},{key:"_addChoice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if("undefined"!=typeof e&&null!==e){var l=this.store.getChoices(),c=t||e,d=l?l.length+1:1,u=this.baseId+"-"+this.idNames.itemChoice+"-"+d;this.store.dispatch((0,p.addChoice)(e,c,d,r,i,u,a,o,s)),n&&this._addItem(e,c,d,void 0,a,o,s)}}},{key:"_clearChoices",value:function(){this.store.dispatch((0,p.clearChoices)())}},{key:"_addGroup",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"label",a=(0,m.isType)("Object",e)?e.choices:Array.from(e.getElementsByTagName("OPTION")),o=t?t:Math.floor((new Date).valueOf()*Math.random()),s=!!e.disabled&&e.disabled;a?(this.store.dispatch((0,p.addGroup)(e.label,o,!0,s)),a.forEach(function(e){var t=e.disabled||e.parentNode&&e.parentNode.disabled;n._addChoice(e[i],(0,m.isType)("Object",e)?e[r]:e.innerHTML,e.selected,t,o,e.customProperties,e.placeholder)})):this.store.dispatch((0,p.addGroup)(e.label,e.id,!1,e.disabled))}},{key:"_getTemplate",value:function(e){if(!e)return null;for(var t=this.config.templates,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t[e].apply(t,i)}},{key:"_createTemplates",value:function(){var e=this,t=this.config.classNames,n={containerOuter:function(n){return(0,m.strToEl)('\n          <div\n            class="'+t.containerOuter+'"\n            '+(e.isSelectElement?e.config.searchEnabled?'role="combobox" aria-autocomplete="list"':'role="listbox"':"")+'\n            data-type="'+e.passedElement.type+'"\n            '+(e.isSelectOneElement?'tabindex="0"':"")+'\n            aria-haspopup="true"\n            aria-expanded="false"\n            dir="'+n+'"\n            >\n          </div>\n        ')},containerInner:function(){return(0,m.strToEl)('\n          <div class="'+t.containerInner+'"></div>\n        ')},itemList:function(){var n,i=(0,u.default)(t.list,(n={},r(n,t.listSingle,e.isSelectOneElement),r(n,t.listItems,!e.isSelectOneElement),n));return(0,m.strToEl)('\n          <div class="'+i+'"></div>\n        ')},placeholder:function(e){return(0,m.strToEl)('\n          <div class="'+t.placeholder+'">\n            '+e+"\n          </div>\n        ")},item:function(n){var i,a=(0,u.default)(t.item,(i={},r(i,t.highlightedState,n.highlighted),r(i,t.itemSelectable,!n.highlighted),r(i,t.placeholder,n.placeholder),i));if(e.config.removeItemButton){var o;return a=(0,u.default)(t.item,(o={},r(o,t.highlightedState,n.highlighted),r(o,t.itemSelectable,!n.disabled),r(o,t.placeholder,n.placeholder),o)),(0,m.strToEl)('\n            <div\n              class="'+a+'"\n              data-item\n              data-id="'+n.id+'"\n              data-value="'+n.value+'"\n              data-deletable\n              '+(n.active?'aria-selected="true"':"")+"\n              "+(n.disabled?'aria-disabled="true"':"")+"\n              >\n              "+n.label+'<!--\n           --><button\n                type="button"\n                class="'+t.button+'"\n                data-button\n                aria-label="Remove item: \''+n.value+"'\"\n                >\n                Remove item\n              </button>\n            </div>\n          ")}return(0,m.strToEl)('\n          <div\n            class="'+a+'"\n            data-item\n            data-id="'+n.id+'"\n            data-value="'+n.value+'"\n            '+(n.active?'aria-selected="true"':"")+"\n            "+(n.disabled?'aria-disabled="true"':"")+"\n            >\n            "+n.label+"\n          </div>\n        ")},choiceList:function(){return(0,m.strToEl)('\n          <div\n            class="'+t.list+'"\n            dir="ltr"\n            role="listbox"\n            '+(e.isSelectOneElement?"":'aria-multiselectable="true"')+"\n            >\n          </div>\n        ")},choiceGroup:function(e){var n=(0,u.default)(t.group,r({},t.itemDisabled,e.disabled));return(0,m.strToEl)('\n          <div\n            class="'+n+'"\n            data-group\n            data-id="'+e.id+'"\n            data-value="'+e.value+'"\n            role="group"\n            '+(e.disabled?'aria-disabled="true"':"")+'\n            >\n            <div class="'+t.groupHeading+'">'+e.value+"</div>\n          </div>\n        ")},choice:function(n){var i,a=(0,u.default)(t.item,t.itemChoice,(i={},r(i,t.itemDisabled,n.disabled),r(i,t.itemSelectable,!n.disabled),r(i,t.placeholder,n.placeholder),i));return(0,m.strToEl)('\n          <div\n            class="'+a+'"\n            data-select-text="'+e.config.itemSelectText+'"\n            data-choice\n            data-id="'+n.id+'"\n            data-value="'+n.value+'"\n            '+(n.disabled?'data-choice-disabled aria-disabled="true"':"data-choice-selectable")+'\n            id="'+n.elementId+'"\n            '+(n.groupId>0?'role="treeitem"':'role="option"')+"\n            >\n            "+n.label+"\n          </div>\n        ")},input:function(){var e=(0,u.default)(t.input,t.inputCloned);return(0,m.strToEl)('\n          <input\n            type="text"\n            class="'+e+'"\n            autocomplete="off"\n            autocapitalize="off"\n            spellcheck="false"\n            role="textbox"\n            aria-autocomplete="list"\n            >\n        ')},dropdown:function(){var e=(0,u.default)(t.list,t.listDropdown);return(0,m.strToEl)('\n          <div\n            class="'+e+'"\n            aria-expanded="false"\n            >\n          </div>\n        ')},notice:function(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=(0,u.default)(t.item,t.itemChoice,(n={},r(n,t.noResults,"no-results"===i),r(n,t.noChoices,"no-choices"===i),n));return(0,m.strToEl)('\n          <div class="'+a+'">\n            '+e+"\n          </div>\n        ")},option:function(e){return(0,m.strToEl)('\n          <option value="'+e.value+'" selected>'+e.label+"</option>\n        ")}},i=this.config.callbackOnCreateTemplates,a={};i&&(0,m.isType)("Function",i)&&(a=i.call(this,m.strToEl)),this.config.templates=(0,m.extend)(n,a)}},{key:"_setLoading",value:function(e){this.store.dispatch((0,p.setIsLoading)(e))}},{key:"_createInput",value:function(){var e=this,t=this.passedElement.getAttribute("dir")||"ltr",n=this._getTemplate("containerOuter",t),i=this._getTemplate("containerInner"),r=this._getTemplate("itemList"),a=this._getTemplate("choiceList"),o=this._getTemplate("input"),s=this._getTemplate("dropdown");this.containerOuter=n,this.containerInner=i,this.input=o,this.choiceList=a,this.itemList=r,this.dropdown=s,this.passedElement.classList.add(this.config.classNames.input,this.config.classNames.hiddenState),this.passedElement.tabIndex="-1";var l=this.passedElement.getAttribute("style");if(Boolean(l)&&this.passedElement.setAttribute("data-choice-orig-style",l),this.passedElement.setAttribute("style","display:none;"),this.passedElement.setAttribute("aria-hidden","true"),this.passedElement.setAttribute("data-choice","active"),(0,m.wrap)(this.passedElement,i),(0,m.wrap)(i,n),this.isSelectOneElement?o.placeholder=this.config.searchPlaceholderValue||"":this.placeholder&&(o.placeholder=this.placeholder,o.style.width=(0,m.getWidthOfInput)(o)),this.config.addItems||this.disable(),n.appendChild(i),n.appendChild(s),i.appendChild(r),this.isTextElement||s.appendChild(a),this.isSelectMultipleElement||this.isTextElement?i.appendChild(o):this.canSearch&&s.insertBefore(o,s.firstChild),this.isSelectElement){var c=Array.from(this.passedElement.getElementsByTagName("OPTGROUP"));if(this.highlightPosition=0,this.isSearching=!1,this._setLoading(!0),c&&c.length)c.forEach(function(t){e._addGroup(t,t.id||null)});else{var d=Array.from(this.passedElement.options),u=this.config.sortFilter,f=this.presetChoices;d.forEach(function(e){f.push({value:e.value,label:e.innerHTML,selected:e.selected,disabled:e.disabled||e.parentNode.disabled,placeholder:e.hasAttribute("placeholder")})}),this.config.shouldSort&&f.sort(u);var h=f.some(function(e){return e.selected});f.forEach(function(t,n){if(e.isSelectOneElement){var i=h||!h&&n>0;e._addChoice(t.value,t.label,!i||t.selected,!!i&&t.disabled,void 0,t.customProperties,t.placeholder)}else e._addChoice(t.value,t.label,t.selected,t.disabled,void 0,t.customProperties,t.placeholder)})}this._setLoading(!1)}else this.isTextElement&&this.presetItems.forEach(function(t){var n=(0,m.getType)(t);if("Object"===n){if(!t.value)return;e._addItem(t.value,t.label,t.id,void 0,t.customProperties,t.placeholder)}else"String"===n&&e._addItem(t)})}}]),e}();e.exports=v},function(e,t,n){!function(t){"use strict";function n(){console.log.apply(console,arguments)}function i(e,t){var n;this.list=e,this.options=t=t||{};for(n in s)s.hasOwnProperty(n)&&("boolean"==typeof s[n]?this.options[n]=n in t?t[n]:s[n]:this.options[n]=t[n]||s[n])}function r(e,t,n){var i,o,s,l,c,d;if(t){if(s=t.indexOf("."),s!==-1?(i=t.slice(0,s),o=t.slice(s+1)):i=t,l=e[i],null!==l&&void 0!==l)if(o||"string"!=typeof l&&"number"!=typeof l)if(a(l))for(c=0,d=l.length;c<d;c++)r(l[c],o,n);else o&&r(l,o,n);else n.push(l)}else n.push(e);return n}function a(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(e,t){t=t||{},this.options=t,this.options.location=t.location||o.defaultOptions.location,this.options.distance="distance"in t?t.distance:o.defaultOptions.distance,this.options.threshold="threshold"in t?t.threshold:o.defaultOptions.threshold,this.options.maxPatternLength=t.maxPatternLength||o.defaultOptions.maxPatternLength,this.pattern=t.caseSensitive?e:e.toLowerCase(),this.patternLen=e.length,this.patternLen<=this.options.maxPatternLength&&(this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet())}var s={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:o,sortFn:function(e,t){return e.score-t.score},getFn:r,keys:[],verbose:!1,tokenize:!1,matchAllTokens:!1,tokenSeparator:/ +/g,minMatchCharLength:1,findAllMatches:!1};i.VERSION="2.7.3",i.prototype.set=function(e){return this.list=e,e},i.prototype.search=function(e){this.options.verbose&&n("\nSearch term:",e,"\n"),this.pattern=e,this.results=[],this.resultMap={},this._keyMap=null,this._prepareSearchers(),this._startSearch(),this._computeScore(),this._sort();var t=this._format();return t},i.prototype._prepareSearchers=function(){var e=this.options,t=this.pattern,n=e.searchFn,i=t.split(e.tokenSeparator),r=0,a=i.length;if(this.options.tokenize)for(this.tokenSearchers=[];r<a;r++)this.tokenSearchers.push(new n(i[r],e));this.fullSeacher=new n(t,e)},i.prototype._startSearch=function(){var e,t,n,i,r=this.options,a=r.getFn,o=this.list,s=o.length,l=this.options.keys,c=l.length,d=null;if("string"==typeof o[0])for(n=0;n<s;n++)this._analyze("",o[n],n,n);else for(this._keyMap={},n=0;n<s;n++)for(d=o[n],i=0;i<c;i++){if(e=l[i],"string"!=typeof e){if(t=1-e.weight||1,this._keyMap[e.name]={weight:t},e.weight<=0||e.weight>1)throw new Error("Key weight has to be > 0 and <= 1");e=e.name}else this._keyMap[e]={weight:1};this._analyze(e,a(d,e,[]),d,n)}},i.prototype._analyze=function(e,t,i,r){var o,s,l,c,d,u,f,h,p,m,v,g,y,b,w,E=this.options,_=!1;if(void 0!==t&&null!==t){s=[];var C=0;if("string"==typeof t){if(o=t.split(E.tokenSeparator),E.verbose&&n("---------\nKey:",e),this.options.tokenize){for(b=0;b<this.tokenSearchers.length;b++){for(h=this.tokenSearchers[b],E.verbose&&n("Pattern:",h.pattern),p=[],g=!1,w=0;w<o.length;w++){m=o[w],v=h.search(m);var T={};v.isMatch?(T[m]=v.score,_=!0,g=!0,s.push(v.score)):(T[m]=1,this.options.matchAllTokens||s.push(1)),p.push(T)}g&&C++,E.verbose&&n("Token scores:",p)}for(c=s[0],u=s.length,b=1;b<u;b++)c+=s[b];c/=u,E.verbose&&n("Token score average:",c)}f=this.fullSeacher.search(t),E.verbose&&n("Full text score:",f.score),d=f.score,void 0!==c&&(d=(d+c)/2),E.verbose&&n("Score average:",d),y=!this.options.tokenize||!this.options.matchAllTokens||C>=this.tokenSearchers.length,E.verbose&&n("Check Matches",y),(_||f.isMatch)&&y&&(l=this.resultMap[r],l?l.output.push({key:e,score:d,matchedIndices:f.matchedIndices}):(this.resultMap[r]={item:i,output:[{key:e,score:d,matchedIndices:f.matchedIndices}]},this.results.push(this.resultMap[r])))}else if(a(t))for(b=0;b<t.length;b++)this._analyze(e,t[b],i,r)}},i.prototype._computeScore=function(){var e,t,i,r,a,o,s,l,c,d=this._keyMap,u=this.results;for(this.options.verbose&&n("\n\nComputing score:\n"),e=0;e<u.length;e++){for(i=0,r=u[e].output,a=r.length,l=1,t=0;t<a;t++)o=r[t].score,s=d?d[r[t].key].weight:1,c=o*s,1!==s?l=Math.min(l,c):(i+=c,r[t].nScore=c);1===l?u[e].score=i/a:u[e].score=l,this.options.verbose&&n(u[e])}},i.prototype._sort=function(){var e=this.options;e.shouldSort&&(e.verbose&&n("\n\nSorting...."),this.results.sort(e.sortFn))},i.prototype._format=function(){var e,t,i,r,a=this.options,o=a.getFn,s=[],l=this.results,c=a.include;for(a.verbose&&n("\n\nOutput:\n\n",l),i=a.id?function(e){l[e].item=o(l[e].item,a.id,[])[0]}:function(){},r=function(e){var t,n,i,r,a,o=l[e];if(c.length>0){if(t={item:o.item},c.indexOf("matches")!==-1)for(i=o.output,t.matches=[],n=0;n<i.length;n++)r=i[n],a={indices:r.matchedIndices},r.key&&(a.key=r.key),t.matches.push(a);c.indexOf("score")!==-1&&(t.score=l[e].score)}else t=o.item;return t},e=0,t=l.length;e<t;e++)i(e),s.push(r(e));return s},o.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},o.prototype._calculatePatternAlphabet=function(){var e={},t=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]|=1<<this.pattern.length-t-1;return e},o.prototype._bitapScore=function(e,t){var n=e/this.patternLen,i=Math.abs(this.options.location-t);return this.options.distance?n+i/this.options.distance:i?1:n},o.prototype.search=function(e){var t,n,i,r,a,o,s,l,c,d,u,f,h,p,m,v,g,y,b,w,E,_,C,T=this.options;if(e=T.caseSensitive?e:e.toLowerCase(),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};if(this.patternLen>T.maxPatternLength){if(y=e.match(new RegExp(this.pattern.replace(T.tokenSeparator,"|"))),b=!!y)for(E=[],t=0,_=y.length;t<_;t++)C=y[t],E.push([e.indexOf(C),C.length-1]);return{isMatch:b,score:b?.5:1,matchedIndices:E}}for(r=T.findAllMatches,a=T.location,i=e.length,o=T.threshold,s=e.indexOf(this.pattern,a),w=[],t=0;t<i;t++)w[t]=0;for(s!=-1&&(o=Math.min(this._bitapScore(0,s),o),s=e.lastIndexOf(this.pattern,a+this.patternLen),s!=-1&&(o=Math.min(this._bitapScore(0,s),o))),s=-1,v=1,g=[],d=this.patternLen+i,t=0;t<this.patternLen;t++){for(l=0,c=d;l<c;)this._bitapScore(t,a+c)<=o?l=c:d=c,c=Math.floor((d-l)/2+l);for(d=c,u=Math.max(1,a-c+1),f=r?i:Math.min(a+c,i)+this.patternLen,h=Array(f+2),h[f+1]=(1<<t)-1,n=f;n>=u;n--)if(m=this.patternAlphabet[e.charAt(n-1)],m&&(w[n-1]=1),h[n]=(h[n+1]<<1|1)&m,0!==t&&(h[n]|=(p[n+1]|p[n])<<1|1|p[n+1]),h[n]&this.matchmask&&(v=this._bitapScore(t,n-1),v<=o)){if(o=v,s=n-1,g.push(s),s<=a)break;u=Math.max(1,2*a-s)}if(this._bitapScore(t+1,a)>o)break;p=h}return E=this._getMatchedIndices(w),{isMatch:s>=0,score:0===v?.001:v,matchedIndices:E}},o.prototype._getMatchedIndices=function(e){for(var t,n=[],i=-1,r=-1,a=0,o=e.length;a<o;a++)t=e[a],t&&i===-1?i=a:t||i===-1||(r=a-1,r-i+1>=this.options.minMatchCharLength&&n.push([i,r]),i=-1);return e[a-1]&&a-1-i+1>=this.options.minMatchCharLength&&n.push([i,a-1]),n},e.exports=i}(this)},function(e,t,n){var i,r;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var r=typeof i;if("string"===r||"number"===r)e.push(i);else if(Array.isArray(i))e.push(n.apply(null,i));else if("object"===r)for(var o in i)a.call(i,o)&&i[o]&&e.push(o)}}return e.join(" ")}var a={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=n:(i=[],r=function(){return n}.apply(t,i),!(void 0!==r&&(e.exports=r)))}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(5),l=n(26),c=i(l),d=function(){function e(){a(this,e),this.store=(0,s.createStore)(c.default,window.devToolsExtension?window.devToolsExtension():void 0)}return o(e,[{key:"getState",value:function(){return this.store.getState()}},{key:"dispatch",value:function(e){this.store.dispatch(e)}},{key:"subscribe",value:function(e){this.store.subscribe(e)}},{key:"isLoading",value:function(){var e=this.store.getState();return e.general.loading}},{key:"getItems",value:function(){var e=this.store.getState();return e.items}},{key:"getItemsFilteredByActive",value:function(){var e=this.getItems(),t=e.filter(function(e){return e.active===!0},[]);return t}},{key:"getItemsReducedToValues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getItems(),t=e.reduce(function(e,t){return e.push(t.value),e},[]);return t}},{key:"getChoices",value:function(){var e=this.store.getState();return e.choices}},{key:"getChoicesFilteredByActive",value:function(){var e=this.getChoices(),t=e.filter(function(e){return e.active===!0});return t}},{key:"getChoicesFilteredBySelectable",value:function(){var e=this.getChoices(),t=e.filter(function(e){return e.disabled!==!0});return t}},{key:"getSearchableChoices",value:function(){var e=this.getChoicesFilteredBySelectable();return e.filter(function(e){return e.placeholder!==!0})}},{key:"getChoiceById",value:function(e){if(e){var t=this.getChoicesFilteredByActive(),n=t.find(function(t){return t.id===parseInt(e,10)});return n}return!1}},{key:"getGroups",value:function(){var e=this.store.getState();return e.groups}},{key:"getGroupsFilteredByActive",value:function(){var e=this.getGroups(),t=this.getChoices(),n=e.filter(function(e){var n=e.active===!0&&e.disabled===!1,i=t.some(function(e){return e.active===!0&&e.disabled===!1});return n&&i},[]);return n}},{key:"getGroupById",value:function(e){var t=this.getGroups(),n=t.find(function(t){return t.id===e});return n}},{key:"getPlaceholderChoice",value:function(){var e=this.getChoices(),t=[].concat(r(e)).reverse().find(function(e){return e.placeholder===!0});return t}}]),e}();t.default=d,e.exports=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var r=n(6),a=i(r),o=n(21),s=i(o),l=n(23),c=i(l),d=n(24),u=i(d),f=n(25),h=i(f),p=n(22);i(p),t.createStore=a.default,t.combineReducers=s.default,t.bindActionCreators=c.default,t.applyMiddleware=u.default,t.compose=h.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){function i(){g===v&&(g=v.slice())}function a(){return m}function s(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return i(),g.push(e),function(){if(t){t=!1,i();var n=g.indexOf(e);g.splice(n,1)}}}function d(e){if(!(0,o.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(y)throw new Error("Reducers may not dispatch actions.");try{y=!0,m=p(m,e)}finally{y=!1}for(var t=v=g,n=0;n<t.length;n++){var i=t[n];i()}return e}function u(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");p=e,d({type:c.INIT})}function f(){var e,t=s;return e={subscribe:function(e){function n(){e.next&&e.next(a())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");n();var i=t(n);return{unsubscribe:i}}},e[l.default]=function(){return this},e}var h;if("function"==typeof t&&"undefined"==typeof n&&(n=t,t=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(r)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var p=e,m=t,v=[],g=v,y=!1;return d({type:c.INIT}),h={dispatch:d,subscribe:s,getState:a,replaceReducer:u},h[l.default]=f,h}t.__esModule=!0,t.ActionTypes=void 0,t.default=r;var a=n(7),o=i(a),s=n(17),l=i(s),c=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,n){function i(e){if(!o(e)||r(e)!=s)return!1;var t=a(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&d.call(n)==f}var r=n(8),a=n(14),o=n(16),s="[object Object]",l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,f=d.call(Object);e.exports=i},function(e,t,n){function i(e){return null==e?void 0===e?l:s:c&&c in Object(e)?a(e):o(e)}var r=n(9),a=n(12),o=n(13),s="[object Null]",l="[object Undefined]",c=r?r.toStringTag:void 0;e.exports=i},function(e,t,n){var i=n(10),r=i.Symbol;e.exports=r},function(e,t,n){var i=n(11),r="object"==typeof self&&self&&self.Object===Object&&self,a=i||r||Function("return this")();e.exports=a},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){function i(e){var t=o.call(e,l),n=e[l];try{e[l]=void 0;var i=!0}catch(e){}var r=s.call(e);return i&&(t?e[l]=n:delete e[l]),r}var r=n(9),a=Object.prototype,o=a.hasOwnProperty,s=a.toString,l=r?r.toStringTag:void 0;e.exports=i},function(e,t){function n(e){return r.call(e)}var i=Object.prototype,r=i.toString;e.exports=n},function(e,t,n){var i=n(15),r=i(Object.getPrototypeOf,Object);e.exports=r},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){e.exports=n(18)},function(e,t,n){(function(e,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(20),s=r(o);a="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:i;var l=(0,s.default)(a);t.default=l}).call(t,function(){return this}(),n(19)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){"use strict";function n(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=t&&t.type,i=n&&'"'+n.toString()+'"'||"an action";return"Given action "+i+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function a(e){Object.keys(e).forEach(function(t){var n=e[t],i=n(void 0,{type:s.ActionTypes.INIT});if("undefined"==typeof i)throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");var r="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:r}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.")})}function o(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var o=t[i];"function"==typeof e[o]&&(n[o]=e[o])}var s=Object.keys(n),l=void 0;try{a(n)}catch(e){l=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(l)throw l;for(var i=!1,a={},o=0;o<s.length;o++){var c=s[o],d=n[c],u=e[c],f=d(u,t);if("undefined"==typeof f){var h=r(c,t);throw new Error(h)}a[c]=f,i=i||f!==u}return i?a:e}}t.__esModule=!0,t.default=o;var s=n(6),l=n(7),c=(i(l),n(22));i(c)},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.__esModule=!0,t.default=n},function(e,t){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function i(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var i=Object.keys(e),r={},a=0;a<i.length;a++){var o=i[a],s=e[o];"function"==typeof s&&(r[o]=n(s,t))}return r}t.__esModule=!0,t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,i,r){var o=e(n,i,r),l=o.dispatch,c=[],d={getState:o.getState,dispatch:function(e){return l(e)}};return c=t.map(function(e){return e(d)}),l=s.default.apply(void 0,c)(o.dispatch),a({},o,{dispatch:l})}}}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=r;var o=n(25),s=i(o)},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),a=n(27),o=i(a),s=n(28),l=i(s),c=n(29),d=i(c),u=n(30),f=i(u),h=(0,r.combineReducers)({items:o.default,groups:l.default,choices:d.default,general:f.default}),p=function(e,t){var n=e;return"CLEAR_ALL"===t.type&&(n=void 0),h(n,t)};t.default=p},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"ADD_ITEM":var i=[].concat(n(e),[{id:t.id,choiceId:t.choiceId,groupId:t.groupId,value:t.value,label:t.label,active:!0,highlighted:!1,customProperties:t.customProperties,placeholder:t.placeholder||!1,keyCode:null}]);return i.map(function(e){return e.highlighted&&(e.highlighted=!1),e});case"REMOVE_ITEM":return e.map(function(e){return e.id===t.id&&(e.active=!1),e});case"HIGHLIGHT_ITEM":return e.map(function(e){return e.id===t.id&&(e.highlighted=t.highlighted),e});default:return e}};t.default=i},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"ADD_GROUP":return[].concat(n(e),[{id:t.id,value:t.value,active:t.active,disabled:t.disabled}]);case"CLEAR_CHOICES":return e.groups=[];default:return e}};t.default=i},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"ADD_CHOICE":return[].concat(n(e),[{id:t.id,elementId:t.elementId,groupId:t.groupId,value:t.value,label:t.label||t.value,disabled:t.disabled||!1,selected:!1,active:!0,score:9999,customProperties:t.customProperties,placeholder:t.placeholder||!1,keyCode:null}]);case"ADD_ITEM":var i=e;return t.activateOptions&&(i=e.map(function(e){return e.active=t.active,e})),t.choiceId>-1&&(i=e.map(function(e){return e.id===parseInt(t.choiceId,10)&&(e.selected=!0),e})),i;case"REMOVE_ITEM":return t.choiceId>-1?e.map(function(e){return e.id===parseInt(t.choiceId,10)&&(e.selected=!1),e}):e;case"FILTER_CHOICES":var r=t.results,a=e.map(function(e){return e.active=r.some(function(t){return t.item.id===e.id&&(e.score=t.score,!0)}),e});return a;case"ACTIVATE_CHOICES":return e.map(function(e){return e.active=t.active,e});case"CLEAR_CHOICES":return e.choices=[];default:return e}};t.default=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1},t=arguments[1];switch(t.type){case"LOADING":return{loading:t.isLoading};default:return e}};t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addItem=function(e,t,n,i,r,a,o,s){return{type:"ADD_ITEM",value:e,label:t,id:n,choiceId:i,groupId:r,customProperties:a,placeholder:o,keyCode:s}},t.removeItem=function(e,t){return{type:"REMOVE_ITEM",id:e,choiceId:t}},t.highlightItem=function(e,t){return{type:"HIGHLIGHT_ITEM",id:e,highlighted:t}},t.addChoice=function(e,t,n,i,r,a,o,s,l){return{type:"ADD_CHOICE",value:e,label:t,id:n,groupId:i,disabled:r,elementId:a,customProperties:o,placeholder:s,keyCode:l}},t.filterChoices=function(e){return{type:"FILTER_CHOICES",results:e}},t.activateChoices=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:"ACTIVATE_CHOICES",active:e}},t.clearChoices=function(){return{type:"CLEAR_CHOICES"}},t.addGroup=function(e,t,n,i){return{type:"ADD_GROUP",value:e,id:t,active:n,disabled:i}},t.clearAll=function(){return{type:"CLEAR_ALL"}},t.setIsLoading=function(e){return{type:"LOADING",isLoading:e}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=(t.capitalise=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},t.generateChars=function(e){for(var t="",n=0;n<e;n++){var i=l(0,36);t+=i.toString(36)}return t}),r=(t.generateId=function(e,t){var n=e.id||e.name&&e.name+"-"+i(2)||i(4);return n=n.replace(/(:|\.|\[|\]|,)/g,""),n=t+n},t.getType=function(e){return Object.prototype.toString.call(e).slice(8,-1)}),a=t.isType=function(e,t){var n=r(t);return void 0!==t&&null!==t&&n===e},o=(t.isNode=function(e){return"object"===("undefined"==typeof Node?"undefined":n(Node))?e instanceof Node:e&&"object"===("undefined"==typeof e?"undefined":n(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName;
},t.isElement=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":n(HTMLElement))?e instanceof HTMLElement:e&&"object"===("undefined"==typeof e?"undefined":n(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},t.extend=function e(){for(var t={},n=arguments.length,i=function(n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a("Object",n[i])?t[i]=e(!0,t[i],n[i]):t[i]=n[i])},r=0;r<n;r++){var o=arguments[r];a("Object",o)&&i(o)}return t},t.whichTransitionEvent=function(){var e,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]},t.whichAnimationEvent=function(){var e,t=document.createElement("fakeelement"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}),s=(t.getParentsUntil=function(e,t,n){for(var i=[];e&&e!==document;e=e.parentNode){if(t){var r=t.charAt(0);if("."===r&&e.classList.contains(t.substr(1)))break;if("#"===r&&e.id===t.substr(1))break;if("["===r&&e.hasAttribute(t.substr(1,t.length-1)))break;if(e.tagName.toLowerCase()===t)break}if(n){var a=n.charAt(0);"."===a&&e.classList.contains(n.substr(1))&&i.push(e),"#"===a&&e.id===n.substr(1)&&i.push(e),"["===a&&e.hasAttribute(n.substr(1,n.length-1))&&i.push(e),e.tagName.toLowerCase()===n&&i.push(e)}else i.push(e)}return 0===i.length?null:i},t.wrap=function(e,t){return t=t||document.createElement("div"),e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t.appendChild(e)},t.getSiblings=function(e){for(var t=[],n=e.parentNode.firstChild;n;n=n.nextSibling)1===n.nodeType&&n!==e&&t.push(n);return t},t.findAncestor=function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e},t.findAncestorByAttrName=function(e,t){for(var n=e;n;){if(n.hasAttribute(t))return n;n=n.parentElement}return null},t.debounce=function(e,t,n){var i;return function(){var r=this,a=arguments,o=function(){i=null,n||e.apply(r,a)},s=n&&!i;clearTimeout(i),i=setTimeout(o,t),s&&e.apply(r,a)}},t.getElemDistance=function(e){var t=0;if(e.offsetParent)do t+=e.offsetTop,e=e.offsetParent;while(e);return t>=0?t:0},t.getElementOffset=function(e,t){var n=t;return n>1&&(n=1),n>0&&(n=0),Math.max(e.offsetHeight*n)},t.getAdjacentEl=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e&&t){var i=e.parentNode.parentNode,r=Array.from(i.querySelectorAll(t)),a=r.indexOf(e),o=n>0?1:-1;return r[a+o]}},t.getScrollPosition=function(e){return"bottom"===e?Math.max((window.scrollY||window.pageYOffset)+(window.innerHeight||document.documentElement.clientHeight)):window.scrollY||window.pageYOffset},t.isInView=function(e,t,n){return this.getScrollPosition(t)>this.getElemDistance(e)+this.getElementOffset(e,n)},t.isScrolledIntoView=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e){var i=void 0;return i=n>0?t.scrollTop+t.offsetHeight>=e.offsetTop+e.offsetHeight:e.offsetTop>=t.scrollTop}},t.stripHTML=function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&rt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}),l=(t.addAnimation=function(e,t){var n=o(),i=function i(){e.classList.remove(t),e.removeEventListener(n,i,!1)};e.classList.add(t),e.addEventListener(n,i,!1)},t.getRandomNumber=function(e,t){return Math.floor(Math.random()*(t-e)+e)}),c=t.strToEl=function(){var e=document.createElement("div");return function(t){var n=t.trim(),i=void 0;for(e.innerHTML=n,i=e.children[0];e.firstChild;)e.removeChild(e.firstChild);return i}}();t.getWidthOfInput=function(e){var t=e.value||e.placeholder,n=e.offsetWidth;if(t){var i=c("<span>"+s(t)+"</span>");if(i.style.position="absolute",i.style.padding="0",i.style.top="-9999px",i.style.left="-9999px",i.style.width="auto",i.style.whiteSpace="pre",document.body.contains(e)&&window.getComputedStyle){var r=window.getComputedStyle(e);r&&(i.style.fontSize=r.fontSize,i.style.fontFamily=r.fontFamily,i.style.fontWeight=r.fontWeight,i.style.fontStyle=r.fontStyle,i.style.letterSpacing=r.letterSpacing,i.style.textTransform=r.textTransform,i.style.padding=r.padding)}document.body.appendChild(i),t&&i.offsetWidth!==e.offsetWidth&&(n=i.offsetWidth+4),document.body.removeChild(i)}return n+"px"},t.sortByAlpha=function(e,t){var n=(e.label||e.value).toLowerCase(),i=(t.label||t.value).toLowerCase();return n<i?-1:n>i?1:0},t.sortByScore=function(e,t){return e.score-t.score},t.triggerEvent=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0});return e.dispatchEvent(i)}},function(e,t){"use strict";!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},i=Math.pow(2,53)-1,r=function(e){var t=n(e);return Math.min(Math.max(t,0),i)};return function(e){var n=this,i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var a,o=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof o){if(!t(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}for(var s,l=r(i.length),c=t(n)?Object(new n(l)):new Array(l),d=0;d<l;)s=i[d],o?c[d]="undefined"==typeof a?o(s,d):o.call(a,s,d):c[d]=s,d+=1;return c.length=l,c}}()),Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,r=arguments[1],a=0;a<i;a++)if(t=n[a],e.call(r,t,a,n))return t}),e.prototype=window.Event.prototype,window.CustomEvent=e}()}])})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(5),c=i(l),d=n(10),u=i(d),f=n(6),h=i(f),p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"init",value:function(){this.content=null}},{key:"click",value:function(){var e=this;return null!==this.content?this.content:(0,h.default)(this.config.assetsUrl+"endpoints/ajax.php?action=get-elements").then(function(e){return e.json()}).then(function(n){var i=document.createElement("dl");return n.data.elements.forEach(function(e){var n=document.createElement("dt");n.setAttribute("role","tab"),n.setAttribute("tabindex","1"),n.innerHTML=e.category;var r=document.createElement("dd"),a=document.createElement("div");a.classList.add("fred--thumbs","source","blueprints-source"),e.elements.forEach(function(e){a.appendChild(t.elementWrapper(e.id,e.title,e.description,e.image,e.content,e.options||{}))}),r.appendChild(a),i.appendChild(n),i.appendChild(r)}),e.content=i,e.content})}},{key:"afterExpand",value:function(){u.default.reloadContainers()}}],[{key:"elementWrapper",value:function(e,t,n,i,r,a){var o=document.createElement("figure");o.classList.add("fred--thumb");var s=document.createElement("div"),l=document.createElement("img");l.src=i,l.alt=t,s.appendChild(l);var c=document.createElement("figcaption");c.innerHTML="<strong>"+t+"</strong><em>"+n+"</em>";var d=document.createElement("div");return d.classList.add("chunk"),d.dataset.fredElementId=e,d.setAttribute("hidden","hidden"),d.innerHTML=r,d.elementOptions=a,o.appendChild(s),o.appendChild(c),o.appendChild(d),o}}]),t}(c.default);p.title="Elements",p.expandable=!0,t.default=p,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),l=i(s),c=n(11),d=i(c),u=n(23),f=i(u),h=function(){function e(){a(this,e),this.drake=null,this.topScroll=null,this.bottomScroll=null,this.scrollSpeed=null,this.lastPosition=null,this.scrollHandler=this.scrollHandler.bind(this)}return o(e,[{key:"initDrake",value:function(e){var t=this;this.config=e;var n=[].concat(r(document.querySelectorAll('[data-fred-dropzone]:not([data-fred-dropzone=""])')));n.unshift.apply(n,r(document.querySelectorAll(".source")));var i=function(e,t){return e.contains?e!=t&&e.contains(t):!!(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)};try{this.drake=(0,d.default)(n,{copy:function(e,t){return t.classList.contains("source")},accepts:function(e,t){return!i(e,t)!=!1&&!t.classList.contains("source")},moves:function(e,t,n,i){return void 0===t.dataset.fredDropzone||""===t.dataset.fredDropzone||n.classList.contains("handle")}})}catch(e){}this.drake.on("cloned",function(e,t,n){"copy"===n&&(e.lastChild.elementOptions=t.lastChild.elementOptions)}),this.drake.on("drop",function(e,n,i,r){if(i.classList.contains("blueprints-source")&&e.parentNode){var a=n.fredEl||null,o=new f.default(t.config,e.lastChild,n.dataset.fredDropzone,a);a&&(null===r?a.dzs[n.dataset.fredDropzone].children.push(o.wrapper):a.dzs[n.dataset.fredDropzone].children.splice(a.dzs[n.dataset.fredDropzone].children.indexOf(r),0,o.wrapper)),e.parentNode.replaceChild(o.wrapper,e)}else if(n&&e.fredEl){e.fredEl.parent&&e.fredEl.parent.dzs[i.dataset.fredDropzone].children.splice(e.fredEl.parent.dzs[i.dataset.fredDropzone].children.indexOf(e),1);var s=n.fredEl||null;s&&(null===r?s.dzs[n.dataset.fredDropzone].children.push(e):s.dzs[n.dataset.fredDropzone].children.splice(s.dzs[n.dataset.fredDropzone].children.indexOf(r),0,e)),e.fredEl.parent=s,e.fredEl.dzName=n.dataset.fredDropzone}t.reloadContainers()}),this.drake.on("drag",function(e,n){t.registerScroller();var i=document.querySelectorAll("[data-fred-dropzone]"),r=!0,a=!1,o=void 0;try{for(var s,c=i[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var d=s.value;d.classList.add("fred--dropzone_highlight")}}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}l.default.emit("fred-sidebar-hide",!0)}),this.drake.on("dragend",function(e){t.removeScroller();var n=document.querySelectorAll("[data-fred-dropzone]"),i=!0,r=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var c=o.value;c.classList.remove("fred--dropzone_highlight")}}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}l.default.emit("fred-sidebar-show",!0)})}},{key:"cancelScroll",value:function(e){this[e+"Scroll"]&&(clearInterval(this[e+"Scroll"]),this[e+"Scroll"]=null,this.scrollSpeed=null,this.lastPosition=null)}},{key:"scrollWindow",value:function(e,t,n){var i=this,r=!1,a=null;n.forEach(function(n){if("top"===t){var i=e.y>window.innerHeight-n.offset;r=r||i,i&&(a=n.speed)}else{var o=e.y<n.offset;r=r||o,o&&(a=-1*n.speed)}}),r?(this[t+"Scroll"]&&a!==this.scrollSpeed&&(clearInterval(this[t+"Scroll"]),this[t+"Scroll"]=null),null===this[t+"Scroll"]&&(this.lastPosition=window.innerHeight+window.scrollY,this[t+"Scroll"]=setInterval(function(){i.scrollSpeed=a,window.scrollBy(0,a);var e=window.innerHeight+window.scrollY;i.lastPosition===e&&i.cancelScroll(t),i.lastPosition=e},5))):this.cancelScroll(t)}},{key:"scrollHandler",value:function(e){this.scrollWindow(e,"top",[{offset:60,speed:2},{offset:30,speed:8}]),this.scrollWindow(e,"bottom",[{offset:60,speed:2},{offset:30,speed:8}])}},{key:"registerScroller",value:function(){this.topScroll=null,this.bottomScroll=null,this.scrollSpeed=null,this.lastPosition=null,document.addEventListener("mousemove",this.scrollHandler)}},{key:"removeScroller",value:function(){document.removeEventListener("mousemove",this.scrollHandler)}},{key:"reloadContainers",value:function(){for(var e=document.querySelectorAll('[data-fred-dropzone]:not([data-fred-dropzone=""])'),t=[].concat(r(e)),n=0;n<e.length;n++)t.push.apply(t,r(e[n].querySelectorAll('[data-fred-dropzone]:not([data-fred-dropzone=""])')));t.unshift.apply(t,r(document.querySelectorAll(".source"))),this.drake.containers=t}}]),e}(),p=new h;t.default=p,e.exports=t.default},function(e,t,n){(function(t){"use strict";function i(e,t){function n(e){return de.containers.indexOf(e)!==-1||ce.isContainer(e)}function i(e){var t=e?"remove":"add";r(C,t,"mousedown",S),r(C,t,"mouseup",N)}function s(e){var t=e?"remove":"add";r(C,t,"mousemove",k)}function m(e){var t=e?"remove":"add";w[t](C,"selectstart",T),w[t](C,"click",T)}function g(){i(!0),N({})}function T(e){se&&e.preventDefault()}function S(e){te=e.clientX,ne=e.clientY;var t=1!==a(e)||e.metaKey||e.ctrlKey;if(!t){var n=e.target,i=L(n);i&&(se=i,s(),"mousedown"===e.type&&(p(n)?n.focus():e.preventDefault()))}}function k(e){if(se){if(0===a(e))return void N({});if(void 0===e.clientX||e.clientX!==te||void 0===e.clientY||e.clientY!==ne){if(ce.ignoreInputTextSelection){var t=y("clientX",e),n=y("clientY",e),i=_.elementFromPoint(t,n);if(p(i))return}var r=se;s(!0),m(),I(),M(r);var l=o(Z);Q=y("pageX",e)-l.left,ee=y("pageY",e)-l.top,E.add(ae||Z,"gu-transit"),U(),R(e)}}}function L(e){if(!(de.dragging&&J||n(e))){for(var t=e;h(e)&&n(h(e))===!1;){if(ce.invalid(e,t))return;if(e=h(e),!e)return}var i=h(e);if(i&&!ce.invalid(e,t)){var r=ce.moves(e,i,t,v(e));if(r)return{item:e,source:i}}}}function x(e){return!!L(e)}function D(e){var t=L(e);t&&M(t)}function M(e){K(e.item,e.source)&&(ae=e.item.cloneNode(!0),de.emit("cloned",ae,e.item,"copy")),X=e.source,Z=e.item,ie=re=v(e.item),de.dragging=!0,de.emit("drag",Z,X)}function A(){return!1}function I(){if(de.dragging){var e=ae||Z;P(e,h(e))}}function O(){se=!1,s(!0),m(!0)}function N(e){if(O(),de.dragging){var t=ae||Z,n=y("clientX",e),i=y("clientY",e),r=l(J,n,i),a=z(r,n,i);a&&(ae&&ce.copySortSource||!ae||a!==X)?P(t,a):ce.removeOnSpill?j():H()}}function P(e,t){var n=h(e);ae&&ce.copySortSource&&t===X&&n.removeChild(Z),B(t)?de.emit("cancel",e,X,X):de.emit("drop",e,t,X,re),F()}function j(){if(de.dragging){var e=ae||Z,t=h(e);t&&t.removeChild(e),de.emit(ae?"cancel":"remove",e,t,X),F()}}function H(e){if(de.dragging){var t=arguments.length>0?e:ce.revertOnSpill,n=ae||Z,i=h(n),r=B(i);r===!1&&t&&(ae?i&&i.removeChild(ae):X.insertBefore(n,ie)),r||t?de.emit("cancel",n,X,X):de.emit("drop",n,i,X,re),F()}}function F(){var e=ae||Z;O(),q(),e&&E.rm(e,"gu-transit"),oe&&clearTimeout(oe),de.dragging=!1,le&&de.emit("out",e,le,X),de.emit("dragend",e),X=Z=ae=ie=re=oe=le=null}function B(e,t){var n;return n=void 0!==t?t:J?re:v(ae||Z),e===X&&n===ie}function z(e,t,i){function r(){var r=n(a);if(r===!1)return!1;var o=V(a,e),s=G(a,o,t,i),l=B(a,s);return!!l||ce.accepts(Z,a,X,s)}for(var a=e;a&&!r();)a=h(a);return a}function R(e){function t(e){de.emit(e,c,le,X)}function n(){f&&t("over")}function i(){le&&t("out")}if(J){e.preventDefault();var r=y("clientX",e),a=y("clientY",e),o=r-Q,s=a-ee;J.style.left=o+"px",J.style.top=s+"px";var c=ae||Z,d=l(J,r,a),u=z(d,r,a),f=null!==u&&u!==le;(f||null===u)&&(i(),le=u,n());var p=h(c);if(u===X&&ae&&!ce.copySortSource)return void(p&&p.removeChild(c));var m,g=V(u,d);if(null!==g)m=G(u,g,r,a);else{if(ce.revertOnSpill!==!0||ae)return void(ae&&p&&p.removeChild(c));m=ie,u=X}(null===m&&f||m!==c&&m!==v(c))&&(re=m,u.insertBefore(c,m),de.emit("shadow",c,u,X))}}function Y(e){E.rm(e,"gu-hide")}function W(e){de.dragging&&E.add(e,"gu-hide")}function U(){if(!J){var e=Z.getBoundingClientRect();J=Z.cloneNode(!0),J.style.width=u(e)+"px",J.style.height=f(e)+"px",E.rm(J,"gu-transit"),E.add(J,"gu-mirror"),ce.mirrorContainer.appendChild(J),r(C,"add","mousemove",R),E.add(ce.mirrorContainer,"gu-unselectable"),de.emit("cloned",J,Z,"mirror")}}function q(){J&&(E.rm(ce.mirrorContainer,"gu-unselectable"),r(C,"remove","mousemove",R),h(J).removeChild(J),J=null)}function V(e,t){for(var n=t;n!==e&&h(n)!==e;)n=h(n);return n===C?null:n}function G(e,t,n,i){function r(){var t,r,a,o=e.children.length;for(t=0;t<o;t++){if(r=e.children[t],a=r.getBoundingClientRect(),s&&a.left+a.width/2>n)return r;if(!s&&a.top+a.height/2>i)return r}return null}function a(){var e=t.getBoundingClientRect();return o(s?n>e.left+u(e)/2:i>e.top+f(e)/2)}function o(e){return e?v(t):t}var s="horizontal"===ce.direction,l=t!==e?a():r();return l}function K(e,t){return"boolean"==typeof ce.copy?ce.copy:ce.copy(e,t)}var $=arguments.length;1===$&&Array.isArray(e)===!1&&(t=e,e=[]);var J,X,Z,Q,ee,te,ne,ie,re,ae,oe,se,le=null,ce=t||{};void 0===ce.moves&&(ce.moves=d),void 0===ce.accepts&&(ce.accepts=d),void 0===ce.invalid&&(ce.invalid=A),void 0===ce.containers&&(ce.containers=e||[]),void 0===ce.isContainer&&(ce.isContainer=c),void 0===ce.copy&&(ce.copy=!1),void 0===ce.copySortSource&&(ce.copySortSource=!1),void 0===ce.revertOnSpill&&(ce.revertOnSpill=!1),void 0===ce.removeOnSpill&&(ce.removeOnSpill=!1),void 0===ce.direction&&(ce.direction="vertical"),void 0===ce.ignoreInputTextSelection&&(ce.ignoreInputTextSelection=!0),void 0===ce.mirrorContainer&&(ce.mirrorContainer=_.body);var de=b({containers:ce.containers,start:D,end:I,cancel:H,remove:j,destroy:g,canMove:x,dragging:!1});return ce.removeOnSpill===!0&&de.on("over",Y).on("out",W),i(),de}function r(e,n,i,r){var a={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},o={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},s={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};t.navigator.pointerEnabled?w[n](e,o[i],r):t.navigator.msPointerEnabled?w[n](e,s[i],r):(w[n](e,a[i],r),w[n](e,i,r))}function a(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function o(e){var t=e.getBoundingClientRect();return{left:t.left+s("scrollLeft","pageXOffset"),top:t.top+s("scrollTop","pageYOffset")}}function s(e,n){return"undefined"!=typeof t[n]?t[n]:C.clientHeight?C[e]:_.body[e]}function l(e,t,n){var i,r=e||{},a=r.className;return r.className+=" gu-hide",i=_.elementFromPoint(t,n),r.className=a,i}function c(){return!1}function d(){return!0}function u(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function h(e){return e.parentNode===_?null:e.parentNode}function p(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||m(e)}function m(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||m(h(e))))}function v(e){function t(){var t=e;do t=t.nextSibling;while(t&&1!==t.nodeType);return t}return e.nextElementSibling||t()}function g(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function y(e,t){var n=g(t),i={pageX:"clientX",pageY:"clientY"};return e in i&&!(e in n)&&i[e]in n&&(e=i[e]),n[e]}var b=n(12),w=n(19),E=n(22),_=document,C=_.documentElement;e.exports=i}).call(t,function(){return this}())},function(e,t,n){"use strict";var i=n(13),r=n(14);e.exports=function(e,t){var n=t||{},a={};return void 0===e&&(e={}),e.on=function(t,n){return a[t]?a[t].push(n):a[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var i=arguments.length;if(1===i)delete a[t];else if(0===i)a={};else{var r=a[t];if(!r)return e;r.splice(r.indexOf(n),1)}return e},e.emit=function(){var t=i(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var o=(a[t]||[]).slice(0);return function(){var a=i(arguments),s=this||e;if("error"===t&&n.throws!==!1&&!o.length)throw 1===a.length?a[0]:a;return o.forEach(function(i){n.async?r(i,a,s):i.apply(s,a),i._once&&e.off(t,i)}),e}},e}},function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},function(e,t,n){"use strict";var i=n(15);e.exports=function(e,t,n){e&&i(function(){e.apply(n||null,t||[])})}},function(e,t,n){(function(t){var n,i="function"==typeof t;n=i?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=n}).call(t,n(16).setImmediate)},function(e,t,n){(function(e){function i(e,t){this._id=e,this._clearFn=t}var r=Function.prototype.apply;t.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(17),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,function(){return this}())},function(e,t,n){(function(e,t){!function(e,n){"use strict";function i(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return m[p]=i,h(p),p++}function r(e){delete m[e]}function a(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function o(e){if(v)setTimeout(o,0,e);else{var t=m[e];if(t){v=!0;try{a(t)}finally{r(e),v=!1}}}}function s(){h=function(e){t.nextTick(function(){o(e)})}}function l(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function c(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),h=function(n){e.postMessage(t+n,"*")}}function d(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;o(t)},h=function(t){e.port2.postMessage(t)}}function u(){var e=g.documentElement;h=function(t){var n=g.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function f(){h=function(e){setTimeout(o,0,e)}}if(!e.setImmediate){var h,p=1,m={},v=!1,g=e.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,"[object process]"==={}.toString.call(e.process)?s():l()?c():e.MessageChannel?d():g&&"onreadystatechange"in g.createElement("script")?u():f(),y.setImmediate=i,y.clearImmediate=r}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(18))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(u===clearTimeout)return clearTimeout(e);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function o(){m&&h&&(m=!1,h.length?p=h.concat(p):v=-1,p.length&&s())}function s(){if(!m){var e=r(o);m=!0;for(var t=p.length;t;){for(h=p,p=[];++v<t;)h&&h[v].run();v=-1,t=p.length}h=null,m=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var d,u,f=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(e){u=i}}();var h,p=[],m=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new l(e,t)),1!==p.length||m||r(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){(function(t){"use strict";function i(e,t,n,i){return e.addEventListener(t,n,i)}function r(e,t,n){return e.attachEvent("on"+t,c(e,t,n))}function a(e,t,n,i){return e.removeEventListener(t,n,i)}function o(e,t,n){var i=d(e,t,n);if(i)return e.detachEvent("on"+t,i)}function s(e,t,n){function i(){var e;return p.createEvent?(e=p.createEvent("Event"),e.initEvent(t,!0,!0)):p.createEventObject&&(e=p.createEventObject()),e}function r(){return new f(t,{detail:n})}var a=h.indexOf(t)===-1?r():i();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}function l(e,n,i){return function(n){var r=n||t.event;r.target=r.target||r.srcElement,r.preventDefault=r.preventDefault||function(){r.returnValue=!1},r.stopPropagation=r.stopPropagation||function(){r.cancelBubble=!0},r.which=r.which||r.keyCode,i.call(e,r)}}function c(e,t,n){var i=d(e,t,n)||l(e,t,n);return g.push({wrapper:i,element:e,type:t,fn:n}),i}function d(e,t,n){var i=u(e,t,n);if(i){var r=g[i].wrapper;return g.splice(i,1),r}}function u(e,t,n){var i,r;for(i=0;i<g.length;i++)if(r=g[i],r.element===e&&r.type===t&&r.fn===n)return i}var f=n(20),h=n(21),p=t.document,m=i,v=a,g=[];t.addEventListener||(m=r,v=o),e.exports={add:m,remove:v,fabricate:s}}).call(t,function(){return this}())},function(e,t){(function(t){function n(){try{var e=new i("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}var i=t.CustomEvent;e.exports=n()?i:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,function(){return this}())},function(e,t){(function(t){"use strict";var n=[],i="",r=/^on/;for(i in t)r.test(i)&&n.push(i.slice(2));e.exports=n}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){var t=a[e];return t?t.lastIndex=0:a[e]=t=new RegExp(o+e+s,"g"),t}function i(e,t){var i=e.className;i.length?n(t).test(i)||(e.className+=" "+t):e.className=t}function r(e,t){e.className=e.className.replace(n(t)," ").trim()}var a={},o="(?:^|\\s)",s="(?:\\s|$)";e.exports={add:i,rm:r}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ContentElement=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(10),l=i(s),c=n(24),d=i(c),u=n(26),f=i(u),h=n(1),p=i(h),m=n(27),v=i(m),g=t.ContentElement=function(){function e(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};r(this,e),this.config=t,this.el=n,this.template=v.default.template(this.el.innerHTML),this.id=parseInt(this.el.dataset.fredElementId),this.parent=o,this.dzName=i,this.options=JSON.parse(JSON.stringify(this.el.elementOptions||{})),this.content=JSON.parse(JSON.stringify(l)),this.settings={},this.options.settings&&this.options.settings.forEach(function(e){e.group&&e.settings?e.settings.forEach(function(e){s.settings[e.name]=e.value||""}):s.settings[e.name]=e.value||""}),this.settings=a({},this.settings,JSON.parse(JSON.stringify(c))),this.dzs={},this.inEditor=!1,this.wrapper=this.render()}return o(e,[{key:"getContent",value:function(){var e=this,t={widget:this.id,values:this.content,settings:this.settings,children:{}},n=function(n){e.dzs.hasOwnProperty(n)&&e.dzs[n].children.length>0&&(t.children[n]=[],e.dzs[n].children.forEach(function(e){t.children[n].push(e.fredEl.getContent())}))};for(var i in this.dzs)n(i);return t}},{key:"render",value:function(){var e=this,t=document.createElement("div");t.classList.add("fred--block"),t.fredEl=this,t.addEventListener("mouseover",function(e){e.stopPropagation();var t=!1;if(e.path)e.path.forEach(function(e){e.classList&&e.classList.contains("fred--block")&&(e.classList.add("fred--block-active"),t===!0&&e.classList.add("fred--block-active_parent"),t=!0)});else for(var n=e.target.parentNode;n;)n.classList&&n.classList.contains("fred--block")&&(n.classList.add("fred--block-active"),t===!0&&n.classList.add("fred--block-active_parent"),t=!0),n=n.parentNode}),t.addEventListener("mouseout",function(n){e.inEditor===!1&&(t.classList.remove("fred--block-active"),t.classList.remove("fred--block-active_parent"))});var n=document.createElement("div");n.classList.add("fred--toolbar","handle");var i=document.createElement("div");i.classList.add("fred--toolbar-grip"),n.appendChild(i);var r=document.createElement("button");r.classList.add("fred--duplicate-icon"),r.addEventListener("click",function(t){t.preventDefault(),e.duplicate()});var a=document.createElement("button");if(a.classList.add("fred--trash"),a.addEventListener("click",function(t){t.preventDefault(),e.remove()}),this.options.settings){var o=document.createElement("button");o.classList.add("fred--element-settings"),o.addEventListener("click",function(t){t.preventDefault(),e.openSettings()}),n.appendChild(o)}n.appendChild(r),n.appendChild(a),t.appendChild(n);var s=document.createElement("div");s.classList.add("fred--block_content"),s.dataset.fredElementId=this.el.dataset.fredElementId,s.innerHTML=this.template(this.settings);var l=s.querySelectorAll("[data-fred-dropzone]"),c=null,u=!0,h=!1,m=void 0;try{for(var v,g=function(){var t=v.value;null===c?(c=t,t.fredEl=e,e.dzs[t.dataset.fredDropzone]?(e.dzs[t.dataset.fredDropzone].el=t,e.dzs[t.dataset.fredDropzone].children.forEach(function(n){e.dzs[t.dataset.fredDropzone].el.appendChild(n);
})):e.dzs[t.dataset.fredDropzone]={el:t,children:[]}):c.contains(t)||(t.fredEl=e,c=t,e.dzs[t.dataset.fredDropzone]?(e.dzs[t.dataset.fredDropzone].el=t,e.dzs[t.dataset.fredDropzone].children.forEach(function(n){e.dzs[t.dataset.fredDropzone].el.appendChild(n)})):e.dzs[t.dataset.fredDropzone]={el:t,children:[]})},y=l[Symbol.iterator]();!(u=(v=y.next()).done);u=!0)g()}catch(e){h=!0,m=e}finally{try{!u&&y.return&&y.return()}finally{if(h)throw m}}var b=s.querySelectorAll("[data-fred-name]"),w=!0,E=!1,_=void 0;try{for(var C,T=function(){var n=C.value,i=new MutationObserver(function(t){t.forEach(function(t){if("characterData"===t.type&&!n.rte)return e.content[n.dataset.fredName]||(e.content[n.dataset.fredName]={}),e.content[n.dataset.fredName]._raw||(e.content[n.dataset.fredName]._raw={}),e.content[n.dataset.fredName]._raw._value=n.innerHTML,void(n.dataset.fredTarget&&p.default.emit("fred-page-setting-change",n.dataset.fredTarget,e.content[n.dataset.fredName]._raw._value,n));if("attributes"===t.type){if("img"===n.nodeName.toLowerCase()&&"src"===t.attributeName)return e.content[n.dataset.fredName]||(e.content[n.dataset.fredName]={}),e.content[n.dataset.fredName]._raw||(e.content[n.dataset.fredName]._raw={}),e.content[n.dataset.fredName]._raw._value=n.getAttribute(t.attributeName),void(n.dataset.fredTarget&&p.default.emit("fred-page-setting-change",n.dataset.fredTarget,e.content[n.dataset.fredName]._raw._value,n));if("i"===n.nodeName.toLowerCase()&&"class"===t.attributeName)return e.content[n.dataset.fredName]||(e.content[n.dataset.fredName]={}),e.content[n.dataset.fredName]._raw||(e.content[n.dataset.fredName]._raw={}),e.content[n.dataset.fredName]._raw._value=n.className,void(n.dataset.fredTarget&&p.default.emit("fred-page-setting-change",n.dataset.fredTarget,e.content[n.dataset.fredName]._raw._value,n));if(n.dataset.fredAttrs){var i=n.dataset.fredAttrs.split(",");if(i.indexOf(t.attributeName)===-1)return;e.content[n.dataset.fredName]||(e.content[n.dataset.fredName]={}),e.content[n.dataset.fredName]._raw||(e.content[n.dataset.fredName]._raw={}),e.content[n.dataset.fredName]._raw[t.attributeName]=n.getAttribute(t.attributeName)}}})});if(i.observe(n,{attributes:!0,characterData:!0,subtree:!0}),"true"===n.dataset.fredRte&&tinymce.init({target:n,theme:"inlite",inline:!0,insert_toolbar:"quickimage quicktable",selection_toolbar:"bold italic | quicklink h2 h3 blockquote",auto_focus:!1,branding:!1,setup:function(i){n.rte=i,i.on("change",function(t){e.content[n.dataset.fredName]||(e.content[n.dataset.fredName]={}),e.content[n.dataset.fredName]._raw||(e.content[n.dataset.fredName]._raw={}),e.content[n.dataset.fredName]._raw._value=i.getContent(),n.dataset.fredTarget&&p.default.emit("fred-page-setting-change",n.dataset.fredTarget,e.content[n.dataset.fredName]._raw._value,n)}),i.on("focus",function(t){e.inEditor=!0}),i.on("blur",function(n){e.inEditor=!1,t.classList.remove("fred--block-active"),t.classList.remove("fred--block-active_parent")})}}),e.content[n.dataset.fredName]||(e.content[n.dataset.fredName]={}),e.content[n.dataset.fredName]._raw||(e.content[n.dataset.fredName]._raw={}),n.dataset.fredTarget&&(e.config.pageSettings[n.dataset.fredTarget]&&(e.content[n.dataset.fredName]._raw._value=e.config.pageSettings[n.dataset.fredTarget]),p.default.on("fred-page-setting-change",function(t,i,r){n!==r&&n.dataset.fredTarget===t&&e.setElValue(n,i)})),e.content[n.dataset.fredName]._raw._value){switch(n.nodeName.toLowerCase()){case"i":n.className=e.content[n.dataset.fredName]._raw._value,n.addEventListener("click",function(e){e.preventDefault(),f.default.edit(n)});break;case"img":n.setAttribute("src",e.content[n.dataset.fredName]._raw._value),n.addEventListener("click",function(e){e.preventDefault(),d.default.edit(n)});break;default:n.innerHTML=e.content[n.dataset.fredName]._raw._value}if(n.dataset.fredAttrs){var r=n.dataset.fredAttrs.split(",");r.forEach(function(t){e.content[n.dataset.fredName]._raw[t]&&n.setAttribute(t,e.content[n.dataset.fredName]._raw[t])})}}else{switch(n.nodeName.toLowerCase()){case"i":e.content[n.dataset.fredName]._raw._value=n.className,n.addEventListener("click",function(e){e.preventDefault(),f.default.edit(n)});break;case"img":e.content[n.dataset.fredName]._raw._value=n.getAttribute("src"),n.addEventListener("click",function(e){e.preventDefault(),d.default.edit(n)});break;default:e.content[n.dataset.fredName]._raw._value=n.innerHTML}if(n.dataset.fredAttrs){var a=n.dataset.fredAttrs.split(",");a.forEach(function(t){e.content[n.dataset.fredName]._raw[t]&&(e.content[n.dataset.fredName]._raw[t]=n.getAttribute(t))})}}},S=b[Symbol.iterator]();!(w=(C=S.next()).done);w=!0)T()}catch(e){E=!0,_=e}finally{try{!w&&S.return&&S.return()}finally{if(E)throw _}}return t.appendChild(s),t}},{key:"setElValue",value:function(e,t){switch(this.content[e.dataset.fredName]||(this.content[e.dataset.fredName]={}),this.content[e.dataset.fredName]._raw||(this.content[e.dataset.fredName]._raw={}),e.nodeName.toLowerCase()){case"i":this.content[e.dataset.fredName]._raw._value=t,e.className=t;break;case"img":this.content[e.dataset.fredName]._raw._value=t,e.setAttribute("src",t);break;default:this.content[e.dataset.fredName]._raw._value=t,e.innerHTML=t}}},{key:"reRender",value:function(){var e=this.render();this.wrapper.replaceWith(e),this.wrapper=e}},{key:"cleanRender",value:function(){var e=this,t=document.createElement("div");t.innerHTML=this.template(this.settings);var n=t.querySelectorAll("[data-fred-name]"),i=!0,r=!1,a=void 0;try{for(var o,s=function(){var t=o.value;if(e.content[t.dataset.fredName]&&e.content[t.dataset.fredName]._raw&&e.content[t.dataset.fredName]._raw._value){switch(t.nodeName.toLowerCase()){case"i":t.className=e.content[t.dataset.fredName]._raw._value;break;case"img":t.setAttribute("src",e.content[t.dataset.fredName]._raw._value);break;default:t.innerHTML=e.content[t.dataset.fredName]._raw._value}if(t.dataset.fredAttrs){var n=t.dataset.fredAttrs.split(",");n.forEach(function(n){e.content[t.dataset.fredName]._raw[n]&&t.setAttribute(n,e.content[t.dataset.fredName]._raw[n])})}}t.removeAttribute("contenteditable"),t.removeAttribute("data-fred-name"),t.removeAttribute("data-fred-rte"),t.removeAttribute("data-fred-target"),t.removeAttribute("data-fred-attrs")},l=n[Symbol.iterator]();!(i=(o=l.next()).done);i=!0)s()}catch(e){r=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw a}}for(var c in this.dzs)if(this.dzs.hasOwnProperty(c)){var d=t.querySelector('[data-fred-dropzone="'+c+'"]');if(d&&(d.removeAttribute("data-fred-dropzone"),this.dzs[c].children.length>0)){var u="";this.dzs[c].children.forEach(function(e){u+=e.fredEl.cleanRender().innerHTML}),d.innerHTML=u}}return t}},{key:"remove",value:function(){if(this.parent){var e=this.parent.dzs[this.dzName].children.indexOf(this.wrapper);e>-1&&this.parent.dzs[this.dzName].children.splice(e,1)}this.wrapper.remove()}},{key:"duplicateDropZones",value:function(t){var n=this,i=function(i){t.hasOwnProperty(i)&&t[i].children.forEach(function(t){if(n.dzs[i]){var r=new e(n.config,t.fredEl.el,i,n,t.fredEl.content,t.fredEl.settings);n.addElementToDropZone(i,r),r.duplicateDropZones(t.fredEl.dzs)}})};for(var r in t)i(r)}},{key:"duplicate",value:function(){var t=new e(this.config,this.el,this.dzName,this.parent,this.content,this.settings);if(t.duplicateDropZones(this.dzs),null===this.wrapper.nextSibling?this.wrapper.parentNode.appendChild(t.wrapper):this.wrapper.parentNode.insertBefore(t.wrapper,this.wrapper.nextSibling),this.parent){var n=this.parent.dzs[this.dzName].children.indexOf(this.wrapper);n>-1&&this.parent.dzs[this.dzName].children.splice(n+1,0,t.wrapper)}return l.default.reloadContainers(),!0}},{key:"openSettings",value:function(){p.default.emit("fred-element-settings-open",this)}},{key:"addElementToDropZone",value:function(e,t){return!!this.dzs[e]&&(this.dzs[e].children.push(t.wrapper),this.dzs[e].el.appendChild(t.wrapper),!0)}}]),e}();t.default=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(25),s=i(o),l=function(){function e(){r(this,e),this.fredWrapper=null,this.inited=!1}return a(e,[{key:"init",value:function(e){this.inited!==!0&&(this.fredWrapper=e,this.inited=!0)}},{key:"edit",value:function(e){var t=this,n=document.createElement("div"),i=document.createElement("input");i.setAttribute("type","text"),i.value=e.src||"";var r=[];if(e.dataset.fredAttrs){var a=e.dataset.fredAttrs.split(",");a.forEach(function(t){var n=document.createElement("input");n.dataset.name=t,n.setAttribute("type","text"),n.value=e.getAttribute(t||""),r.push(n)})}n.appendChild(this.labelWrapper(i,"src")),r.forEach(function(e){n.appendChild(t.labelWrapper(e,e.dataset.name))});var o=new s.default(this.fredWrapper,"Edit Image",n,function(){e.src=i.value,r.forEach(function(t){e.setAttribute(t.dataset.name,t.value)})});o.render()}},{key:"labelWrapper",value:function(e,t){var n=document.createElement("label");return n.innerText=t,n.appendChild(e),n}}]),e}(),c=new l;t.default=c,e.exports=t.default},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=t.Modal=function(){function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};n(this,e),this.fredWrapper=t,this.wrapper=null,this.title=i,this.content=r,this.onSave=a}return i(e,[{key:"setTitle",value:function(e){this.title=e,null!==this.wrapper&&(this.titleEl.innerHTML=e)}},{key:"setContent",value:function(e){this.content=e,null!==this.wrapper&&("string"==typeof this.content?this.body.innerHTML=this.content:(this.body.innerHTML="",this.body.appendChild(this.content)))}},{key:"render",value:function(){var e=this;this.wrapper=document.createElement("section"),this.wrapper.classList.add("fred--modal-bg");var t=document.createElement("div");t.classList.add("fred--modal"),t.setAttribute("aria-hidden","true");var n=document.createElement("div");n.classList.add("fred--modal-header");var i=document.createElement("button");i.classList.add("button"),i.innerHTML='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="-4 -4 20 20" enable-background="new -4 -4 20 20" xml:space="preserve"><polygon points="16.079,-0.666 12.717,-4.027 6.052,2.637 -0.613,-4.027 -3.975,-0.666 2.69,6 -3.975,12.664 -0.612,16.026 6.052,9.362 12.717,16.027 16.079,12.664 9.414,6 "></polygon></svg>',i.addEventListener("click",this.close.bind(this)),this.titleEl=document.createElement("h4"),this.titleEl.innerHTML=this.title,this.body=document.createElement("div"),this.body.classList.add("fred--modal-body"),"string"==typeof this.content?this.body.innerHTML=this.content:this.body.appendChild(this.content);var r=document.createElement("div");r.classList.add("fred--modal-footer");var a=document.createElement("button");return a.classList.add("fred--btn-small"),a.setAttribute("type","button"),a.innerHTML="Save",a.addEventListener("click",function(t){t.preventDefault(),e.onSave(),e.close()}),n.appendChild(i),n.appendChild(this.titleEl),r.appendChild(a),t.appendChild(n),t.appendChild(this.body),t.appendChild(r),this.wrapper.appendChild(t),this.fredWrapper.appendChild(this.wrapper),this.wrapper}},{key:"close",value:function(){this.wrapper.remove()}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(25),s=i(o),l=function(){function e(){r(this,e),this.fredWrapper=null,this.inited=!1}return a(e,[{key:"init",value:function(e){this.inited!==!0&&(this.fredWrapper=e,this.inited=!0)}},{key:"edit",value:function(e){var t=this,n=document.createElement("div"),i=document.createElement("input");i.setAttribute("type","text"),i.value=e.className||"";var r=[];if(e.dataset.fredAttrs){var a=e.dataset.fredAttrs.split(",");a.forEach(function(t){var n=document.createElement("input");n.dataset.name=t,n.setAttribute("type","text"),n.value=e.getAttribute(t||""),r.push(n)})}n.appendChild(this.labelWrapper(i,"class")),r.forEach(function(e){n.appendChild(t.labelWrapper(e,e.dataset.name))});var o=new s.default(this.fredWrapper,"Edit Icon",n,function(){e.className=i.value,r.forEach(function(t){e.setAttribute(t.dataset.name,t.value)})});o.render()}},{key:"labelWrapper",value:function(e,t){var n=document.createElement("label");return n.innerText=t,n.appendChild(e),n}}]),e}(),c=new l;t.default=c,e.exports=t.default},function(e,t,n){var i;!function(){"use strict";function r(e,t,n){return("string"==typeof t?t:t.toString()).replace(e.define||c,function(t,i,r,a){return 0===i.indexOf("def.")&&(i=i.substring(4)),i in n||(":"===r?(e.defineParams&&a.replace(e.defineParams,function(e,t,r){n[i]={arg:t,text:r}}),i in n||(n[i]=a)):new Function("def","def['"+i+"']="+a)(n)),""}).replace(e.use||c,function(t,i){e.useParams&&(i=i.replace(e.useParams,function(e,t,i,r){if(n[i]&&n[i].arg&&r){var a=(i+":"+r).replace(/'|\\/g,"_");return n.__exp=n.__exp||{},n.__exp[a]=n[i].text.replace(new RegExp("(^|[^\\w$])"+n[i].arg+"([^\\w$])","g"),"$1"+r+"$2"),t+"def.__exp['"+a+"']"}}));var a=new Function("def","return "+i)(n);return a?r(e,a,n):a})}function a(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var o,s={name:"doT",version:"1.1.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0,log:!0};s.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}},o=function(){return this||(0,eval)("this")}(),"undefined"!=typeof e&&e.exports?e.exports=s:(i=function(){return s}.call(t,n,t,e),!(void 0!==i&&(e.exports=i)));var l={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},c=/$^/;s.template=function(e,t,n){t=t||s.templateSettings;var i,d,u=t.append?l.append:l.split,f=0,h=t.use||t.define?r(t,e,n||{}):e;h=("var out='"+(t.strip?h.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):h).replace(/'|\\/g,"\\$&").replace(t.interpolate||c,function(e,t){return u.start+a(t)+u.end}).replace(t.encode||c,function(e,t){return i=!0,u.startencode+a(t)+u.end}).replace(t.conditional||c,function(e,t,n){return t?n?"';}else if("+a(n)+"){out+='":"';}else{out+='":n?"';if("+a(n)+"){out+='":"';}out+='"}).replace(t.iterate||c,function(e,t,n,i){return t?(f+=1,d=i||"i"+f,t=a(t),"';var arr"+f+"="+t+";if(arr"+f+"){var "+n+","+d+"=-1,l"+f+"=arr"+f+".length-1;while("+d+"<l"+f+"){"+n+"=arr"+f+"["+d+"+=1];out+='"):"';} } out+='"}).replace(t.evaluate||c,function(e,t){return"';"+a(t)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),i&&(t.selfcontained||!o||o._encodeHTML||(o._encodeHTML=s.encodeHTMLSource(t.doNotSkipEncoded)),h="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+s.encodeHTMLSource.toString()+"("+(t.doNotSkipEncoded||"")+"));"+h);try{return new Function(t.varname,h)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+h),e}},s.compile=function(e,t){return s.template(e,null,t)}}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(5),c=i(l),d=n(1),u=i(d),f=n(29),h=i(f),p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"init",value:function(){this.pageSettings=this.config.pageSettings,this.content=this.render()}},{key:"click",value:function(){return this.content}},{key:"render",value:function(){var e=document.createElement("form");e.classList.add("fred--page_settings_form"),e.appendChild(this.getGeneralFields()),e.appendChild(this.getAdvancedFields());var t=document.createElement("button");return t.setAttribute("type","button"),t.classList.add("fred--btn-sidebar","fred--settings_form_save"),t.innerText="Save",t.addEventListener("click",function(e){e.preventDefault(),u.default.emit("fred-save")}),e.appendChild(t),e}},{key:"getGeneralFields",value:function(){var e=document.createElement("fieldset");return e.appendChild(this.buildTextInput("pagetitle","Page Title")),e.appendChild(this.buildTextInput("longtitle","Long Title")),e.appendChild(this.buildTextAreaInput("description","Description")),e.appendChild(this.buildTextAreaInput("introtext","Intro Text")),e.appendChild(this.buildTextInput("menutitle","Menu Title")),e.appendChild(this.buildTextInput("alias","Alias")),e.appendChild(this.buildToggleInput("published","Published")),e.appendChild(this.buildToggleInput("hidemenu","Hide from Menu")),e}},{key:"getAdvancedFields",value:function(){var e=document.createElement("dl"),t=document.createElement("dt");t.setAttribute("role","tab"),t.setAttribute("tabindex","0"),t.innerHTML="Advanced Settings",t.addEventListener("click",function(e){e.preventDefault(),t.classList.toggle("active")});var n=document.createElement("dd"),i=document.createElement("fieldset");return i.classList.add("fred--page_settings_form_advanced"),i.appendChild(this.buildDateTimeInput("publishedon","Published On")),i.appendChild(this.buildDateTimeInput("publishon","Publish On")),i.appendChild(this.buildDateTimeInput("unpublishon","Unpublish On")),i.appendChild(this.buildTextInput("menuindex","Menu Index")),i.appendChild(this.buildToggleInput("deleted","Deleted")),n.appendChild(i),e.appendChild(t),e.appendChild(n),e}},{key:"buildTextInput",value:function(e,t){var n=this,i=document.createElement("label");i.innerHTML=t;var r=document.createElement("input");return r.type="text",r.value=this.pageSettings[e],r.addEventListener("keyup",function(t){n.pageSettings[e]=r.value,u.default.emit("fred-page-setting-change",e,r.value,r)}),u.default.on("fred-page-setting-change",function(t,i,a){r!==a&&e===t&&(n.pageSettings[t]=i,r.value=i)}),i.appendChild(r),i}},{key:"buildTextAreaInput",value:function(e,t){var n=this,i=document.createElement("label");i.innerHTML=t;var r=document.createElement("textarea");return r.innerHTML=this.pageSettings[e],r.addEventListener("keyup",function(t){n.pageSettings[e]=r.value,u.default.emit("fred-page-setting-change",e,r.value,r)}),u.default.on("fred-page-setting-change",function(t,i,a){r!==a&&e===t&&(n.pageSettings[t]=i,r.value=i)}),i.appendChild(r),i}},{key:"buildToggleInput",value:function(e,t){var n=this,i=document.createElement("label");i.classList.add("fred--page_settings_form_checkbox","fred--toggle"),i.innerHTML=t;var r=document.createElement("input");r.setAttribute("type","checkbox"),this.pageSettings[e]===!0&&r.setAttribute("checked","checked"),r.addEventListener("change",function(t){n.pageSettings[e]=t.target.checked});var a=document.createElement("span");return i.appendChild(r),i.appendChild(a),i}},{key:"buildDateTimeInput",value:function(e,t){var n=this,i=document.createElement("label");i.innerHTML=t;var r=document.createElement("div");r.classList.add("fred--input-group","fred--datetime");var a=document.createElement("input"),o=(0,h.default)(a,{enableTime:!0,dateFormat:"Y-m-d H:i",appendTo:r,defaultDate:0===this.pageSettings[e]?"":1e3*this.pageSettings[e],onChange:function(t){0===t.length?n.pageSettings[e]=0:n.pageSettings[e]=t[0].getTime()/1e3}}),s=document.createElement("a");return s.classList.add("fred--close-small"),s.setAttribute("title","Clear"),s.addEventListener("click",function(e){e.preventDefault(),o.clear()}),r.appendChild(a),r.appendChild(s),i.appendChild(r),i}}]),t}(c.default);p.title="Page Settings",p.expandable=!0,t.default=p,e.exports=t.default},function(e,t,n){/* flatpickr v4.4.3, @license MIT */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t,n){void 0===n&&(n=!1);var i;return function(){var r=this,a=arguments;null!==i&&clearTimeout(i),i=window.setTimeout(function(){i=null,n||e.apply(r,a)},t),n&&!i&&e.apply(r,a)}}function t(e,t,n){return void 0===n&&(n=!0),n!==!1?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}function n(e,t,n){return n===!0?e.classList.add(t):void e.classList.remove(t)}function i(e,t,n){var i=window.document.createElement(e);return t=t||"",n=n||"",i.className=t,void 0!==n&&(i.textContent=n),i}function r(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function a(e,t){return t(e)?e:e.parentNode?a(e.parentNode,t):void 0}function o(e,t){var n=i("div","numInputWrapper"),r=i("input","numInput "+e),a=i("span","arrowUp"),o=i("span","arrowDown");if(r.type="text",r.pattern="\\d*",void 0!==t)for(var s in t)r.setAttribute(s,t[s]);return n.appendChild(r),n.appendChild(a),n.appendChild(o),n}function s(s,l){function f(){Me.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=Me.currentMonth),void 0===t&&(t=Me.currentYear),1===e&&(t%4===0&&t%100!==0||t%400===0)?29:Me.l10n.daysInMonth[e]}}}function p(){if(Me.element=Me.input=s,Me.isOpen=!1,le(),ce(),be(),ye(),f(),Me.isMobile||F(),N(),(Me.selectedDates.length||Me.config.noCalendar)&&(Me.config.enableTime&&x(Me.config.noCalendar?Me.latestSelectedDateObj||Me.config.minDate:void 0),Le(!1)),Me.showTimeInput=Me.selectedDates.length>0||Me.config.noCalendar,void 0!==Me.daysContainer){Me.calendarContainer.style.visibility="hidden",Me.calendarContainer.style.display="block";var e=(Me.daysContainer.offsetWidth+1)*Me.config.showMonths;Me.daysContainer.style.width=e+"px",Me.calendarContainer.style.width=e+"px",void 0!==Me.weekWrapper&&(Me.calendarContainer.style.width=e+Me.weekWrapper.offsetWidth+"px"),Me.calendarContainer.style.visibility="visible",Me.calendarContainer.style.display=null}var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!Me.isMobile&&t&&de(),_e("onReady")}function v(e){return e.bind(Me)}function w(e){0!==Me.selectedDates.length&&(De(e),"input"!==e.type?(L(),Le()):setTimeout(function(){L(),Le()},T))}function C(e,t){return e%12+12*d(t===Me.l10n.amPM[1])}function k(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}function L(){if(void 0!==Me.hourElement&&void 0!==Me.minuteElement){var e=(parseInt(Me.hourElement.value.slice(-2),10)||0)%24,n=(parseInt(Me.minuteElement.value,10)||0)%60,i=void 0!==Me.secondElement?(parseInt(Me.secondElement.value,10)||0)%60:0;void 0!==Me.amPM&&(e=C(e,Me.amPM.textContent));var r=void 0!==Me.config.minTime||Me.config.minDate&&Me.minDateHasTime&&Me.latestSelectedDateObj&&0===t(Me.latestSelectedDateObj,Me.config.minDate,!0),a=void 0!==Me.config.maxTime||Me.config.maxDate&&Me.maxDateHasTime&&Me.latestSelectedDateObj&&0===t(Me.latestSelectedDateObj,Me.config.maxDate,!0);if(a){var o=void 0!==Me.config.maxTime?Me.config.maxTime:Me.config.maxDate;e=Math.min(e,o.getHours()),e===o.getHours()&&(n=Math.min(n,o.getMinutes())),n===o.getMinutes()&&(i=Math.min(i,o.getSeconds()))}if(r){var s=void 0!==Me.config.minTime?Me.config.minTime:Me.config.minDate;e=Math.max(e,s.getHours()),e===s.getHours()&&(n=Math.max(n,s.getMinutes())),n===s.getMinutes()&&(i=Math.max(i,s.getSeconds()))}D(e,n,i)}}function x(e){var t=e||Me.latestSelectedDateObj;t&&D(t.getHours(),t.getMinutes(),t.getSeconds())}function D(e,t,n){void 0!==Me.latestSelectedDateObj&&Me.latestSelectedDateObj.setHours(e%24,t,n||0,0),Me.hourElement&&Me.minuteElement&&!Me.isMobile&&(Me.hourElement.value=c(Me.config.time_24hr?e:(12+e)%12+12*d(e%12===0)),Me.minuteElement.value=c(t),void 0!==Me.amPM&&(Me.amPM.textContent=Me.l10n.amPM[d(e>=12)]),void 0!==Me.secondElement&&(Me.secondElement.value=c(n)))}function M(e){var t=parseInt(e.target.value)+(e.delta||0);4!==t.toString().length&&"Enter"!==e.key||(e.target.blur(),/[^\d]/.test(t.toString())||te(t))}function A(e,t,n,i){return t instanceof Array?t.forEach(function(t){return A(e,t,n,i)}):e instanceof Array?e.forEach(function(e){return A(e,t,n,i)}):(e.addEventListener(t,n,i),void Me._handlers.push({element:e,event:t,handler:n}))}function I(e){return function(t){1===t.which&&e(t)}}function O(){_e("onChange")}function N(){if(Me.config.wrap&&["open","close","toggle","clear"].forEach(function(e){Array.prototype.forEach.call(Me.element.querySelectorAll("[data-"+e+"]"),function(t){return A(t,"click",Me[e])})}),Me.isMobile)return void we();var t=e(ae,50);if(Me._debouncedChange=e(O,T),Me.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&A(Me.daysContainer,"mouseover",function(e){"range"===Me.config.mode&&re(e.target)}),A(window.document.body,"keydown",ie),Me.config.static||A(Me._input,"keydown",ie),Me.config.inline||Me.config.static||A(window,"resize",t),void 0!==window.ontouchstart&&A(window.document,"touchstart",ee),A(window.document,"mousedown",I(ee)),A(window.document,"focus",ee,{capture:!0}),Me.config.clickOpens===!0&&(A(Me._input,"focus",Me.open),A(Me._input,"mousedown",I(Me.open))),void 0!==Me.daysContainer&&(A(Me.monthNav,"mousedown",I(xe)),A(Me.monthNav,["keyup","increment"],M),A(Me.daysContainer,"mousedown",I(he))),void 0!==Me.timeContainer&&void 0!==Me.minuteElement&&void 0!==Me.hourElement){var n=function(e){return e.target.select()};A(Me.timeContainer,["input","increment"],w),A(Me.timeContainer,"mousedown",I(j)),A(Me.timeContainer,["input","increment"],Me._debouncedChange,{passive:!0}),A([Me.hourElement,Me.minuteElement],["focus","click"],n),void 0!==Me.secondElement&&A(Me.secondElement,"focus",function(){return Me.secondElement&&Me.secondElement.select()}),void 0!==Me.amPM&&A(Me.amPM,"mousedown",I(function(e){w(e),O()}))}}function P(e){var t=void 0!==e?Me.parseDate(e):Me.latestSelectedDateObj||(Me.config.minDate&&Me.config.minDate>Me.now?Me.config.minDate:Me.config.maxDate&&Me.config.maxDate<Me.now?Me.config.maxDate:Me.now);try{void 0!==t&&(Me.currentYear=t.getFullYear(),Me.currentMonth=t.getMonth())}catch(e){e.message="Invalid date supplied: "+t,Me.config.errorHandler(e)}Me.redraw()}function j(e){~e.target.className.indexOf("arrow")&&H(e,e.target.classList.contains("arrowUp")?1:-1)}function H(e,t,n){var i=e&&e.target,r=n||i&&i.parentNode&&i.parentNode.firstChild,a=Ce("increment");a.delta=t,r&&r.dispatchEvent(a)}function F(){var e=window.document.createDocumentFragment();if(Me.calendarContainer=i("div","flatpickr-calendar"),Me.calendarContainer.tabIndex=-1,!Me.config.noCalendar){if(e.appendChild(U()),Me.innerContainer=i("div","flatpickr-innerContainer"),Me.config.weekNumbers){var t=K(),r=t.weekWrapper,a=t.weekNumbers;Me.innerContainer.appendChild(r),Me.weekNumbers=a,Me.weekWrapper=r}Me.rContainer=i("div","flatpickr-rContainer"),Me.rContainer.appendChild(V()),Me.daysContainer||(Me.daysContainer=i("div","flatpickr-days"),Me.daysContainer.tabIndex=-1),Y(),Me.rContainer.appendChild(Me.daysContainer),Me.innerContainer.appendChild(Me.rContainer),e.appendChild(Me.innerContainer)}Me.config.enableTime&&e.appendChild(q()),n(Me.calendarContainer,"rangeMode","range"===Me.config.mode),n(Me.calendarContainer,"animate",Me.config.animate===!0),n(Me.calendarContainer,"multiMonth",Me.config.showMonths>1),Me.calendarContainer.appendChild(e);var o=void 0!==Me.config.appendTo&&void 0!==Me.config.appendTo.nodeType;if((Me.config.inline||Me.config.static)&&(Me.calendarContainer.classList.add(Me.config.inline?"inline":"static"),Me.config.inline&&(!o&&Me.element.parentNode?Me.element.parentNode.insertBefore(Me.calendarContainer,Me._input.nextSibling):void 0!==Me.config.appendTo&&Me.config.appendTo.appendChild(Me.calendarContainer)),Me.config.static)){var s=i("div","flatpickr-wrapper");Me.element.parentNode&&Me.element.parentNode.insertBefore(s,Me.element),s.appendChild(Me.element),Me.altInput&&s.appendChild(Me.altInput),s.appendChild(Me.calendarContainer)}Me.config.static||Me.config.inline||(void 0!==Me.config.appendTo?Me.config.appendTo:window.document.body).appendChild(Me.calendarContainer)}function B(e,r,a,o){var s=ne(r,!0),l=i("span","flatpickr-day "+e,r.getDate().toString());return l.dateObj=r,l.$i=o,l.setAttribute("aria-label",Me.formatDate(r,Me.config.ariaDateFormat)),0===t(r,Me.now)&&(Me.todayDateElem=l,l.classList.add("today")),s?(l.tabIndex=-1,Te(r)&&(l.classList.add("selected"),Me.selectedDateElem=l,"range"===Me.config.mode&&(n(l,"startRange",Me.selectedDates[0]&&0===t(r,Me.selectedDates[0],!0)),n(l,"endRange",Me.selectedDates[1]&&0===t(r,Me.selectedDates[1],!0)),"nextMonthDay"===e&&l.classList.add("inRange")))):l.classList.add("disabled"),"range"===Me.config.mode&&Se(r)&&!Te(r)&&l.classList.add("inRange"),Me.weekNumbers&&1===Me.config.showMonths&&"prevMonthDay"!==e&&a%7===1&&Me.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+Me.config.getWeek(r)+"</span>"),_e("onDayCreate",l),l}function z(e,t){var n=void 0!==e?e:document.activeElement.$i,i=(n||0)+t||0,r=Array.prototype.find.call(Me.days.children,function(e,t){return t>=i&&e.className.indexOf("MonthDay")===-1&&ne(e.dateObj)});void 0!==r&&(r.focus(),"range"===Me.config.mode&&re(r))}function R(e,t){for(var n=(new Date(e,t,1).getDay()-Me.l10n.firstDayOfWeek+7)%7,r=Me.utils.getDaysInMonth((t-1+12)%12),a=Me.utils.getDaysInMonth(t),o=window.document.createDocumentFragment(),s=r+1-n,l=0;s<=r;s++,l++)o.appendChild(B("prevMonthDay",new Date(e,t-1,s),s,l));for(s=1;s<=a;s++,l++)o.appendChild(B("",new Date(e,t,s),s,l));for(var c=a+1;c<=42-n&&(1===Me.config.showMonths||l%7!==0);c++,l++)o.appendChild(B("nextMonthDay",new Date(e,t+1,c%a),c,l));var d=i("div","dayContainer");return d.appendChild(o),d}function Y(){if(void 0!==Me.daysContainer){r(Me.daysContainer),Me.weekNumbers&&r(Me.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<Me.config.showMonths;t++){var n=new Date(Me.currentYear,Me.currentMonth,1);n.setMonth(Me.currentMonth+t),e.appendChild(R(n.getFullYear(),n.getMonth()))}Me.daysContainer.appendChild(e),Me.days=Me.daysContainer.firstChild}}function W(){var e=i("div","flatpickr-month"),t=window.document.createDocumentFragment(),n=i("span","cur-month");n.title=Me.l10n.scrollTitle;var r=o("cur-year",{tabindex:"-1"}),a=r.childNodes[0];a.title=Me.l10n.scrollTitle,a.setAttribute("aria-label",Me.l10n.yearAriaLabel),Me.config.minDate&&a.setAttribute("data-min",Me.config.minDate.getFullYear().toString()),Me.config.maxDate&&(a.setAttribute("data-max",Me.config.maxDate.getFullYear().toString()),a.disabled=!!Me.config.minDate&&Me.config.minDate.getFullYear()===Me.config.maxDate.getFullYear());var s=i("div","flatpickr-current-month");return s.appendChild(n),s.appendChild(r),t.appendChild(s),e.appendChild(t),{container:e,yearElement:a,monthElement:n}}function U(){Me.monthNav=i("div","flatpickr-months"),Me.yearElements=[],Me.monthElements=[],Me.prevMonthNav=i("span","flatpickr-prev-month"),Me.prevMonthNav.innerHTML=Me.config.prevArrow,Me.nextMonthNav=i("span","flatpickr-next-month"),Me.nextMonthNav.innerHTML=Me.config.nextArrow,Me.monthNav.appendChild(Me.prevMonthNav);for(var e=Me.config.showMonths;e--;){var t=W();Me.yearElements.push(t.yearElement),Me.monthElements.push(t.monthElement),Me.monthNav.appendChild(t.container)}return Me.monthNav.appendChild(Me.nextMonthNav),Object.defineProperty(Me,"_hidePrevMonthArrow",{get:function(){return Me.__hidePrevMonthArrow},set:function(e){Me.__hidePrevMonthArrow!==e&&(n(Me.prevMonthNav,"disabled",e),Me.__hidePrevMonthArrow=e)}}),Object.defineProperty(Me,"_hideNextMonthArrow",{get:function(){return Me.__hideNextMonthArrow},set:function(e){Me.__hideNextMonthArrow!==e&&(n(Me.nextMonthNav,"disabled",e),Me.__hideNextMonthArrow=e)}}),Me.currentYearElement=Me.yearElements[0],ke(),Me.monthNav}function q(){Me.calendarContainer.classList.add("hasTime"),Me.config.noCalendar&&Me.calendarContainer.classList.add("noCalendar"),Me.timeContainer=i("div","flatpickr-time"),Me.timeContainer.tabIndex=-1;var e=i("span","flatpickr-time-separator",":"),t=o("flatpickr-hour");Me.hourElement=t.childNodes[0];var n=o("flatpickr-minute");if(Me.minuteElement=n.childNodes[0],Me.hourElement.tabIndex=Me.minuteElement.tabIndex=-1,Me.hourElement.value=c(Me.latestSelectedDateObj?Me.latestSelectedDateObj.getHours():Me.config.time_24hr?Me.config.defaultHour:k(Me.config.defaultHour)),Me.minuteElement.value=c(Me.latestSelectedDateObj?Me.latestSelectedDateObj.getMinutes():Me.config.defaultMinute),Me.hourElement.setAttribute("data-step",Me.config.hourIncrement.toString()),Me.minuteElement.setAttribute("data-step",Me.config.minuteIncrement.toString()),Me.hourElement.setAttribute("data-min",Me.config.time_24hr?"0":"1"),Me.hourElement.setAttribute("data-max",Me.config.time_24hr?"23":"12"),Me.minuteElement.setAttribute("data-min","0"),Me.minuteElement.setAttribute("data-max","59"),Me.timeContainer.appendChild(t),Me.timeContainer.appendChild(e),Me.timeContainer.appendChild(n),Me.config.time_24hr&&Me.timeContainer.classList.add("time24hr"),Me.config.enableSeconds){Me.timeContainer.classList.add("hasSeconds");var r=o("flatpickr-second");Me.secondElement=r.childNodes[0],Me.secondElement.value=c(Me.latestSelectedDateObj?Me.latestSelectedDateObj.getSeconds():Me.config.defaultSeconds),Me.secondElement.setAttribute("data-step",Me.minuteElement.getAttribute("data-step")),Me.secondElement.setAttribute("data-min",Me.minuteElement.getAttribute("data-min")),Me.secondElement.setAttribute("data-max",Me.minuteElement.getAttribute("data-max")),Me.timeContainer.appendChild(i("span","flatpickr-time-separator",":")),Me.timeContainer.appendChild(r)}return Me.config.time_24hr||(Me.amPM=i("span","flatpickr-am-pm",Me.l10n.amPM[d((Me.latestSelectedDateObj?Me.hourElement.value:Me.config.defaultHour)>11)]),Me.amPM.title=Me.l10n.toggleTitle,Me.amPM.tabIndex=-1,Me.timeContainer.appendChild(Me.amPM)),Me.timeContainer}function V(){Me.weekdayContainer||(Me.weekdayContainer=i("div","flatpickr-weekdays"));for(var e=Me.config.showMonths;e--;){var t=i("div","flatpickr-weekdaycontainer");Me.weekdayContainer.appendChild(t)}return G(),Me.weekdayContainer}function G(){var e=Me.l10n.firstDayOfWeek,t=Me.l10n.weekdays.shorthand.concat();e>0&&e<t.length&&(t=t.splice(e,t.length).concat(t.splice(0,e)));for(var n=Me.config.showMonths;n--;)Me.weekdayContainer.children[n].innerHTML="\n      <span class=flatpickr-weekday>\n        "+t.join("</span><span class=flatpickr-weekday>")+"\n      </span>\n      "}function K(){Me.calendarContainer.classList.add("hasWeeks");var e=i("div","flatpickr-weekwrapper");e.appendChild(i("span","flatpickr-weekday",Me.l10n.weekAbbreviation));var t=i("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}function $(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1);var i=t?e:e-Me.currentMonth;i<0&&Me._hidePrevMonthArrow===!0||i>0&&Me._hideNextMonthArrow===!0||(Me.currentMonth+=i,(Me.currentMonth<0||Me.currentMonth>11)&&(Me.currentYear+=Me.currentMonth>11?1:-1,Me.currentMonth=(Me.currentMonth+12)%12,_e("onYearChange")),Y(),_e("onMonthChange"),ke(),n===!0&&z(void 0,0))}function J(e){void 0===e&&(e=!0),Me.input.value="",void 0!==Me.altInput&&(Me.altInput.value=""),void 0!==Me.mobileInput&&(Me.mobileInput.value=""),Me.selectedDates=[],Me.latestSelectedDateObj=void 0,Me.showTimeInput=!1,Me.config.enableTime===!0&&(void 0!==Me.config.minDate?x(Me.config.minDate):D(Me.config.defaultHour,Me.config.defaultMinute,Me.config.defaultSeconds)),Me.redraw(),e&&_e("onChange")}function X(){Me.isOpen=!1,Me.isMobile||(Me.calendarContainer.classList.remove("open"),Me._input.classList.remove("active")),_e("onClose")}function Z(){void 0!==Me.config&&_e("onDestroy");for(var e=Me._handlers.length;e--;){var t=Me._handlers[e];t.element.removeEventListener(t.event,t.handler)}Me._handlers=[],Me.mobileInput?(Me.mobileInput.parentNode&&Me.mobileInput.parentNode.removeChild(Me.mobileInput),Me.mobileInput=void 0):Me.calendarContainer&&Me.calendarContainer.parentNode&&Me.calendarContainer.parentNode.removeChild(Me.calendarContainer),Me.altInput&&(Me.input.type="text",Me.altInput.parentNode&&Me.altInput.parentNode.removeChild(Me.altInput),delete Me.altInput),Me.input&&(Me.input.type=Me.input._type,Me.input.classList.remove("flatpickr-input"),Me.input.removeAttribute("readonly"),Me.input.value=""),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(e){try{delete Me[e]}catch(e){}})}function Q(e){return!(!Me.config.appendTo||!Me.config.appendTo.contains(e))||Me.calendarContainer.contains(e)}function ee(e){if(Me.isOpen&&!Me.config.inline){var t=Q(e.target),n=e.target===Me.input||e.target===Me.altInput||Me.element.contains(e.target)||e.path&&e.path.indexOf&&(~e.path.indexOf(Me.input)||~e.path.indexOf(Me.altInput)),i="blur"===e.type?n&&e.relatedTarget&&!Q(e.relatedTarget):!n&&!t,r=!Me.config.ignoredFocusElements.some(function(t){return t.contains(e.target)});i&&r&&(Me.close(),"range"===Me.config.mode&&1===Me.selectedDates.length&&(Me.clear(!1),Me.redraw()))}}function te(e){if(!(!e||Me.config.minDate&&e<Me.config.minDate.getFullYear()||Me.config.maxDate&&e>Me.config.maxDate.getFullYear())){var t=e,n=Me.currentYear!==t;Me.currentYear=t||Me.currentYear,Me.config.maxDate&&Me.currentYear===Me.config.maxDate.getFullYear()?Me.currentMonth=Math.min(Me.config.maxDate.getMonth(),Me.currentMonth):Me.config.minDate&&Me.currentYear===Me.config.minDate.getFullYear()&&(Me.currentMonth=Math.max(Me.config.minDate.getMonth(),Me.currentMonth)),n&&(Me.redraw(),_e("onYearChange"))}}function ne(e,n){void 0===n&&(n=!0);var i=Me.parseDate(e,void 0,n);if(Me.config.minDate&&i&&t(i,Me.config.minDate,void 0!==n?n:!Me.minDateHasTime)<0||Me.config.maxDate&&i&&t(i,Me.config.maxDate,void 0!==n?n:!Me.maxDateHasTime)>0)return!1;if(0===Me.config.enable.length&&0===Me.config.disable.length)return!0;if(void 0===i)return!1;for(var r,a=Me.config.enable.length>0,o=a?Me.config.enable:Me.config.disable,s=0;s<o.length;s++){if(r=o[s],"function"==typeof r&&r(i))return a;if(r instanceof Date&&void 0!==i&&r.getTime()===i.getTime())return a;if("string"==typeof r&&void 0!==i){var l=Me.parseDate(r,void 0,!0);return l&&l.getTime()===i.getTime()?a:!a}if("object"==typeof r&&void 0!==i&&r.from&&r.to&&i.getTime()>=r.from.getTime()&&i.getTime()<=r.to.getTime())return a}return!a}function ie(e){var t=e.target===Me._input,n=Q(e.target),i=Me.config.allowInput,r=Me.isOpen&&(!i||!t),a=Me.config.inline&&t&&!i;if(13===e.keyCode&&t){if(i)return Me.setDate(Me._input.value,!0,e.target===Me.altInput?Me.config.altFormat:Me.config.dateFormat),e.target.blur();Me.open()}else if(n||r||a){var o=!!Me.timeContainer&&Me.timeContainer.contains(e.target);switch(e.keyCode){case 13:o?Le():he(e);break;case 27:e.preventDefault(),fe();break;case 8:case 46:t&&!Me.config.allowInput&&(e.preventDefault(),Me.clear());break;case 37:case 39:if(o)Me.hourElement&&Me.hourElement.focus();else if(e.preventDefault(),Me.daysContainer){var s=t?0:39===e.keyCode?1:-1;e.ctrlKey?$(s,!0,!0):z(void 0,s)}break;case 38:case 40:e.preventDefault();var l=40===e.keyCode?1:-1;Me.daysContainer&&void 0!==e.target.$i?e.ctrlKey?(te(Me.currentYear-l),z(e.target.$i,0)):o||z(e.target.$i,7*l):Me.config.enableTime&&(!o&&Me.hourElement&&Me.hourElement.focus(),w(e),Me._debouncedChange());break;case 9:e.target===Me.hourElement?(e.preventDefault(),Me.minuteElement.select()):e.target===Me.minuteElement&&(Me.secondElement||Me.amPM)?(e.preventDefault(),void 0!==Me.secondElement?Me.secondElement.focus():void 0!==Me.amPM&&Me.amPM.focus()):e.target===Me.secondElement&&Me.amPM&&(e.preventDefault(),Me.amPM.focus())}switch(e.key){case Me.l10n.amPM[0].charAt(0):case Me.l10n.amPM[0].charAt(0).toLowerCase():void 0!==Me.amPM&&e.target===Me.amPM&&(Me.amPM.textContent=Me.l10n.amPM[0],L(),Le());break;case Me.l10n.amPM[1].charAt(0):case Me.l10n.amPM[1].charAt(0).toLowerCase():void 0!==Me.amPM&&e.target===Me.amPM&&(Me.amPM.textContent=Me.l10n.amPM[1],L(),Le())}_e("onKeyDown",e)}}function re(e){if(1===Me.selectedDates.length&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")){for(var t=e.dateObj.getTime(),n=Me.parseDate(Me.selectedDates[0],void 0,!0).getTime(),i=Math.min(t,Me.selectedDates[0].getTime()),r=Math.max(t,Me.selectedDates[0].getTime()),a=Me.daysContainer.children,o=a[0].children[0].dateObj.getTime(),s=a[a.length-1].lastChild.dateObj.getTime(),l=!1,c=0,d=0,u=o;u<s;u+=_.DAY)ne(new Date(u),!0)||(l=l||u>i&&u<r,u<n&&(!c||u>c)?c=u:u>n&&(!d||u<d)&&(d=u));for(var f=0;f<Me.config.showMonths;f++)for(var h=Me.daysContainer.children[f],p=Me.daysContainer.children[f-1],m=function(i,r){var a=h.children[i],o=a.dateObj,s=o.getTime(),u=c>0&&s<c||d>0&&s>d;return u?(a.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){a.classList.remove(e)}),"continue"):l&&!u?"continue":(["startRange","inRange","endRange","notAllowed"].forEach(function(e){a.classList.remove(e)}),e.classList.add(t<Me.selectedDates[0].getTime()?"startRange":"endRange"),void(!h.contains(e)&&f>0&&p&&p.lastChild.dateObj.getTime()>=s||(n<t&&s===n?a.classList.add("startRange"):n>t&&s===n&&a.classList.add("endRange"),s>=c&&(0===d||s<=d)&&E(s,n,t)&&a.classList.add("inRange"))))},v=0,g=h.children.length;v<g;v++){m(v,g)}}}function ae(){!Me.isOpen||Me.config.static||Me.config.inline||de()}function oe(e,t){if(void 0===t&&(t=Me._input),Me.isMobile===!0)return e&&(e.preventDefault(),e.target&&e.target.blur()),setTimeout(function(){void 0!==Me.mobileInput&&Me.mobileInput.click()},0),void _e("onOpen");if(!Me._input.disabled&&!Me.config.inline){var n=Me.isOpen;Me.isOpen=!0,n||(Me.calendarContainer.classList.add("open"),Me._input.classList.add("active"),_e("onOpen"),de(t)),Me.config.enableTime===!0&&Me.config.noCalendar===!0&&(0===Me.selectedDates.length&&(Me.setDate(void 0!==Me.config.minDate?new Date(Me.config.minDate.getTime()):(new Date).setHours(Me.config.defaultHour,Me.config.defaultMinute,Me.config.defaultSeconds,0),!1),L(),Le()),setTimeout(function(){return Me.hourElement.select()},50))}}function se(e){return function(t){var n=Me.config["_"+e+"Date"]=Me.parseDate(t,Me.config.dateFormat),i=Me.config["_"+("min"===e?"max":"min")+"Date"];void 0!==n&&(Me["min"===e?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0),Me.selectedDates&&(Me.selectedDates=Me.selectedDates.filter(function(e){return ne(e)}),Me.selectedDates.length||"min"!==e||x(n),Le()),Me.daysContainer&&(ue(),void 0!==n?Me.currentYearElement[e]=n.getFullYear().toString():Me.currentYearElement.removeAttribute(e),Me.currentYearElement.disabled=!!i&&void 0!==n&&i.getFullYear()===n.getFullYear())}}function le(){var e=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],t=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],n=Object.assign({},l,JSON.parse(JSON.stringify(s.dataset||{}))),i={};Me.config.parseDate=n.parseDate,Me.config.formatDate=n.formatDate,Object.defineProperty(Me.config,"enable",{get:function(){return Me.config._enable},set:function(e){Me.config._enable=ge(e)}}),Object.defineProperty(Me.config,"disable",{get:function(){return Me.config._disable},set:function(e){Me.config._disable=ge(e)}}),!n.dateFormat&&n.enableTime&&(i.dateFormat=n.noCalendar?"H:i"+(n.enableSeconds?":S":""):S.defaultConfig.dateFormat+" H:i"+(n.enableSeconds?":S":"")),n.altInput&&n.enableTime&&!n.altFormat&&(i.altFormat=n.noCalendar?"h:i"+(n.enableSeconds?":S K":" K"):S.defaultConfig.altFormat+(" h:i"+(n.enableSeconds?":S":"")+" K")),Object.defineProperty(Me.config,"minDate",{get:function(){return Me.config._minDate},set:se("min")}),Object.defineProperty(Me.config,"maxDate",{get:function(){return Me.config._maxDate},set:se("max")});var r=function(e){return function(t){Me.config["min"===e?"_minTime":"_maxTime"]=Me.parseDate(t,"H:i")}};Object.defineProperty(Me.config,"minTime",{get:function(){return Me.config._minTime},set:r("min")}),Object.defineProperty(Me.config,"maxTime",{get:function(){return Me.config._maxTime},set:r("max")}),Object.assign(Me.config,i,n);for(var a=0;a<e.length;a++)Me.config[e[a]]=Me.config[e[a]]===!0||"true"===Me.config[e[a]];for(var o=t.length;o--;)void 0!==Me.config[t[o]]&&(Me.config[t[o]]=u(Me.config[t[o]]||[]).map(v));"time"===Me.config.mode&&(Me.config.noCalendar=!0,Me.config.enableTime=!0);for(var c=0;c<Me.config.plugins.length;c++){var d=Me.config.plugins[c](Me)||{};for(var f in d)~t.indexOf(f)?Me.config[f]=u(d[f]).map(v).concat(Me.config[f]):"undefined"==typeof n[f]&&(Me.config[f]=d[f])}Me.isMobile=!Me.config.disableMobile&&!Me.config.inline&&"single"===Me.config.mode&&!Me.config.disable.length&&!Me.config.enable.length&&!Me.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),_e("onParseConfig")}function ce(){"object"!=typeof Me.config.locale&&"undefined"==typeof S.l10ns[Me.config.locale]&&Me.config.errorHandler(new Error("flatpickr: invalid locale "+Me.config.locale)),Me.l10n=Object.assign({},S.l10ns.default,"object"==typeof Me.config.locale?Me.config.locale:"default"!==Me.config.locale?S.l10ns[Me.config.locale]:void 0),m.K="("+Me.l10n.amPM[0]+"|"+Me.l10n.amPM[1]+"|"+Me.l10n.amPM[0].toLowerCase()+"|"+Me.l10n.amPM[1].toLowerCase()+")",Me.formatDate=y(Me)}function de(e){if(void 0!==Me.calendarContainer){_e("onPreCalendarPosition");var t=e||Me._positionElement,i=Array.prototype.reduce.call(Me.calendarContainer.children,function(e,t){return e+t.offsetHeight},0),r=Me.calendarContainer.offsetWidth,a=Me.config.position,o=t.getBoundingClientRect(),s=window.innerHeight-o.bottom,l="above"===a||"below"!==a&&s<i&&o.top>i,c=window.pageYOffset+o.top+(l?-i-2:t.offsetHeight+2);if(n(Me.calendarContainer,"arrowTop",!l),n(Me.calendarContainer,"arrowBottom",l),!Me.config.inline){var d=window.pageXOffset+o.left,u=window.document.body.offsetWidth-o.right,f=d+r>window.document.body.offsetWidth;n(Me.calendarContainer,"rightMost",f),Me.config.static||(Me.calendarContainer.style.top=c+"px",f?(Me.calendarContainer.style.left="auto",Me.calendarContainer.style.right=u+"px"):(Me.calendarContainer.style.left=d+"px",Me.calendarContainer.style.right="auto"))}}}function ue(){Me.config.noCalendar||Me.isMobile||(G(),ke(),Y())}function fe(){Me._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||void 0!==navigator.msMaxTouchPoints?setTimeout(Me.close,0):Me.close()}function he(e){e.preventDefault(),e.stopPropagation();var n=function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")&&!e.classList.contains("notAllowed")},i=a(e.target,n);if(void 0!==i){var r=i,o=Me.latestSelectedDateObj=new Date(r.dateObj.getTime()),s=(o.getMonth()<Me.currentMonth||o.getMonth()>Me.currentMonth+Me.config.showMonths-1)&&"range"!==Me.config.mode;if(Me.selectedDateElem=r,"single"===Me.config.mode)Me.selectedDates=[o];else if("multiple"===Me.config.mode){var l=Te(o);l?Me.selectedDates.splice(parseInt(l),1):Me.selectedDates.push(o)}else"range"===Me.config.mode&&(2===Me.selectedDates.length&&Me.clear(!1),Me.selectedDates.push(o),0!==t(o,Me.selectedDates[0],!0)&&Me.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()}));if(L(),s){var c=Me.currentYear!==o.getFullYear();Me.currentYear=o.getFullYear(),Me.currentMonth=o.getMonth(),c&&_e("onYearChange"),_e("onMonthChange")}if(ke(),Y(),Me.config.minDate&&Me.minDateHasTime&&Me.config.enableTime&&0===t(o,Me.config.minDate)&&x(Me.config.minDate),Le(),Me.config.enableTime&&setTimeout(function(){return Me.showTimeInput=!0},50),"range"===Me.config.mode&&(1===Me.selectedDates.length?re(r):ke()),s||"range"===Me.config.mode||1!==Me.config.showMonths?Me.selectedDateElem&&Me.selectedDateElem.focus():z(r.$i,0),void 0!==Me.hourElement&&setTimeout(function(){return void 0!==Me.hourElement&&Me.hourElement.select()},451),Me.config.closeOnSelect){var d="single"===Me.config.mode&&!Me.config.enableTime,u="range"===Me.config.mode&&2===Me.selectedDates.length&&!Me.config.enableTime;(d||u)&&fe()}O()}}function pe(e,t){null!==e&&"object"==typeof e?Object.assign(Me.config,e):(Me.config[e]=t,void 0!==Ae[e]&&Ae[e].forEach(function(e){return e()})),Me.redraw(),P()}function me(e,t){var n=[];if(e instanceof Array)n=e.map(function(e){return Me.parseDate(e,t)});else if(e instanceof Date||"number"==typeof e)n=[Me.parseDate(e,t)];else if("string"==typeof e)switch(Me.config.mode){case"single":n=[Me.parseDate(e,t)];break;case"multiple":n=e.split(Me.config.conjunction).map(function(e){return Me.parseDate(e,t)});break;case"range":n=e.split(Me.l10n.rangeSeparator).map(function(e){return Me.parseDate(e,t)})}else Me.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));Me.selectedDates=n.filter(function(e){return e instanceof Date&&ne(e,!1)}),"range"===Me.config.mode&&Me.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()})}function ve(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=Me.config.dateFormat),0===e||e?(me(e,n),Me.showTimeInput=Me.selectedDates.length>0,Me.latestSelectedDateObj=Me.selectedDates[0],Me.redraw(),P(),x(),Le(t),void(t&&_e("onChange"))):Me.clear(t)}function ge(e){return e.map(function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?Me.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:Me.parseDate(e.from,void 0),to:Me.parseDate(e.to,void 0)}:e}).filter(function(e){return e})}function ye(){Me.selectedDates=[],Me.now=Me.parseDate(Me.config.now)||new Date;var e=Me.config.defaultDate||Me.input.value;e&&me(e,Me.config.dateFormat);var t=Me.selectedDates.length>0?Me.selectedDates[0]:Me.config.minDate&&Me.config.minDate.getTime()>Me.now.getTime()?Me.config.minDate:Me.config.maxDate&&Me.config.maxDate.getTime()<Me.now.getTime()?Me.config.maxDate:Me.now;Me.currentYear=t.getFullYear(),Me.currentMonth=t.getMonth(),Me.selectedDates.length>0&&(Me.latestSelectedDateObj=Me.selectedDates[0]),void 0!==Me.config.minTime&&(Me.config.minTime=Me.parseDate(Me.config.minTime,"H:i")),void 0!==Me.config.maxTime&&(Me.config.maxTime=Me.parseDate(Me.config.maxTime,"H:i")),Me.minDateHasTime=!!Me.config.minDate&&(Me.config.minDate.getHours()>0||Me.config.minDate.getMinutes()>0||Me.config.minDate.getSeconds()>0),Me.maxDateHasTime=!!Me.config.maxDate&&(Me.config.maxDate.getHours()>0||Me.config.maxDate.getMinutes()>0||Me.config.maxDate.getSeconds()>0),Object.defineProperty(Me,"showTimeInput",{get:function(){return Me._showTimeInput},set:function(e){Me._showTimeInput=e,Me.calendarContainer&&n(Me.calendarContainer,"showTimeInput",e),Me.isOpen&&de()}})}function be(){return Me.input=Me.config.wrap?s.querySelector("[data-input]"):s,Me.input?(Me.input._type=Me.input.type,Me.input.type="text",Me.input.classList.add("flatpickr-input"),Me._input=Me.input,Me.config.altInput&&(Me.altInput=i(Me.input.nodeName,Me.input.className+" "+Me.config.altInputClass),Me._input=Me.altInput,Me.altInput.placeholder=Me.input.placeholder,Me.altInput.disabled=Me.input.disabled,Me.altInput.required=Me.input.required,Me.altInput.tabIndex=Me.input.tabIndex,Me.altInput.type="text",Me.input.type="hidden",!Me.config.static&&Me.input.parentNode&&Me.input.parentNode.insertBefore(Me.altInput,Me.input.nextSibling)),Me.config.allowInput||Me._input.setAttribute("readonly","readonly"),void(Me._positionElement=Me.config.positionElement||Me._input)):void Me.config.errorHandler(new Error("Invalid input element specified"))}function we(){var e=Me.config.enableTime?Me.config.noCalendar?"time":"datetime-local":"date";Me.mobileInput=i("input",Me.input.className+" flatpickr-mobile"),Me.mobileInput.step=Me.input.getAttribute("step")||"any",
Me.mobileInput.tabIndex=1,Me.mobileInput.type=e,Me.mobileInput.disabled=Me.input.disabled,Me.mobileInput.required=Me.input.required,Me.mobileInput.placeholder=Me.input.placeholder,Me.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",Me.selectedDates.length>0&&(Me.mobileInput.defaultValue=Me.mobileInput.value=Me.formatDate(Me.selectedDates[0],Me.mobileFormatStr)),Me.config.minDate&&(Me.mobileInput.min=Me.formatDate(Me.config.minDate,"Y-m-d")),Me.config.maxDate&&(Me.mobileInput.max=Me.formatDate(Me.config.maxDate,"Y-m-d")),Me.input.type="hidden",void 0!==Me.altInput&&(Me.altInput.type="hidden");try{Me.input.parentNode&&Me.input.parentNode.insertBefore(Me.mobileInput,Me.input.nextSibling)}catch(e){}A(Me.mobileInput,"change",function(e){Me.setDate(e.target.value,!1,Me.mobileFormatStr),_e("onChange"),_e("onClose")})}function Ee(){return Me.isOpen?Me.close():void Me.open()}function _e(e,t){var n=Me.config[e];if(void 0!==n&&n.length>0)for(var i=0;n[i]&&i<n.length;i++)n[i](Me.selectedDates,Me.input.value,Me,t);"onChange"===e&&(Me.input.dispatchEvent(Ce("change")),Me.input.dispatchEvent(Ce("input")))}function Ce(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function Te(e){for(var n=0;n<Me.selectedDates.length;n++)if(0===t(Me.selectedDates[n],e))return""+n;return!1}function Se(e){return!("range"!==Me.config.mode||Me.selectedDates.length<2)&&(t(e,Me.selectedDates[0])>=0&&t(e,Me.selectedDates[1])<=0)}function ke(){Me.config.noCalendar||Me.isMobile||!Me.monthNav||(Me.yearElements.forEach(function(e,t){var n=new Date(Me.currentYear,Me.currentMonth,1);n.setMonth(Me.currentMonth+t),Me.monthElements[t].textContent=h(n.getMonth(),Me.config.shorthandCurrentMonth,Me.l10n)+" ",e.value=n.getFullYear().toString()}),Me._hidePrevMonthArrow=void 0!==Me.config.minDate&&(Me.currentYear===Me.config.minDate.getFullYear()?Me.currentMonth<=Me.config.minDate.getMonth():Me.currentYear<Me.config.minDate.getFullYear()),Me._hideNextMonthArrow=void 0!==Me.config.maxDate&&(Me.currentYear===Me.config.maxDate.getFullYear()?Me.currentMonth+1>Me.config.maxDate.getMonth():Me.currentYear>Me.config.maxDate.getFullYear()))}function Le(e){if(void 0===e&&(e=!0),0===Me.selectedDates.length)return Me.clear(e);void 0!==Me.mobileInput&&Me.mobileFormatStr&&(Me.mobileInput.value=void 0!==Me.latestSelectedDateObj?Me.formatDate(Me.latestSelectedDateObj,Me.mobileFormatStr):"");var t="range"!==Me.config.mode?Me.config.conjunction:Me.l10n.rangeSeparator;Me.input.value=Me.selectedDates.map(function(e){return Me.formatDate(e,Me.config.dateFormat)}).join(t),void 0!==Me.altInput&&(Me.altInput.value=Me.selectedDates.map(function(e){return Me.formatDate(e,Me.config.altFormat)}).join(t)),e!==!1&&_e("onValueUpdate")}function xe(e){var t=Me.prevMonthNav.contains(e.target),n=Me.nextMonthNav.contains(e.target);t||n?$(t?-1:1):Me.yearElements.indexOf(e.target)>=0?(e.preventDefault(),e.target.select()):e.target.classList.contains("arrowUp")?Me.changeYear(Me.currentYear+1):e.target.classList.contains("arrowDown")&&Me.changeYear(Me.currentYear-1)}function De(e){e.preventDefault();var t="keydown"===e.type,n=e.target;void 0!==Me.amPM&&e.target===Me.amPM&&(Me.amPM.textContent=Me.l10n.amPM[d(Me.amPM.textContent===Me.l10n.amPM[0])]);var i=parseFloat(n.getAttribute("data-min")),r=parseFloat(n.getAttribute("data-max")),a=parseFloat(n.getAttribute("data-step")),o=parseInt(n.value,10),s=e.delta||(t?38===e.which?1:-1:0),l=o+a*s;if("undefined"!=typeof n.value&&2===n.value.length){var u=n===Me.hourElement,f=n===Me.minuteElement;l<i?(l=r+l+d(!u)+(d(u)&&d(!Me.amPM)),f&&H(void 0,-1,Me.hourElement)):l>r&&(l=n===Me.hourElement?l-r-d(!Me.amPM):i,f&&H(void 0,1,Me.hourElement)),Me.amPM&&u&&(1===a?l+o===23:Math.abs(l-o)>a)&&(Me.amPM.textContent=Me.l10n.amPM[d(Me.amPM.textContent===Me.l10n.amPM[0])]),n.value=c(l)}}var Me={config:Object.assign({},S.defaultConfig),l10n:g};Me.parseDate=b({config:Me.config,l10n:Me.l10n}),Me._handlers=[],Me._bind=A,Me._setHoursFromDate=x,Me.changeMonth=$,Me.changeYear=te,Me.clear=J,Me.close=X,Me._createElement=i,Me.destroy=Z,Me.isEnabled=ne,Me.jumpToDate=P,Me.open=oe,Me.redraw=ue,Me.set=pe,Me.setDate=ve,Me.toggle=Ee;var Ae={locale:[ce]};return p(),Me}function l(e,t){for(var n=Array.prototype.slice.call(e),i=[],r=0;r<n.length;r++){var a=n[r];try{if(null!==a.getAttribute("data-fp-omit"))continue;void 0!==a._flatpickr&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=s(a,t||{}),i.push(a._flatpickr)}catch(e){console.error(e)}}return 1===i.length?i[0]:i}var c=function(e){return("0"+e).slice(-2)},d=function(e){return e===!0?1:0},u=function(e){return e instanceof Array?e:[e]},f=function(){},h=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},p={D:f,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours(parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*d(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t){var n=parseInt(t);return new Date(e.getFullYear(),0,2+7*(n-1),0,0,0,0)},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours(parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:f,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},w:f,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},m={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},v={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[v.w(e,t,n)]},F:function(e,t,n){return h(v.n(e,t,n)-1,!1,t)},G:function(e,t,n){return c(v.h(e,t,n))},H:function(e){return c(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[d(e.getHours()>11)]},M:function(e,t){return h(e.getMonth(),!0,t)},S:function(e){return c(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(e){return c(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return c(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return c(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},g={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year"},y=function(e){var t=e.config,n=void 0===t?C:t,i=e.l10n,r=void 0===i?g:i;return function(e,t,i){if(void 0!==n.formatDate)return n.formatDate(e,t);var a=i||r;return t.split("").map(function(t,i,r){return v[t]&&"\\"!==r[i-1]?v[t](e,a,n):"\\"!==t?t:""}).join("")}},b=function(e){var t=e.config,n=void 0===t?C:t,i=e.l10n,r=void 0===i?g:i;return function(e,t,i){if(0===e||e){var a,o=e;if(e instanceof Date)a=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)a=new Date(e);else if("string"==typeof e){var s=t||(n||C).dateFormat,l=String(e).trim();if("today"===l)a=new Date,i=!0;else if(/Z$/.test(l)||/GMT$/.test(l))a=new Date(e);else if(n&&n.parseDate)a=n.parseDate(e,s);else{a=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var c,d=[],u=0,f=0,h="";u<s.length;u++){var v=s[u],g="\\"===v,y="\\"===s[u-1]||g;if(m[v]&&!y){h+=m[v];var b=new RegExp(h).exec(e);b&&(c=!0)&&d["Y"!==v?"push":"unshift"]({fn:p[v],val:b[++f]})}else g||(h+=".");d.forEach(function(e){var t=e.fn,n=e.val;return a=t(a,n,r)||a})}a=c?a:void 0}}return a instanceof Date?(i===!0&&a.setHours(0,0,0,0),a):void n.errorHandler(new Error("Invalid date provided: "+o))}}},w=function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},E=function(e,t,n){return e>Math.min(t,n)&&e<Math.max(t,n)},_={DAY:864e5},C={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:console.warn,getWeek:w,hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};"function"!=typeof Object.assign&&(Object.assign=function(e){if(!e)throw TypeError("Cannot convert undefined or null to object");for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=function(t){t&&Object.keys(t).forEach(function(n){return e[n]=t[n]})},a=0;a<n.length;a++){var o=n[a];r(o)}return e});var T=300;"undefined"!=typeof HTMLElement&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return l(this,e)},HTMLElement.prototype.flatpickr=function(e){return l([this],e)});var S=function(e,t){return e instanceof NodeList?l(e,t):"string"==typeof e?l(window.document.querySelectorAll(e),t):l([e],t)};return S.defaultConfig=C,S.l10ns={en:Object.assign({},g),default:Object.assign({},g)},S.localize=function(e){S.l10ns.default=Object.assign({},S.l10ns.default,e)},S.setDefaults=function(e){S.defaultConfig=Object.assign({},S.defaultConfig,e)},S.parseDate=b({}),S.formatDate=y({}),S.compareDates=t,"undefined"!=typeof jQuery&&(jQuery.fn.flatpickr=function(e){return l(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},S})},function(e,t){var n=function(e,t){function n(){a=!0,i()}t=t||{};var i,r=t.timeout,a=!1,o=new Promise(function(e,t){i=e}),s=Promise.race([o,e]).then(function(e){if(a){var t=new Error("User cancelled promise.");return t.type="cancel",Promise.reject(t)}if(r){var t=new Error("Promise timeout");return t.type="timeout",Promise.reject(t)}return Promise.resolve(e)});return t.timeout&&setTimeout(function(){r=!0,i()},+t.timeout),{promise:s,cancel:n,abort:n}};e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom_left";r(this,e),this.position=t,this.render()}return a(e,[{key:"render",value:function(){var e=document.createElement("div");e.classList.add("fred--launcher","fred--launcher_"+this.position);var t=document.createElement("button");t.classList.add("fred--launcher_btn","fred--launcher_btn_fred"),t.setAttribute("role","button"),t.addEventListener("click",function(e){e.preventDefault(),s.default.emit("fred-sidebar-toggle")});var n=document.createElement("button");n.classList.add("fred--launcher_btn","fred--launcher_btn_save"),n.setAttribute("role","button"),n.addEventListener("click",function(e){e.preventDefault(),s.default.emit("fred-save")});var i=document.createElement("button");i.classList.add("fred--launcher_btn","fred--launcher_btn_undo"),i.setAttribute("role","button"),i.addEventListener("click",function(e){e.preventDefault(),s.default.emit("fred-undo")}),e.appendChild(t),e.appendChild(n),e.appendChild(i),s.default.emit("fred-wrapper-insert",e)}}]),e}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ElementSettings=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=t.ElementSettings=function(){function e(){r(this,e),this.el=null,this.settings={},this.originalValues={},this.wrapper=null,this.render(),s.default.on("fred-element-settings-open",this.openSettings.bind(this))}return a(e,[{key:"render",value:function(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("fred--panel","fred--panel_element","fred--hidden"),s.default.emit("fred-wrapper-insert",this.wrapper)}},{key:"openSettings",value:function(e){this.el=e,this.settings=e.options.settings,this.originalValues={},this.wrapper.innerHTML="",this.wrapper.appendChild(this.renderSettings()),this.open()}},{key:"renderSettings",value:function(){var e=this,t=document.createElement("form"),n=document.createElement("fieldset"),i=document.createElement("legend");i.innerHTML="Element Settings",n.appendChild(i),this.settings.forEach(function(t){if(t.group&&t.settings)n.appendChild(e.renderSettingsGroup(t));else{var i=e.el.settings[t.name]||t.value;e.originalValues[t.name]=i,n.appendChild(e.renderSetting(t,i))}});var r=document.createElement("button");r.classList.add("fred--btn-panel","fred--btn-apply"),r.innerHTML="Apply",r.addEventListener("click",function(t){t.preventDefault(),e.apply()});var a=document.createElement("button");return a.classList.add("fred--btn-panel"),a.innerHTML="Cancel",a.addEventListener("click",function(t){t.preventDefault(),e.cancel(a)}),n.appendChild(r),n.appendChild(a),t.appendChild(n),t}},{key:"renderSettingsGroup",value:function(e){var t=this,n=document.createElement("dl"),i=document.createElement("dt");i.setAttribute("role","tab"),i.setAttribute("tabindex","1"),i.innerHTML=e.group;var r=document.createElement("dd");return e.settings.forEach(function(e){var n=t.el.settings[e.name]||e.value;t.originalValues[e.name]=n,r.appendChild(t.renderSetting(e,n))}),n.appendChild(i),n.appendChild(r),n}},{key:"renderSetting",value:function(e,t){switch(e.type){case"select":return this.buildSelectInput(e,t);case"toggle":return this.buildToggleInput(e,t);default:return this.buildTextInput(e,t)}}},{key:"buildTextInput",value:function(e,t){var n=this,i=document.createElement("label");i.innerHTML=e.label||e.name;var r=document.createElement("input");return r.setAttribute("type","text"),r.value=t,r.addEventListener("keyup",function(t){n.setSetting(e.name,r.value)}),i.appendChild(r),i}},{key:"buildSelectInput",value:function(e,t){var n=this,i=document.createElement("label");i.innerHTML=e.label||e.name;var r=document.createElement("select");if(e.options)for(var a in e.options)if(e.options.hasOwnProperty(a)){var o=document.createElement("option");o.innerHTML=e.options[a],o.value=a,a===t&&o.setAttribute("selected","selected"),r.appendChild(o)}return r.addEventListener("change",function(t){e.options[r.value]&&n.setSetting(e.name,r.value)}),i.appendChild(r),i}},{key:"buildToggleInput",value:function(e,t){var n=this,i=document.createElement("label");i.classList.add("fred--toggle"),i.innerHTML=e.label||e.name;var r=document.createElement("input");r.setAttribute("type","checkbox"),t===!0&&r.setAttribute("checked","checked"),r.addEventListener("change",function(t){n.setSetting(e.name,t.target.checked)});var a=document.createElement("span");return i.appendChild(r),i.appendChild(a),i}},{key:"setSetting",value:function(e,t){this.el.settings[e]=t,this.el.reRender()}},{key:"apply",value:function(){this.el.reRender(),this.close()}},{key:"settingChanged",value:function(){for(var e in this.el.settings)if(this.el.settings.hasOwnProperty(e)&&(!this.originalValues[e]||this.originalValues[e]!==this.el.settings[e]))return!0;return!1}},{key:"cancel",value:function(e){return this.settingChanged()&&e.confirmed!==!0?(e.innerHTML="There are unsaved changes, are you sure?",void(e.confirmed=!0)):void this.realCancel()}},{key:"realCancel",value:function(){this.el.settings=this.originalValues,this.el.reRender(),this.close()}},{key:"open",value:function(){this.wrapper.classList.remove("fred--hidden")}},{key:"close",value:function(){this.wrapper.classList.add("fred--hidden")}}]),e}();t.default=l}])});