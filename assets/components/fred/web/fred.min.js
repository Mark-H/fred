!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Fred",[],t):"object"==typeof exports?exports.Fred=t():e.Fred=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),s=r(o),l=n(3),d=r(l),c=n(30),u=r(c),f=n(6),p=r(f),h=n(9),m=r(h),v=n(23),g=r(v),b=n(25),y=r(b),w=n(22),E=r(w),C=n(31),D=r(C),_=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.config=n||{},this.drake=null,this.loading=null,this.wrapper=null,this.config.pageSettings={},document.addEventListener("DOMContentLoaded",function(){t.init()})}return a(e,[{key:"render",value:function(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("fred"),this.wrapper.addEventListener("click",function(e){e.stopImmediatePropagation()}),document.body.appendChild(this.wrapper)}},{key:"renderComponents",value:function(){new u.default(this.config.launcherPosition||"bottom_left"),new d.default(this.config),new D.default}},{key:"getDataFromDropZone",value:function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=e.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.push(s.fredEl.getContent())}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return t}},{key:"getCleanDropZoneContent",value:function(e){var t="",n=!0,r=!1,i=void 0;try{for(var a,o=e.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t+=s.fredEl.cleanRender().innerHTML}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return t}},{key:"save",value:function(){s.default.emit("fred-loading","Saving Page");for(var e={},t={},n=0;n<this.dropzones.length;n++){t[this.dropzones[n].dataset.fredDropzone]=this.getDataFromDropZone(this.dropzones[n]);var r=this.dropzones[n].querySelectorAll('[data-fred-target]:not([data-fred-target=""])'),i=!0,a=!1,o=void 0;try{for(var l,d=r[Symbol.iterator]();!(i=(l=d.next()).done);i=!0){var c=l.value;this.config.pageSettings.hasOwnProperty(c.dataset.fredTarget)||(e[c.dataset.fredTarget]=c.innerHTML)}}catch(e){a=!0,o=e}finally{try{!i&&d.return&&d.return()}finally{if(a)throw o}}e[this.dropzones[n].dataset.fredDropzone]=this.getCleanDropZoneContent(this.dropzones[n])}e.id=this.config.resource.id,e.data=t,e.pageSettings=this.config.pageSettings,console.log("body: ",e),(0,p.default)(this.config.assetsUrl+"endpoints/ajax.php?action=save-content",{method:"post",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.url&&(location.href=e.url),s.default.emit("fred-loading-hide")})}},{key:"loadContent",value:function(){var e=this;return s.default.emit("fred-loading","Preparing Content"),(0,p.default)(this.config.assetsUrl+"endpoints/ajax.php?action=load-content&id="+this.config.resource.id,{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(t){var n=t.data.data;e.config.pageSettings=t.data.pageSettings||{};var r=function(r){if(n.hasOwnProperty(r)){var i=document.querySelector('[data-fred-dropzone="'+r+'"]');i&&(i.innerHTML="",n[r].forEach(function(n){var a=document.createElement("div");a.classList.add("chunk"),a.setAttribute("hidden","hidden"),a.dataset.fredElementId=n.widget,a.innerHTML=t.data.elements[n.widget].html,a.elementOptions=t.data.elements[n.widget].options;var o=new E.default(e.config,a,r,null,n.values,n.settings||{});e.loadChildren(n.children,o,t.data.elements),i.appendChild(o.wrapper)}))}};for(var i in n)r(i);m.default.reloadContainers(),s.default.emit("fred-loading-hide")})}},{key:"loadChildren",value:function(e,t,n){var r=this,i=function(i){e.hasOwnProperty(i)&&e[i].forEach(function(e){var a=document.createElement("div");a.classList.add("chunk"),a.setAttribute("hidden","hidden"),a.dataset.fredElementId=e.widget,a.innerHTML=n[e.widget].html,a.elementOptions=n[e.widget].options||{};var o=new E.default(r.config,a,i,t,e.values,e.settings||{});t.addElementToDropZone(i,o),r.loadChildren(e.children,o,n)})};for(var a in e)i(a)}},{key:"registerListeners",value:function(){var e=this;s.default.on("fred-save",function(){e.save()}),s.default.on("fred-wrapper-insert",function(t){e.wrapper.appendChild(t)}),s.default.on("fred-loading",function(t){null===e.loading&&(t=t||"",e.loading=document.createElement("section"),e.loading.classList.add("fred--modal-bg"),e.loading.innerHTML='<div class="fred--modal" aria-hidden="false"><div style="color:white;text-align:center;"><span class="fred--loading"></span> '+t+"</div></div>",e.wrapper.appendChild(e.loading))}),s.default.on("fred-loading-hide",function(){null!==e.loading&&(e.loading.remove(),e.loading=null)}),s.default.on("fred-undo",function(){console.log("Undo not yet implemented.")})}},{key:"init",value:function(){var e=this;console.log("Hello from Fred!"),this.registerListeners(),this.dropzones=document.querySelectorAll('[data-fred-dropzone]:not([data-fred-dropzone=""])');for(var t=[],n=0;n<this.dropzones.length;n++){if(t.indexOf(this.dropzones[n].dataset.fredDropzone)!=-1)return console.error("There are several dropzones with same name: "+this.dropzones[n].dataset.fredDropzone+". The name of each dropzone has to be unique."),!1;t.push(this.dropzones[n].dataset.fredDropzone)}this.render(),m.default.initDrake(this.config),g.default.init(this.wrapper),y.default.init(this.wrapper),this.loadContent().then(function(){e.renderComponents()})}}]),e}();t.default=_,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.emitter=void 0;var i=n(2),a=r(i),o=t.emitter=new a.default;t.default=o},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,l,d;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(a(n))for(s=Array.prototype.slice.call(arguments,1),d=n.slice(),i=d.length,l=0;l<i;l++)d[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,o,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),s=r(o),l=n(4),d=r(l),c=n(8),u=r(c),f=n(27),p=r(f),h=n(29),m=r(h),v=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.lastRequest=null,this.config=n||{},this.components=[],this.visible=!1,this.hideSidebar=this.hideSidebar.bind(this),this.globalHideSidebar=this.globalHideSidebar.bind(this),s.default.on("fred-sidebar-expand",function(e,n,r){e.loading(),t.components.forEach(function(e){e.hide()}),e.expand(),t.lastRequest=(0,m.default)(Promise.resolve(r)),t.lastRequest.promise.then(function(n){t.lastRequest=null,e.setContent(n),e.afterExpand()}).catch(function(n){t.lastRequest=null,"cancel"!==n.type&&e.setContent("SOMETHING WRONG HAPPENED")})}),s.default.on("fred-sidebar-collapse",function(e){null!==t.lastRequest&&(t.lastRequest.cancel(),t.lastRequest=null),t.components.forEach(function(e){e.collapse()})}),s.default.on("fred-sidebar-hide",function(e){t.hideSidebar(e)}),s.default.on("fred-sidebar-show",function(e){t.showSidebar(e)}),s.default.on("fred-sidebar-toggle",function(){t.wrapper.classList.contains("fred--hidden")?s.default.emit("fred-sidebar-show"):s.default.emit("fred-sidebar-hide")}),this.render()}return a(e,[{key:"render",value:function(){return this.wrapper=document.createElement("div"),this.wrapper.classList.add("fred--sidebar","fred--hidden"),this.wrapper.setAttribute("aria-hidden","true"),this.wrapper.appendChild(this.buildCloseButton()),this.wrapper.appendChild(this.buildSidebarHeader()),this.wrapper.appendChild(this.buildSidebar()),s.default.emit("fred-wrapper-insert",this.wrapper),this}},{key:"buildCloseButton",value:function(){var e=document.createElement("button");return e.classList.add("fred--sidebar_close"),e.setAttribute("role","button"),e.innerHTML='<i class="fred--angle-left"></i><i class="fred--angle-left"></i>',e.addEventListener("click",function(e){e.preventDefault(),s.default.emit("fred-sidebar-hide")}),e}},{key:"buildSidebarHeader",value:function(){var e=document.createElement("div");e.classList.add("fred--sidebar_title");var t=document.createElement("img");t.setAttribute("alt","MODX FRED"),t.classList.add("fred--logo"),t.src=(this.config.assetsUrl||"")+"images/modx-revo-icon-48.svg";var n=document.createElement("h1");return n.innerText="Fred",e.appendChild(t),e.appendChild(n),e}},{key:"buildSidebar",value:function(){return this.sidebar=document.createElement("dl"),this.sidebar.classList.add("fred--accordion"),this.sidebar.setAttribute("tabindex","0"),this.sidebar.setAttribute("role","tablist"),this.components.push(new d.default(this.sidebar,this.config)),this.components.push(new u.default(this.sidebar,this.config)),this.components.push(new p.default(this.sidebar,this.config)),this.sidebar}},{key:"hideSidebar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e===!1&&(this.visible=!1),this.wrapper.classList.add("fred--hidden"),window.removeEventListener("click",this.globalHideSidebar)}},{key:"showSidebar",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t===!0&&this.visible===!1||(this.visible=!0,this.wrapper.classList.remove("fred--hidden"),setTimeout(function(){window.addEventListener("click",e.globalHideSidebar)},50))}},{key:"globalHideSidebar",value:function(){this.hideSidebar(!1)}}]),e}();t.default=v,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(5),d=r(l),c=n(6),u=r(c),f=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"init",value:function(){this.content=null}},{key:"click",value:function(){var e=this;if(null!==this.content){var t=document.createElement("div");t.classList.add("fred--pages");var n=document.createElement("dl");return n.classList.add("fred--pages_list"),this.buildTree(this.content,n),t.appendChild(n),t}return(0,u.default)(this.config.assetsUrl+"endpoints/ajax.php?action=get-resources").then(function(e){return e.json()}).then(function(t){var n=document.createElement("div");n.classList.add("fred--pages");var r=document.createElement("dl");return r.classList.add("fred--pages_list"),e.content=t.data.resources,e.buildTree(t.data.resources,r),n.appendChild(r),n})}},{key:"buildTree",value:function(e,t){var n=this;e.forEach(function(e){var r=document.createElement("dt");if(r.setAttribute("role","tab"),r.setAttribute("tabindex","0"),r.innerHTML=e.pagetitle,e.published!==!0&&r.classList.add("fred--pages_unpublished"),e.deleted===!0&&r.classList.add("fred--pages_deleted"),e.hidemenu===!0&&r.classList.add("fred--pages_hidden"),t.append(r),e.isFred===!0){var i=document.createElement("dd");i.appendChild(n.createMenu(e)),t.append(i)}else r.classList.add("fred--pages_noedit");if(e.children.length>0){var a=document.createElement("dl");a.classList.add("fred--pages_list","fred--hidden"),a.setAttribute("aria-disabled","true"),n.buildTree(e.children,a);var o=document.createElement("button");o.classList.add("fred--btn-list","fred--btn-list_expand"),o.addEventListener("click",function(e){return e.preventDefault(),o.classList.contains("fred--btn-list_close")?(o.classList.remove("fred--btn-list_close"),a.classList.add("fred--hidden"),void a.setAttribute("aria-disabled","true")):(o.classList.add("fred--btn-list_close"),a.classList.remove("fred--hidden"),void a.setAttribute("aria-disabled","false"))}),r.insertBefore(o,r.firstChild),t.append(a)}})}},{key:"createMenu",value:function(e){var t=document.createElement("div");t.classList.add("fred--pages_menu");var n=document.createElement("h3");n.innerHTML=e.pagetitle;var r=document.createElement("button");r.innerHTML="Edit",r.addEventListener("click",function(t){t.preventDefault(),window.location.href=e.url});var i=document.createElement("button");i.innerHTML="Duplicate";var a=document.createElement("button");e.published===!0?a.innerHTML="Unpublish":a.innerHTML="Publish";var o=document.createElement("button");o.innerHTML="Create Child Page";var s=document.createElement("button");return e.deleted===!0?s.innerHTML="Undelete":s.innerHTML="Delete",t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(a),t.appendChild(o),t.appendChild(s),t}}]),t}(d.default);f.title="Pages",f.expandable=!0,t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),d=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.sidebarWrapper=t,this.config=r||{},this.titleEl=null,this.contentEl=null;var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.titleEl=document.createElement("dt"),n.titleEl.setAttribute("role","tab"),n.titleEl.setAttribute("tabindex","0"),n.titleEl.classList.add("fred--sidebar_"+n.constructor.title.toLowerCase().replace(/ /g,"_")),n.titleEl.innerHTML=e+(t===!0?'<i class="fred--angle-right fred--accordion_toggle"></i>':""),t===!1?n.titleEl.addEventListener("click",n.click):n.titleEl.addEventListener("click",function(){n.titleEl.classList.contains("active")?l.default.emit("fred-sidebar-collapse",n):l.default.emit("fred-sidebar-expand",n,e,n.click())}),n.contentEl=document.createElement("dd"),n.sidebarWrapper.appendChild(n.titleEl),n.sidebarWrapper.appendChild(n.contentEl)};this.init(),a(this.constructor.title,this.constructor.expandable)}return o(e,[{key:"init",value:function(){}},{key:"click",value:function(){}},{key:"expand",value:function(){this.titleEl.classList.add("active"),this.titleEl.classList.remove("fred--hidden")}},{key:"collapse",value:function(){this.titleEl.classList.remove("active"),this.titleEl.classList.remove("fred--hidden")}},{key:"hide",value:function(){this.titleEl.classList.remove("active"),this.titleEl.classList.add("fred--hidden")}},{key:"setContent",value:function(e){return"object"===("undefined"==typeof e?"undefined":a(e))&&void 0!==e.outerHTML?(this.contentEl.innerHTML="",void this.contentEl.appendChild(e)):void(this.contentEl.innerHTML=e)}},{key:"loading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e||"Retrieving "+this.constructor.title;var t=document.createElement("div");t.classList.add("fred--loading_wrapper"),t.innerHTML='<span class="fred--loading"></span> '+e,this.setContent(t)}},{key:"afterExpand",value:function(){}}]),e}();d.title="TITLE NOT SET",d.expandable=!1,t.default=d,e.exports=t.default},function(e,t,n){n(7),e.exports=self.fetch.bind(self)},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function a(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function o(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=o(t);return t.readAsArrayBuffer(e),n}function l(e){var t=new FileReader,n=o(t);return t.readAsText(e),n}function d(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(g.arrayBuffer&&g.blob&&y(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var e=a(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?a(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=a(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(d(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return E.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var n=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function m(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function v(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var g={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(g.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},g.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},u.call(p.prototype),u.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var C=[301,302,303,307,308];v.redirect=function(e,t){if(C.indexOf(t)===-1)throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=p,e.Response=v,e.fetch=function(e,t){return new Promise(function(n,r){var i=new p(e,t),a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:m(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;n(new v(t,e))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials&&(a.withCredentials=!0),"responseType"in a&&g.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(5),d=r(l),c=n(9),u=r(c),f=n(6),p=r(f),h=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"init",value:function(){this.content=null}},{key:"click",value:function(){var e=this;return null!==this.content?this.content:(0,p.default)(this.config.assetsUrl+"endpoints/ajax.php?action=get-elements").then(function(e){return e.json()}).then(function(n){var r=document.createElement("dl");return n.data.elements.forEach(function(e){var n=document.createElement("dt");n.setAttribute("role","tab"),n.setAttribute("tabindex","1"),n.innerHTML=e.category;var i=document.createElement("dd"),a=document.createElement("div");a.classList.add("fred--thumbs","source","blueprints-source"),e.elements.forEach(function(e){a.appendChild(t.elementWrapper(e.id,e.title,e.description,e.image,e.content,e.options||{}))}),i.appendChild(a),r.appendChild(n),r.appendChild(i)}),e.content=r,e.content})}},{key:"afterExpand",value:function(){u.default.reloadContainers()}}],[{key:"elementWrapper",value:function(e,t,n,r,i,a){var o=document.createElement("figure");o.classList.add("fred--thumb");var s=document.createElement("div"),l=document.createElement("img");l.src=r,l.alt=t,s.appendChild(l);var d=document.createElement("figcaption");d.innerHTML="<strong>"+t+"</strong><em>"+n+"</em>";var c=document.createElement("div");return c.classList.add("chunk"),c.dataset.fredElementId=e,c.setAttribute("hidden","hidden"),c.innerHTML=i,c.elementOptions=a,o.appendChild(s),o.appendChild(d),o.appendChild(c),o}}]),t}(d.default);h.title="Elements",h.expandable=!0,t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),d=n(10),c=r(d),u=n(22),f=r(u),p=function(){function e(){a(this,e),this.drake=null,this.topScroll=null,this.bottomScroll=null,this.scrollSpeed=null,this.lastPosition=null,this.scrollHandler=this.scrollHandler.bind(this)}return o(e,[{key:"initDrake",value:function(e){var t=this;this.config=e;var n=[].concat(i(document.querySelectorAll('[data-fred-dropzone]:not([data-fred-dropzone=""])')));n.unshift.apply(n,i(document.querySelectorAll(".source")));var r=function(e,t){return e.contains?e!=t&&e.contains(t):!!(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)};try{this.drake=(0,c.default)(n,{copy:function(e,t){return t.classList.contains("source")},accepts:function(e,t){return!r(e,t)!=!1&&!t.classList.contains("source")},moves:function(e,t,n,r){return void 0===t.dataset.fredDropzone||""===t.dataset.fredDropzone||n.classList.contains("handle")}})}catch(e){}this.drake.on("cloned",function(e,t,n){"copy"===n&&(e.lastChild.elementOptions=t.lastChild.elementOptions)}),this.drake.on("drop",function(e,n,r,i){if(r.classList.contains("blueprints-source")&&e.parentNode){var a=n.fredEl||null,o=new f.default(t.config,e.lastChild,n.dataset.fredDropzone,a);a&&(null===i?a.dzs[n.dataset.fredDropzone].children.push(o.wrapper):a.dzs[n.dataset.fredDropzone].children.splice(a.dzs[n.dataset.fredDropzone].children.indexOf(i),0,o.wrapper)),
e.parentNode.replaceChild(o.wrapper,e)}else if(n&&e.fredEl){e.fredEl.parent&&e.fredEl.parent.dzs[r.dataset.fredDropzone].children.splice(e.fredEl.parent.dzs[r.dataset.fredDropzone].children.indexOf(e),1);var s=n.fredEl||null;s&&(null===i?s.dzs[n.dataset.fredDropzone].children.push(e):s.dzs[n.dataset.fredDropzone].children.splice(s.dzs[n.dataset.fredDropzone].children.indexOf(i),0,e)),e.fredEl.parent=s,e.fredEl.dzName=n.dataset.fredDropzone}t.reloadContainers()}),this.drake.on("drag",function(e,n){t.registerScroller();var r=document.querySelectorAll("[data-fred-dropzone]"),i=!0,a=!1,o=void 0;try{for(var s,d=r[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var c=s.value;c.classList.add("fred--dropzone_highlight")}}catch(e){a=!0,o=e}finally{try{!i&&d.return&&d.return()}finally{if(a)throw o}}l.default.emit("fred-sidebar-hide",!0)}),this.drake.on("dragend",function(e){t.removeScroller();var n=document.querySelectorAll("[data-fred-dropzone]"),r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var d=o.value;d.classList.remove("fred--dropzone_highlight")}}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}l.default.emit("fred-sidebar-show",!0)})}},{key:"cancelScroll",value:function(e){this[e+"Scroll"]&&(clearInterval(this[e+"Scroll"]),this[e+"Scroll"]=null,this.scrollSpeed=null,this.lastPosition=null)}},{key:"scrollWindow",value:function(e,t,n){var r=this,i=!1,a=null;n.forEach(function(n){if("top"===t){var r=e.y>window.innerHeight-n.offset;i=i||r,r&&(a=n.speed)}else{var o=e.y<n.offset;i=i||o,o&&(a=-1*n.speed)}}),i?(this[t+"Scroll"]&&a!==this.scrollSpeed&&(clearInterval(this[t+"Scroll"]),this[t+"Scroll"]=null),null===this[t+"Scroll"]&&(this.lastPosition=window.innerHeight+window.scrollY,this[t+"Scroll"]=setInterval(function(){r.scrollSpeed=a,window.scrollBy(0,a);var e=window.innerHeight+window.scrollY;r.lastPosition===e&&r.cancelScroll(t),r.lastPosition=e},5))):this.cancelScroll(t)}},{key:"scrollHandler",value:function(e){this.scrollWindow(e,"top",[{offset:60,speed:2},{offset:30,speed:8}]),this.scrollWindow(e,"bottom",[{offset:60,speed:2},{offset:30,speed:8}])}},{key:"registerScroller",value:function(){this.topScroll=null,this.bottomScroll=null,this.scrollSpeed=null,this.lastPosition=null,document.addEventListener("mousemove",this.scrollHandler)}},{key:"removeScroller",value:function(){document.removeEventListener("mousemove",this.scrollHandler)}},{key:"reloadContainers",value:function(){for(var e=document.querySelectorAll('[data-fred-dropzone]:not([data-fred-dropzone=""])'),t=[].concat(i(e)),n=0;n<e.length;n++)t.push.apply(t,i(e[n].querySelectorAll('[data-fred-dropzone]:not([data-fred-dropzone=""])')));t.unshift.apply(t,i(document.querySelectorAll(".source"))),this.drake.containers=t}}]),e}(),h=new p;t.default=h,e.exports=t.default},function(e,t,n){(function(t){"use strict";function r(e,t){function n(e){return ce.containers.indexOf(e)!==-1||de.isContainer(e)}function r(e){var t=e?"remove":"add";i(D,t,"mousedown",T),i(D,t,"mouseup",P)}function s(e){var t=e?"remove":"add";i(D,t,"mousemove",M)}function m(e){var t=e?"remove":"add";w[t](D,"selectstart",_),w[t](D,"click",_)}function g(){r(!0),P({})}function _(e){se&&e.preventDefault()}function T(e){te=e.clientX,ne=e.clientY;var t=1!==a(e)||e.metaKey||e.ctrlKey;if(!t){var n=e.target,r=k(n);r&&(se=r,s(),"mousedown"===e.type&&(h(n)?n.focus():e.preventDefault()))}}function M(e){if(se){if(0===a(e))return void P({});if(void 0===e.clientX||e.clientX!==te||void 0===e.clientY||e.clientY!==ne){if(de.ignoreInputTextSelection){var t=b("clientX",e),n=b("clientY",e),r=C.elementFromPoint(t,n);if(h(r))return}var i=se;s(!0),m(),A(),S(i);var l=o(Z);Q=b("pageX",e)-l.left,ee=b("pageY",e)-l.top,E.add(ae||Z,"gu-transit"),W(),R(e)}}}function k(e){if(!(ce.dragging&&X||n(e))){for(var t=e;p(e)&&n(p(e))===!1;){if(de.invalid(e,t))return;if(e=p(e),!e)return}var r=p(e);if(r&&!de.invalid(e,t)){var i=de.moves(e,r,t,v(e));if(i)return{item:e,source:r}}}}function x(e){return!!k(e)}function L(e){var t=k(e);t&&S(t)}function S(e){V(e.item,e.source)&&(ae=e.item.cloneNode(!0),ce.emit("cloned",ae,e.item,"copy")),G=e.source,Z=e.item,re=ie=v(e.item),ce.dragging=!0,ce.emit("drag",Z,G)}function O(){return!1}function A(){if(ce.dragging){var e=ae||Z;I(e,p(e))}}function N(){se=!1,s(!0),m(!0)}function P(e){if(N(),ce.dragging){var t=ae||Z,n=b("clientX",e),r=b("clientY",e),i=l(X,n,r),a=Y(i,n,r);a&&(ae&&de.copySortSource||!ae||a!==G)?I(t,a):de.removeOnSpill?H():j()}}function I(e,t){var n=p(e);ae&&de.copySortSource&&t===G&&n.removeChild(Z),z(t)?ce.emit("cancel",e,G,G):ce.emit("drop",e,t,G,ie),F()}function H(){if(ce.dragging){var e=ae||Z,t=p(e);t&&t.removeChild(e),ce.emit(ae?"cancel":"remove",e,t,G),F()}}function j(e){if(ce.dragging){var t=arguments.length>0?e:de.revertOnSpill,n=ae||Z,r=p(n),i=z(r);i===!1&&t&&(ae?r&&r.removeChild(ae):G.insertBefore(n,re)),i||t?ce.emit("cancel",n,G,G):ce.emit("drop",n,r,G,ie),F()}}function F(){var e=ae||Z;N(),q(),e&&E.rm(e,"gu-transit"),oe&&clearTimeout(oe),ce.dragging=!1,le&&ce.emit("out",e,le,G),ce.emit("dragend",e),G=Z=ae=re=ie=oe=le=null}function z(e,t){var n;return n=void 0!==t?t:X?ie:v(ae||Z),e===G&&n===re}function Y(e,t,r){function i(){var i=n(a);if(i===!1)return!1;var o=$(a,e),s=J(a,o,t,r),l=z(a,s);return!!l||de.accepts(Z,a,G,s)}for(var a=e;a&&!i();)a=p(a);return a}function R(e){function t(e){ce.emit(e,d,le,G)}function n(){f&&t("over")}function r(){le&&t("out")}if(X){e.preventDefault();var i=b("clientX",e),a=b("clientY",e),o=i-Q,s=a-ee;X.style.left=o+"px",X.style.top=s+"px";var d=ae||Z,c=l(X,i,a),u=Y(c,i,a),f=null!==u&&u!==le;(f||null===u)&&(r(),le=u,n());var h=p(d);if(u===G&&ae&&!de.copySortSource)return void(h&&h.removeChild(d));var m,g=$(u,c);if(null!==g)m=J(u,g,i,a);else{if(de.revertOnSpill!==!0||ae)return void(ae&&h&&h.removeChild(d));m=re,u=G}(null===m&&f||m!==d&&m!==v(d))&&(ie=m,u.insertBefore(d,m),ce.emit("shadow",d,u,G))}}function B(e){E.rm(e,"gu-hide")}function U(e){ce.dragging&&E.add(e,"gu-hide")}function W(){if(!X){var e=Z.getBoundingClientRect();X=Z.cloneNode(!0),X.style.width=u(e)+"px",X.style.height=f(e)+"px",E.rm(X,"gu-transit"),E.add(X,"gu-mirror"),de.mirrorContainer.appendChild(X),i(D,"add","mousemove",R),E.add(de.mirrorContainer,"gu-unselectable"),ce.emit("cloned",X,Z,"mirror")}}function q(){X&&(E.rm(de.mirrorContainer,"gu-unselectable"),i(D,"remove","mousemove",R),p(X).removeChild(X),X=null)}function $(e,t){for(var n=t;n!==e&&p(n)!==e;)n=p(n);return n===D?null:n}function J(e,t,n,r){function i(){var t,i,a,o=e.children.length;for(t=0;t<o;t++){if(i=e.children[t],a=i.getBoundingClientRect(),s&&a.left+a.width/2>n)return i;if(!s&&a.top+a.height/2>r)return i}return null}function a(){var e=t.getBoundingClientRect();return o(s?n>e.left+u(e)/2:r>e.top+f(e)/2)}function o(e){return e?v(t):t}var s="horizontal"===de.direction,l=t!==e?a():i();return l}function V(e,t){return"boolean"==typeof de.copy?de.copy:de.copy(e,t)}var K=arguments.length;1===K&&Array.isArray(e)===!1&&(t=e,e=[]);var X,G,Z,Q,ee,te,ne,re,ie,ae,oe,se,le=null,de=t||{};void 0===de.moves&&(de.moves=c),void 0===de.accepts&&(de.accepts=c),void 0===de.invalid&&(de.invalid=O),void 0===de.containers&&(de.containers=e||[]),void 0===de.isContainer&&(de.isContainer=d),void 0===de.copy&&(de.copy=!1),void 0===de.copySortSource&&(de.copySortSource=!1),void 0===de.revertOnSpill&&(de.revertOnSpill=!1),void 0===de.removeOnSpill&&(de.removeOnSpill=!1),void 0===de.direction&&(de.direction="vertical"),void 0===de.ignoreInputTextSelection&&(de.ignoreInputTextSelection=!0),void 0===de.mirrorContainer&&(de.mirrorContainer=C.body);var ce=y({containers:de.containers,start:L,end:A,cancel:j,remove:H,destroy:g,canMove:x,dragging:!1});return de.removeOnSpill===!0&&ce.on("over",B).on("out",U),r(),ce}function i(e,n,r,i){var a={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},o={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},s={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};t.navigator.pointerEnabled?w[n](e,o[r],i):t.navigator.msPointerEnabled?w[n](e,s[r],i):(w[n](e,a[r],i),w[n](e,r,i))}function a(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function o(e){var t=e.getBoundingClientRect();return{left:t.left+s("scrollLeft","pageXOffset"),top:t.top+s("scrollTop","pageYOffset")}}function s(e,n){return"undefined"!=typeof t[n]?t[n]:D.clientHeight?D[e]:C.body[e]}function l(e,t,n){var r,i=e||{},a=i.className;return i.className+=" gu-hide",r=C.elementFromPoint(t,n),i.className=a,r}function d(){return!1}function c(){return!0}function u(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function p(e){return e.parentNode===C?null:e.parentNode}function h(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||m(e)}function m(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||m(p(e))))}function v(e){function t(){var t=e;do t=t.nextSibling;while(t&&1!==t.nodeType);return t}return e.nextElementSibling||t()}function g(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function b(e,t){var n=g(t),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in n)&&r[e]in n&&(e=r[e]),n[e]}var y=n(11),w=n(18),E=n(21),C=document,D=C.documentElement;e.exports=r}).call(t,function(){return this}())},function(e,t,n){"use strict";var r=n(12),i=n(13);e.exports=function(e,t){var n=t||{},a={};return void 0===e&&(e={}),e.on=function(t,n){return a[t]?a[t].push(n):a[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var r=arguments.length;if(1===r)delete a[t];else if(0===r)a={};else{var i=a[t];if(!i)return e;i.splice(i.indexOf(n),1)}return e},e.emit=function(){var t=r(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var o=(a[t]||[]).slice(0);return function(){var a=r(arguments),s=this||e;if("error"===t&&n.throws!==!1&&!o.length)throw 1===a.length?a[0]:a;return o.forEach(function(r){n.async?i(r,a,s):r.apply(s,a),r._once&&e.off(t,r)}),e}},e}},function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},function(e,t,n){"use strict";var r=n(14);e.exports=function(e,t,n){e&&r(function(){e.apply(n||null,t||[])})}},function(e,t,n){(function(t){var n,r="function"==typeof t;n=r?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=n}).call(t,n(15).setImmediate)},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(16),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,function(){return this}())},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return m[h]=r,p(h),h++}function i(e){delete m[e]}function a(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function o(e){if(v)setTimeout(o,0,e);else{var t=m[e];if(t){v=!0;try{a(t)}finally{i(e),v=!1}}}}function s(){p=function(e){t.nextTick(function(){o(e)})}}function l(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function d(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),p=function(n){e.postMessage(t+n,"*")}}function c(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;o(t)},p=function(t){e.port2.postMessage(t)}}function u(){var e=g.documentElement;p=function(t){var n=g.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function f(){p=function(e){setTimeout(o,0,e)}}if(!e.setImmediate){var p,h=1,m={},v=!1,g=e.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(e);b=b&&b.setTimeout?b:e,"[object process]"==={}.toString.call(e.process)?s():l()?d():e.MessageChannel?c():g&&"onreadystatechange"in g.createElement("script")?u():f(),b.setImmediate=r,b.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(17))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(e){if(u===clearTimeout)return clearTimeout(e);if((u===r||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function o(){m&&p&&(m=!1,p.length?h=p.concat(h):v=-1,h.length&&s())}function s(){if(!m){var e=i(o);m=!0;for(var t=h.length;t;){for(p=h,h=[];++v<t;)p&&p[v].run();v=-1,t=h.length}p=null,m=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function d(){}var c,u,f=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{u="function"==typeof clearTimeout?clearTimeout:r}catch(e){u=r}}();var p,h=[],m=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new l(e,t)),1!==h.length||m||i(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=d,f.addListener=d,f.once=d,f.off=d,f.removeListener=d,f.removeAllListeners=d,f.emit=d,f.prependListener=d,f.prependOnceListener=d,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){(function(t){"use strict";function r(e,t,n,r){return e.addEventListener(t,n,r)}function i(e,t,n){return e.attachEvent("on"+t,d(e,t,n))}function a(e,t,n,r){return e.removeEventListener(t,n,r)}function o(e,t,n){var r=c(e,t,n);if(r)return e.detachEvent("on"+t,r)}function s(e,t,n){function r(){var e;return h.createEvent?(e=h.createEvent("Event"),e.initEvent(t,!0,!0)):h.createEventObject&&(e=h.createEventObject()),e}function i(){return new f(t,{detail:n})}var a=p.indexOf(t)===-1?i():r();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}function l(e,n,r){return function(n){var i=n||t.event;i.target=i.target||i.srcElement,i.preventDefault=i.preventDefault||function(){i.returnValue=!1},i.stopPropagation=i.stopPropagation||function(){i.cancelBubble=!0},i.which=i.which||i.keyCode,r.call(e,i)}}function d(e,t,n){var r=c(e,t,n)||l(e,t,n);return g.push({wrapper:r,element:e,type:t,fn:n}),r}function c(e,t,n){var r=u(e,t,n);if(r){var i=g[r].wrapper;return g.splice(r,1),i}}function u(e,t,n){var r,i;for(r=0;r<g.length;r++)if(i=g[r],i.element===e&&i.type===t&&i.fn===n)return r}var f=n(19),p=n(20),h=t.document,m=r,v=a,g=[];t.addEventListener||(m=i,v=o),e.exports={add:m,remove:v,fabricate:s}}).call(t,function(){return this}())},function(e,t){(function(t){function n(){try{var e=new r("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}var r=t.CustomEvent;e.exports=n()?r:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,function(){return this}())},function(e,t){(function(t){"use strict";var n=[],r="",i=/^on/;for(r in t)i.test(r)&&n.push(r.slice(2));e.exports=n}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){var t=a[e];return t?t.lastIndex=0:a[e]=t=new RegExp(o+e+s,"g"),t}function r(e,t){var r=e.className;r.length?n(t).test(r)||(e.className+=" "+t):e.className=t}function i(e,t){e.className=e.className.replace(n(t)," ").trim()}var a={},o="(?:^|\\s)",s="(?:\\s|$)";e.exports={add:r,rm:i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ContentElement=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(9),l=r(s),d=n(23),c=r(d),u=n(25),f=r(u),p=n(1),h=r(p),m=n(26),v=r(m),g=t.ContentElement=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};i(this,e),this.config=t,this.el=n,this.template=v.default.template(this.el.innerHTML),this.id=parseInt(this.el.dataset.fredElementId),this.parent=o,this.dzName=r,this.options=JSON.parse(JSON.stringify(this.el.elementOptions||{})),this.content=JSON.parse(JSON.stringify(l)),this.settings={},this.options.settings&&this.options.settings.forEach(function(e){e.group&&e.settings?e.settings.forEach(function(e){s.settings[e.name]=e.value||""}):s.settings[e.name]=e.value||""}),this.settings=a({},this.settings,JSON.parse(JSON.stringify(d))),this.dzs={},this.inEditor=!1,this.wrapper=this.render()}return o(e,[{key:"getContent",value:function(){var e=this,t={widget:this.id,values:this.content,settings:this.settings,children:{}},n=function(n){e.dzs.hasOwnProperty(n)&&e.dzs[n].children.length>0&&(t.children[n]=[],e.dzs[n].children.forEach(function(e){t.children[n].push(e.fredEl.getContent())}))};for(var r in this.dzs)n(r);return t}},{key:"render",value:function(){var e=this,t=document.createElement("div");t.classList.add("fred--block"),t.fredEl=this,t.addEventListener("mouseover",function(e){e.stopPropagation();var t=!1;if(e.path)e.path.forEach(function(e){e.classList&&e.classList.contains("fred--block")&&(e.classList.add("fred--block-active"),t===!0&&e.classList.add("fred--block-active_parent"),t=!0)});else for(var n=e.target.parentNode;n;)n.classList&&n.classList.contains("fred--block")&&(n.classList.add("fred--block-active"),t===!0&&n.classList.add("fred--block-active_parent"),t=!0),n=n.parentNode}),t.addEventListener("mouseout",function(n){e.inEditor===!1&&(t.classList.remove("fred--block-active"),t.classList.remove("fred--block-active_parent"))});var n=document.createElement("div");n.classList.add("fred--toolbar","handle");var r=document.createElement("div");r.classList.add("fred--toolbar-grip"),n.appendChild(r);var i=document.createElement("button");i.classList.add("fred--duplicate-icon"),i.addEventListener("click",function(t){t.preventDefault(),e.duplicate()});var a=document.createElement("button");if(a.classList.add("fred--trash"),a.addEventListener("click",function(t){t.preventDefault(),e.remove()}),this.options.settings){var o=document.createElement("button");o.classList.add("fred--element-settings"),o.addEventListener("click",function(t){t.preventDefault(),e.openSettings()}),n.appendChild(o)}n.appendChild(i),n.appendChild(a),t.appendChild(n);var s=document.createElement("div");s.classList.add("fred--block_content"),s.dataset.fredElementId=this.el.dataset.fredElementId,s.innerHTML=this.template(this.settings);var l=s.querySelectorAll("[data-fred-dropzone]"),d=null,u=!0,p=!1,m=void 0;try{for(var v,g=function(){var t=v.value;null===d?(d=t,t.fredEl=e,e.dzs[t.dataset.fredDropzone]?(e.dzs[t.dataset.fredDropzone].el=t,e.dzs[t.dataset.fredDropzone].children.forEach(function(n){e.dzs[t.dataset.fredDropzone].el.appendChild(n)})):e.dzs[t.dataset.fredDropzone]={el:t,children:[]}):d.contains(t)||(t.fredEl=e,d=t,e.dzs[t.dataset.fredDropzone]?(e.dzs[t.dataset.fredDropzone].el=t,e.dzs[t.dataset.fredDropzone].children.forEach(function(n){e.dzs[t.dataset.fredDropzone].el.appendChild(n)})):e.dzs[t.dataset.fredDropzone]={el:t,children:[]})},b=l[Symbol.iterator]();!(u=(v=b.next()).done);u=!0)g()}catch(e){p=!0,m=e}finally{try{!u&&b.return&&b.return()}finally{if(p)throw m}}var y=s.querySelectorAll("[data-fred-name]"),w=!0,E=!1,C=void 0;try{for(var D,_=function(){var n=D.value,r=new MutationObserver(function(t){t.forEach(function(t){if("characterData"===t.type&&!n.rte)return e.content[n.dataset.fredName]||(e.content[n.dataset.fredName]={}),e.content[n.dataset.fredName]._raw||(e.content[n.dataset.fredName]._raw={}),e.content[n.dataset.fredName]._raw._value=n.innerHTML,void(n.dataset.fredTarget&&h.default.emit("fred-page-setting-change",n.dataset.fredTarget,e.content[n.dataset.fredName]._raw._value,n));if("attributes"===t.type){if("img"===n.nodeName.toLowerCase()&&"src"===t.attributeName)return e.content[n.dataset.fredName]||(e.content[n.dataset.fredName]={}),e.content[n.dataset.fredName]._raw||(e.content[n.dataset.fredName]._raw={}),e.content[n.dataset.fredName]._raw._value=n.getAttribute(t.attributeName),void(n.dataset.fredTarget&&h.default.emit("fred-page-setting-change",n.dataset.fredTarget,e.content[n.dataset.fredName]._raw._value,n));if("i"===n.nodeName.toLowerCase()&&"class"===t.attributeName)return e.content[n.dataset.fredName]||(e.content[n.dataset.fredName]={}),e.content[n.dataset.fredName]._raw||(e.content[n.dataset.fredName]._raw={}),e.content[n.dataset.fredName]._raw._value=n.className,void(n.dataset.fredTarget&&h.default.emit("fred-page-setting-change",n.dataset.fredTarget,e.content[n.dataset.fredName]._raw._value,n));if(n.dataset.fredAttrs){var r=n.dataset.fredAttrs.split(",");if(r.indexOf(t.attributeName)===-1)return;e.content[n.dataset.fredName]||(e.content[n.dataset.fredName]={}),e.content[n.dataset.fredName]._raw||(e.content[n.dataset.fredName]._raw={}),e.content[n.dataset.fredName]._raw[t.attributeName]=n.getAttribute(t.attributeName)}}})});if(r.observe(n,{attributes:!0,characterData:!0,subtree:!0}),"true"===n.dataset.fredRte&&tinymce.init({target:n,theme:"inlite",inline:!0,insert_toolbar:"quickimage quicktable",selection_toolbar:"bold italic | quicklink h2 h3 blockquote",auto_focus:!1,branding:!1,setup:function(r){n.rte=r,r.on("change",function(t){e.content[n.dataset.fredName]||(e.content[n.dataset.fredName]={}),e.content[n.dataset.fredName]._raw||(e.content[n.dataset.fredName]._raw={}),e.content[n.dataset.fredName]._raw._value=r.getContent(),n.dataset.fredTarget&&h.default.emit("fred-page-setting-change",n.dataset.fredTarget,e.content[n.dataset.fredName]._raw._value,n)}),r.on("focus",function(t){e.inEditor=!0}),r.on("blur",function(n){e.inEditor=!1,t.classList.remove("fred--block-active"),t.classList.remove("fred--block-active_parent")})}}),e.content[n.dataset.fredName]||(e.content[n.dataset.fredName]={}),e.content[n.dataset.fredName]._raw||(e.content[n.dataset.fredName]._raw={}),n.dataset.fredTarget&&(e.config.pageSettings[n.dataset.fredTarget]&&(e.content[n.dataset.fredName]._raw._value=e.config.pageSettings[n.dataset.fredTarget]),h.default.on("fred-page-setting-change",function(t,r,i){n!==i&&n.dataset.fredTarget===t&&e.setElValue(n,r)})),e.content[n.dataset.fredName]._raw._value){switch(n.nodeName.toLowerCase()){case"i":n.className=e.content[n.dataset.fredName]._raw._value,n.addEventListener("click",function(e){e.preventDefault(),f.default.edit(n)});break;case"img":n.setAttribute("src",e.content[n.dataset.fredName]._raw._value),n.addEventListener("click",function(e){e.preventDefault(),c.default.edit(n)});break;default:n.innerHTML=e.content[n.dataset.fredName]._raw._value}if(n.dataset.fredAttrs){var i=n.dataset.fredAttrs.split(",");i.forEach(function(t){e.content[n.dataset.fredName]._raw[t]&&n.setAttribute(t,e.content[n.dataset.fredName]._raw[t])})}}else{switch(n.nodeName.toLowerCase()){case"i":e.content[n.dataset.fredName]._raw._value=n.className,n.addEventListener("click",function(e){e.preventDefault(),f.default.edit(n)});break;case"img":e.content[n.dataset.fredName]._raw._value=n.getAttribute("src"),n.addEventListener("click",function(e){e.preventDefault(),c.default.edit(n)});break;default:e.content[n.dataset.fredName]._raw._value=n.innerHTML}if(n.dataset.fredAttrs){var a=n.dataset.fredAttrs.split(",");a.forEach(function(t){e.content[n.dataset.fredName]._raw[t]&&(e.content[n.dataset.fredName]._raw[t]=n.getAttribute(t))})}}},T=y[Symbol.iterator]();!(w=(D=T.next()).done);w=!0)_()}catch(e){E=!0,C=e}finally{try{!w&&T.return&&T.return()}finally{if(E)throw C}}return t.appendChild(s),t}},{key:"setElValue",value:function(e,t){switch(this.content[e.dataset.fredName]||(this.content[e.dataset.fredName]={}),this.content[e.dataset.fredName]._raw||(this.content[e.dataset.fredName]._raw={}),e.nodeName.toLowerCase()){case"i":this.content[e.dataset.fredName]._raw._value=t,e.className=t;break;case"img":this.content[e.dataset.fredName]._raw._value=t,e.setAttribute("src",t);break;default:this.content[e.dataset.fredName]._raw._value=t,e.innerHTML=t}}},{key:"reRender",value:function(){var e=this.render();this.wrapper.replaceWith(e),this.wrapper=e}},{key:"cleanRender",value:function(){var e=this,t=document.createElement("div");t.innerHTML=this.template(this.settings);var n=t.querySelectorAll("[data-fred-name]"),r=!0,i=!1,a=void 0;try{for(var o,s=function(){var t=o.value;if(e.content[t.dataset.fredName]&&e.content[t.dataset.fredName]._raw&&e.content[t.dataset.fredName]._raw._value){switch(t.nodeName.toLowerCase()){case"i":t.className=e.content[t.dataset.fredName]._raw._value;break;case"img":t.setAttribute("src",e.content[t.dataset.fredName]._raw._value);break;default:t.innerHTML=e.content[t.dataset.fredName]._raw._value}if(t.dataset.fredAttrs){var n=t.dataset.fredAttrs.split(",");n.forEach(function(n){e.content[t.dataset.fredName]._raw[n]&&t.setAttribute(n,e.content[t.dataset.fredName]._raw[n])})}}t.removeAttribute("contenteditable"),t.removeAttribute("data-fred-name"),t.removeAttribute("data-fred-rte"),t.removeAttribute("data-fred-target"),t.removeAttribute("data-fred-attrs")},l=n[Symbol.iterator]();!(r=(o=l.next()).done);r=!0)s()}catch(e){i=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw a}}for(var d in this.dzs)if(this.dzs.hasOwnProperty(d)){var c=t.querySelector('[data-fred-dropzone="'+d+'"]');if(c&&(c.removeAttribute("data-fred-dropzone"),this.dzs[d].children.length>0)){var u="";this.dzs[d].children.forEach(function(e){u+=e.fredEl.cleanRender().innerHTML}),c.innerHTML=u}}return t}},{key:"remove",value:function(){if(this.parent){var e=this.parent.dzs[this.dzName].children.indexOf(this.wrapper);e>-1&&this.parent.dzs[this.dzName].children.splice(e,1)}this.wrapper.remove()}},{key:"duplicateDropZones",value:function(t){var n=this,r=function(r){t.hasOwnProperty(r)&&t[r].children.forEach(function(t){if(n.dzs[r]){var i=new e(n.config,t.fredEl.el,r,n,t.fredEl.content,t.fredEl.settings);n.addElementToDropZone(r,i),i.duplicateDropZones(t.fredEl.dzs)}})};for(var i in t)r(i)}},{key:"duplicate",value:function(){var t=new e(this.config,this.el,this.dzName,this.parent,this.content,this.settings);if(t.duplicateDropZones(this.dzs),null===this.wrapper.nextSibling?this.wrapper.parentNode.appendChild(t.wrapper):this.wrapper.parentNode.insertBefore(t.wrapper,this.wrapper.nextSibling),this.parent){var n=this.parent.dzs[this.dzName].children.indexOf(this.wrapper);n>-1&&this.parent.dzs[this.dzName].children.splice(n+1,0,t.wrapper)}return l.default.reloadContainers(),!0}},{key:"openSettings",value:function(){h.default.emit("fred-element-settings-open",this)}},{key:"addElementToDropZone",value:function(e,t){return!!this.dzs[e]&&(this.dzs[e].children.push(t.wrapper),this.dzs[e].el.appendChild(t.wrapper),!0)}}]),e}();t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(24),s=r(o),l=function(){function e(){i(this,e),this.fredWrapper=null,this.inited=!1}return a(e,[{key:"init",value:function(e){this.inited!==!0&&(this.fredWrapper=e,this.inited=!0)}},{key:"edit",value:function(e){var t=this,n=document.createElement("div"),r=document.createElement("input");r.setAttribute("type","text"),r.value=e.src||"";var i=[];if(e.dataset.fredAttrs){var a=e.dataset.fredAttrs.split(",");a.forEach(function(t){var n=document.createElement("input");n.dataset.name=t,n.setAttribute("type","text"),n.value=e.getAttribute(t||""),i.push(n)})}n.appendChild(this.labelWrapper(r,"src")),i.forEach(function(e){n.appendChild(t.labelWrapper(e,e.dataset.name))});var o=new s.default(this.fredWrapper,"Edit Image",n,function(){e.src=r.value,i.forEach(function(t){e.setAttribute(t.dataset.name,t.value)})});o.render()}},{key:"labelWrapper",value:function(e,t){var n=document.createElement("label");return n.innerText=t,n.appendChild(e),n}}]),e}(),d=new l;t.default=d,e.exports=t.default},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=t.Modal=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};n(this,e),this.fredWrapper=t,this.wrapper=null,this.title=r,this.content=i,this.onSave=a}return r(e,[{key:"setTitle",value:function(e){this.title=e,null!==this.wrapper&&(this.titleEl.innerHTML=e)}},{key:"setContent",value:function(e){this.content=e,null!==this.wrapper&&("string"==typeof this.content?this.body.innerHTML=this.content:(this.body.innerHTML="",this.body.appendChild(this.content)))}},{key:"render",value:function(){var e=this;this.wrapper=document.createElement("section"),this.wrapper.classList.add("fred--modal-bg");var t=document.createElement("div");t.classList.add("fred--modal"),t.setAttribute("aria-hidden","true");var n=document.createElement("div");n.classList.add("fred--modal-header");
var r=document.createElement("button");r.classList.add("button"),r.innerHTML='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="-4 -4 20 20" enable-background="new -4 -4 20 20" xml:space="preserve"><polygon points="16.079,-0.666 12.717,-4.027 6.052,2.637 -0.613,-4.027 -3.975,-0.666 2.69,6 -3.975,12.664 -0.612,16.026 6.052,9.362 12.717,16.027 16.079,12.664 9.414,6 "></polygon></svg>',r.addEventListener("click",this.close.bind(this)),this.titleEl=document.createElement("h4"),this.titleEl.innerHTML=this.title,this.body=document.createElement("div"),this.body.classList.add("fred--modal-body"),"string"==typeof this.content?this.body.innerHTML=this.content:this.body.appendChild(this.content);var i=document.createElement("div");i.classList.add("fred--modal-footer");var a=document.createElement("button");return a.classList.add("fred--btn-small"),a.setAttribute("type","button"),a.innerHTML="Save",a.addEventListener("click",function(t){t.preventDefault(),e.onSave(),e.close()}),n.appendChild(r),n.appendChild(this.titleEl),i.appendChild(a),t.appendChild(n),t.appendChild(this.body),t.appendChild(i),this.wrapper.appendChild(t),this.fredWrapper.appendChild(this.wrapper),this.wrapper}},{key:"close",value:function(){this.wrapper.remove()}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(24),s=r(o),l=function(){function e(){i(this,e),this.fredWrapper=null,this.inited=!1}return a(e,[{key:"init",value:function(e){this.inited!==!0&&(this.fredWrapper=e,this.inited=!0)}},{key:"edit",value:function(e){var t=this,n=document.createElement("div"),r=document.createElement("input");r.setAttribute("type","text"),r.value=e.className||"";var i=[];if(e.dataset.fredAttrs){var a=e.dataset.fredAttrs.split(",");a.forEach(function(t){var n=document.createElement("input");n.dataset.name=t,n.setAttribute("type","text"),n.value=e.getAttribute(t||""),i.push(n)})}n.appendChild(this.labelWrapper(r,"class")),i.forEach(function(e){n.appendChild(t.labelWrapper(e,e.dataset.name))});var o=new s.default(this.fredWrapper,"Edit Icon",n,function(){e.className=r.value,i.forEach(function(t){e.setAttribute(t.dataset.name,t.value)})});o.render()}},{key:"labelWrapper",value:function(e,t){var n=document.createElement("label");return n.innerText=t,n.appendChild(e),n}}]),e}(),d=new l;t.default=d,e.exports=t.default},function(e,t,n){var r;!function(){"use strict";function i(e,t,n){return("string"==typeof t?t:t.toString()).replace(e.define||d,function(t,r,i,a){return 0===r.indexOf("def.")&&(r=r.substring(4)),r in n||(":"===i?(e.defineParams&&a.replace(e.defineParams,function(e,t,i){n[r]={arg:t,text:i}}),r in n||(n[r]=a)):new Function("def","def['"+r+"']="+a)(n)),""}).replace(e.use||d,function(t,r){e.useParams&&(r=r.replace(e.useParams,function(e,t,r,i){if(n[r]&&n[r].arg&&i){var a=(r+":"+i).replace(/'|\\/g,"_");return n.__exp=n.__exp||{},n.__exp[a]=n[r].text.replace(new RegExp("(^|[^\\w$])"+n[r].arg+"([^\\w$])","g"),"$1"+i+"$2"),t+"def.__exp['"+a+"']"}}));var a=new Function("def","return "+r)(n);return a?i(e,a,n):a})}function a(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var o,s={name:"doT",version:"1.1.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0,log:!0};s.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}},o=function(){return this||(0,eval)("this")}(),"undefined"!=typeof e&&e.exports?e.exports=s:(r=function(){return s}.call(t,n,t,e),!(void 0!==r&&(e.exports=r)));var l={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},d=/$^/;s.template=function(e,t,n){t=t||s.templateSettings;var r,c,u=t.append?l.append:l.split,f=0,p=t.use||t.define?i(t,e,n||{}):e;p=("var out='"+(t.strip?p.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):p).replace(/'|\\/g,"\\$&").replace(t.interpolate||d,function(e,t){return u.start+a(t)+u.end}).replace(t.encode||d,function(e,t){return r=!0,u.startencode+a(t)+u.end}).replace(t.conditional||d,function(e,t,n){return t?n?"';}else if("+a(n)+"){out+='":"';}else{out+='":n?"';if("+a(n)+"){out+='":"';}out+='"}).replace(t.iterate||d,function(e,t,n,r){return t?(f+=1,c=r||"i"+f,t=a(t),"';var arr"+f+"="+t+";if(arr"+f+"){var "+n+","+c+"=-1,l"+f+"=arr"+f+".length-1;while("+c+"<l"+f+"){"+n+"=arr"+f+"["+c+"+=1];out+='"):"';} } out+='"}).replace(t.evaluate||d,function(e,t){return"';"+a(t)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),r&&(t.selfcontained||!o||o._encodeHTML||(o._encodeHTML=s.encodeHTMLSource(t.doNotSkipEncoded)),p="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+s.encodeHTMLSource.toString()+"("+(t.doNotSkipEncoded||"")+"));"+p);try{return new Function(t.varname,p)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+p),e}},s.compile=function(e,t){return s.template(e,null,t)}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(5),d=r(l),c=n(1),u=r(c),f=n(28),p=r(f),h=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"init",value:function(){this.pageSettings=this.config.pageSettings,this.content=this.render()}},{key:"click",value:function(){return this.content}},{key:"render",value:function(){var e=document.createElement("form");e.classList.add("fred--page_settings_form"),e.appendChild(this.getGeneralFields()),e.appendChild(this.getAdvancedFields());var t=document.createElement("button");return t.setAttribute("type","button"),t.classList.add("fred--btn-sidebar","fred--settings_form_save"),t.innerText="Save",t.addEventListener("click",function(e){e.preventDefault(),u.default.emit("fred-save")}),e.appendChild(t),e}},{key:"getGeneralFields",value:function(){var e=document.createElement("fieldset");return e.appendChild(this.buildTextInput("pagetitle","Page Title")),e.appendChild(this.buildTextInput("longtitle","Long Title")),e.appendChild(this.buildTextAreaInput("description","Description")),e.appendChild(this.buildTextAreaInput("introtext","Intro Text")),e.appendChild(this.buildTextInput("menutitle","Menu Title")),e.appendChild(this.buildTextInput("alias","Alias")),e.appendChild(this.buildToggleInput("published","Published")),e.appendChild(this.buildToggleInput("hidemenu","Hide from Menu")),e}},{key:"getAdvancedFields",value:function(){var e=document.createElement("dl"),t=document.createElement("dt");t.setAttribute("role","tab"),t.setAttribute("tabindex","0"),t.innerHTML="Advanced Settings",t.addEventListener("click",function(e){e.preventDefault(),t.classList.toggle("active")});var n=document.createElement("dd"),r=document.createElement("fieldset");return r.classList.add("fred--page_settings_form_advanced"),r.appendChild(this.buildDateTimeInput("publishedon","Published On")),r.appendChild(this.buildDateTimeInput("publishon","Publish On")),r.appendChild(this.buildDateTimeInput("unpublishon","Unpublish On")),r.appendChild(this.buildToggleInput("deleted","Deleted")),n.appendChild(r),e.appendChild(t),e.appendChild(n),e}},{key:"buildTextInput",value:function(e,t){var n=this,r=document.createElement("label");r.innerHTML=t;var i=document.createElement("input");return i.type="text",i.value=this.pageSettings[e],i.addEventListener("keyup",function(t){n.pageSettings[e]=i.value,u.default.emit("fred-page-setting-change",e,i.value,i)}),u.default.on("fred-page-setting-change",function(t,r,a){i!==a&&e===t&&(n.pageSettings[t]=r,i.value=r)}),r.appendChild(i),r}},{key:"buildTextAreaInput",value:function(e,t){var n=this,r=document.createElement("label");r.innerHTML=t;var i=document.createElement("textarea");return i.innerHTML=this.pageSettings[e],i.addEventListener("keyup",function(t){n.pageSettings[e]=i.value,u.default.emit("fred-page-setting-change",e,i.value,i)}),u.default.on("fred-page-setting-change",function(t,r,a){i!==a&&e===t&&(n.pageSettings[t]=r,i.value=r)}),r.appendChild(i),r}},{key:"buildToggleInput",value:function(e,t){var n=this,r=document.createElement("label");r.classList.add("fred--page_settings_form_checkbox","fred--toggle"),r.innerHTML=t;var i=document.createElement("input");i.setAttribute("type","checkbox"),this.pageSettings[e]===!0&&i.setAttribute("checked","checked"),i.addEventListener("change",function(t){n.pageSettings[e]=t.target.checked});var a=document.createElement("span");return r.appendChild(i),r.appendChild(a),r}},{key:"buildDateTimeInput",value:function(e,t){var n=this,r=document.createElement("label");r.innerHTML=t;var i=document.createElement("div");i.classList.add("fred--input-group","fred--datetime");var a=document.createElement("input"),o=(0,p.default)(a,{enableTime:!0,dateFormat:"Y-m-d H:i",defaultDate:0===this.pageSettings[e]?"":1e3*this.pageSettings[e],onChange:function(t){0===t.length?n.pageSettings[e]=0:n.pageSettings[e]=t[0].getTime()/1e3}}),s=document.createElement("a");return s.classList.add("fred--close-small"),s.setAttribute("title","Clear"),s.addEventListener("click",function(e){e.preventDefault(),o.clear()}),i.appendChild(a),i.appendChild(s),r.appendChild(i),r}}]),t}(d.default);h.title="Page Settings",h.expandable=!0,t.default=h,e.exports=t.default},function(e,t,n){/* flatpickr v4.4.3, @license MIT */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t,n){void 0===n&&(n=!1);var r;return function(){var i=this,a=arguments;null!==r&&clearTimeout(r),r=window.setTimeout(function(){r=null,n||e.apply(i,a)},t),n&&!r&&e.apply(i,a)}}function t(e,t,n){return void 0===n&&(n=!0),n!==!1?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}function n(e,t,n){return n===!0?e.classList.add(t):void e.classList.remove(t)}function r(e,t,n){var r=window.document.createElement(e);return t=t||"",n=n||"",r.className=t,void 0!==n&&(r.textContent=n),r}function i(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function a(e,t){return t(e)?e:e.parentNode?a(e.parentNode,t):void 0}function o(e,t){var n=r("div","numInputWrapper"),i=r("input","numInput "+e),a=r("span","arrowUp"),o=r("span","arrowDown");if(i.type="text",i.pattern="\\d*",void 0!==t)for(var s in t)i.setAttribute(s,t[s]);return n.appendChild(i),n.appendChild(a),n.appendChild(o),n}function s(s,l){function f(){Se.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=Se.currentMonth),void 0===t&&(t=Se.currentYear),1===e&&(t%4===0&&t%100!==0||t%400===0)?29:Se.l10n.daysInMonth[e]}}}function h(){if(Se.element=Se.input=s,Se.isOpen=!1,le(),de(),ye(),be(),f(),Se.isMobile||F(),P(),(Se.selectedDates.length||Se.config.noCalendar)&&(Se.config.enableTime&&x(Se.config.noCalendar?Se.latestSelectedDateObj||Se.config.minDate:void 0),ke(!1)),Se.showTimeInput=Se.selectedDates.length>0||Se.config.noCalendar,void 0!==Se.daysContainer){Se.calendarContainer.style.visibility="hidden",Se.calendarContainer.style.display="block";var e=(Se.daysContainer.offsetWidth+1)*Se.config.showMonths;Se.daysContainer.style.width=e+"px",Se.calendarContainer.style.width=e+"px",void 0!==Se.weekWrapper&&(Se.calendarContainer.style.width=e+Se.weekWrapper.offsetWidth+"px"),Se.calendarContainer.style.visibility="visible",Se.calendarContainer.style.display=null}var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!Se.isMobile&&t&&ce(),Ce("onReady")}function v(e){return e.bind(Se)}function w(e){0!==Se.selectedDates.length&&(Le(e),"input"!==e.type?(k(),ke()):setTimeout(function(){k(),ke()},_))}function D(e,t){return e%12+12*c(t===Se.l10n.amPM[1])}function M(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}function k(){if(void 0!==Se.hourElement&&void 0!==Se.minuteElement){var e=(parseInt(Se.hourElement.value.slice(-2),10)||0)%24,n=(parseInt(Se.minuteElement.value,10)||0)%60,r=void 0!==Se.secondElement?(parseInt(Se.secondElement.value,10)||0)%60:0;void 0!==Se.amPM&&(e=D(e,Se.amPM.textContent));var i=void 0!==Se.config.minTime||Se.config.minDate&&Se.minDateHasTime&&Se.latestSelectedDateObj&&0===t(Se.latestSelectedDateObj,Se.config.minDate,!0),a=void 0!==Se.config.maxTime||Se.config.maxDate&&Se.maxDateHasTime&&Se.latestSelectedDateObj&&0===t(Se.latestSelectedDateObj,Se.config.maxDate,!0);if(a){var o=void 0!==Se.config.maxTime?Se.config.maxTime:Se.config.maxDate;e=Math.min(e,o.getHours()),e===o.getHours()&&(n=Math.min(n,o.getMinutes())),n===o.getMinutes()&&(r=Math.min(r,o.getSeconds()))}if(i){var s=void 0!==Se.config.minTime?Se.config.minTime:Se.config.minDate;e=Math.max(e,s.getHours()),e===s.getHours()&&(n=Math.max(n,s.getMinutes())),n===s.getMinutes()&&(r=Math.max(r,s.getSeconds()))}L(e,n,r)}}function x(e){var t=e||Se.latestSelectedDateObj;t&&L(t.getHours(),t.getMinutes(),t.getSeconds())}function L(e,t,n){void 0!==Se.latestSelectedDateObj&&Se.latestSelectedDateObj.setHours(e%24,t,n||0,0),Se.hourElement&&Se.minuteElement&&!Se.isMobile&&(Se.hourElement.value=d(Se.config.time_24hr?e:(12+e)%12+12*c(e%12===0)),Se.minuteElement.value=d(t),void 0!==Se.amPM&&(Se.amPM.textContent=Se.l10n.amPM[c(e>=12)]),void 0!==Se.secondElement&&(Se.secondElement.value=d(n)))}function S(e){var t=parseInt(e.target.value)+(e.delta||0);4!==t.toString().length&&"Enter"!==e.key||(e.target.blur(),/[^\d]/.test(t.toString())||te(t))}function O(e,t,n,r){return t instanceof Array?t.forEach(function(t){return O(e,t,n,r)}):e instanceof Array?e.forEach(function(e){return O(e,t,n,r)}):(e.addEventListener(t,n,r),void Se._handlers.push({element:e,event:t,handler:n}))}function A(e){return function(t){1===t.which&&e(t)}}function N(){Ce("onChange")}function P(){if(Se.config.wrap&&["open","close","toggle","clear"].forEach(function(e){Array.prototype.forEach.call(Se.element.querySelectorAll("[data-"+e+"]"),function(t){return O(t,"click",Se[e])})}),Se.isMobile)return void we();var t=e(ae,50);if(Se._debouncedChange=e(N,_),Se.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&O(Se.daysContainer,"mouseover",function(e){"range"===Se.config.mode&&ie(e.target)}),O(window.document.body,"keydown",re),Se.config.static||O(Se._input,"keydown",re),Se.config.inline||Se.config.static||O(window,"resize",t),void 0!==window.ontouchstart&&O(window.document,"touchstart",ee),O(window.document,"mousedown",A(ee)),O(window.document,"focus",ee,{capture:!0}),Se.config.clickOpens===!0&&(O(Se._input,"focus",Se.open),O(Se._input,"mousedown",A(Se.open))),void 0!==Se.daysContainer&&(O(Se.monthNav,"mousedown",A(xe)),O(Se.monthNav,["keyup","increment"],S),O(Se.daysContainer,"mousedown",A(pe))),void 0!==Se.timeContainer&&void 0!==Se.minuteElement&&void 0!==Se.hourElement){var n=function(e){return e.target.select()};O(Se.timeContainer,["input","increment"],w),O(Se.timeContainer,"mousedown",A(H)),O(Se.timeContainer,["input","increment"],Se._debouncedChange,{passive:!0}),O([Se.hourElement,Se.minuteElement],["focus","click"],n),void 0!==Se.secondElement&&O(Se.secondElement,"focus",function(){return Se.secondElement&&Se.secondElement.select()}),void 0!==Se.amPM&&O(Se.amPM,"mousedown",A(function(e){w(e),N()}))}}function I(e){var t=void 0!==e?Se.parseDate(e):Se.latestSelectedDateObj||(Se.config.minDate&&Se.config.minDate>Se.now?Se.config.minDate:Se.config.maxDate&&Se.config.maxDate<Se.now?Se.config.maxDate:Se.now);try{void 0!==t&&(Se.currentYear=t.getFullYear(),Se.currentMonth=t.getMonth())}catch(e){e.message="Invalid date supplied: "+t,Se.config.errorHandler(e)}Se.redraw()}function H(e){~e.target.className.indexOf("arrow")&&j(e,e.target.classList.contains("arrowUp")?1:-1)}function j(e,t,n){var r=e&&e.target,i=n||r&&r.parentNode&&r.parentNode.firstChild,a=De("increment");a.delta=t,i&&i.dispatchEvent(a)}function F(){var e=window.document.createDocumentFragment();if(Se.calendarContainer=r("div","flatpickr-calendar"),Se.calendarContainer.tabIndex=-1,!Se.config.noCalendar){if(e.appendChild(W()),Se.innerContainer=r("div","flatpickr-innerContainer"),Se.config.weekNumbers){var t=V(),i=t.weekWrapper,a=t.weekNumbers;Se.innerContainer.appendChild(i),Se.weekNumbers=a,Se.weekWrapper=i}Se.rContainer=r("div","flatpickr-rContainer"),Se.rContainer.appendChild($()),Se.daysContainer||(Se.daysContainer=r("div","flatpickr-days"),Se.daysContainer.tabIndex=-1),B(),Se.rContainer.appendChild(Se.daysContainer),Se.innerContainer.appendChild(Se.rContainer),e.appendChild(Se.innerContainer)}Se.config.enableTime&&e.appendChild(q()),n(Se.calendarContainer,"rangeMode","range"===Se.config.mode),n(Se.calendarContainer,"animate",Se.config.animate===!0),n(Se.calendarContainer,"multiMonth",Se.config.showMonths>1),Se.calendarContainer.appendChild(e);var o=void 0!==Se.config.appendTo&&void 0!==Se.config.appendTo.nodeType;if((Se.config.inline||Se.config.static)&&(Se.calendarContainer.classList.add(Se.config.inline?"inline":"static"),Se.config.inline&&(!o&&Se.element.parentNode?Se.element.parentNode.insertBefore(Se.calendarContainer,Se._input.nextSibling):void 0!==Se.config.appendTo&&Se.config.appendTo.appendChild(Se.calendarContainer)),Se.config.static)){var s=r("div","flatpickr-wrapper");Se.element.parentNode&&Se.element.parentNode.insertBefore(s,Se.element),s.appendChild(Se.element),Se.altInput&&s.appendChild(Se.altInput),s.appendChild(Se.calendarContainer)}Se.config.static||Se.config.inline||(void 0!==Se.config.appendTo?Se.config.appendTo:window.document.body).appendChild(Se.calendarContainer)}function z(e,i,a,o){var s=ne(i,!0),l=r("span","flatpickr-day "+e,i.getDate().toString());return l.dateObj=i,l.$i=o,l.setAttribute("aria-label",Se.formatDate(i,Se.config.ariaDateFormat)),0===t(i,Se.now)&&(Se.todayDateElem=l,l.classList.add("today")),s?(l.tabIndex=-1,_e(i)&&(l.classList.add("selected"),Se.selectedDateElem=l,"range"===Se.config.mode&&(n(l,"startRange",Se.selectedDates[0]&&0===t(i,Se.selectedDates[0],!0)),n(l,"endRange",Se.selectedDates[1]&&0===t(i,Se.selectedDates[1],!0)),"nextMonthDay"===e&&l.classList.add("inRange")))):l.classList.add("disabled"),"range"===Se.config.mode&&Te(i)&&!_e(i)&&l.classList.add("inRange"),Se.weekNumbers&&1===Se.config.showMonths&&"prevMonthDay"!==e&&a%7===1&&Se.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+Se.config.getWeek(i)+"</span>"),Ce("onDayCreate",l),l}function Y(e,t){var n=void 0!==e?e:document.activeElement.$i,r=(n||0)+t||0,i=Array.prototype.find.call(Se.days.children,function(e,t){return t>=r&&e.className.indexOf("MonthDay")===-1&&ne(e.dateObj)});void 0!==i&&(i.focus(),"range"===Se.config.mode&&ie(i))}function R(e,t){for(var n=(new Date(e,t,1).getDay()-Se.l10n.firstDayOfWeek+7)%7,i=Se.utils.getDaysInMonth((t-1+12)%12),a=Se.utils.getDaysInMonth(t),o=window.document.createDocumentFragment(),s=i+1-n,l=0;s<=i;s++,l++)o.appendChild(z("prevMonthDay",new Date(e,t-1,s),s,l));for(s=1;s<=a;s++,l++)o.appendChild(z("",new Date(e,t,s),s,l));for(var d=a+1;d<=42-n&&(1===Se.config.showMonths||l%7!==0);d++,l++)o.appendChild(z("nextMonthDay",new Date(e,t+1,d%a),d,l));var c=r("div","dayContainer");return c.appendChild(o),c}function B(){if(void 0!==Se.daysContainer){i(Se.daysContainer),Se.weekNumbers&&i(Se.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<Se.config.showMonths;t++){var n=new Date(Se.currentYear,Se.currentMonth,1);n.setMonth(Se.currentMonth+t),e.appendChild(R(n.getFullYear(),n.getMonth()))}Se.daysContainer.appendChild(e),Se.days=Se.daysContainer.firstChild}}function U(){var e=r("div","flatpickr-month"),t=window.document.createDocumentFragment(),n=r("span","cur-month");n.title=Se.l10n.scrollTitle;var i=o("cur-year",{tabindex:"-1"}),a=i.childNodes[0];a.title=Se.l10n.scrollTitle,a.setAttribute("aria-label",Se.l10n.yearAriaLabel),Se.config.minDate&&a.setAttribute("data-min",Se.config.minDate.getFullYear().toString()),Se.config.maxDate&&(a.setAttribute("data-max",Se.config.maxDate.getFullYear().toString()),a.disabled=!!Se.config.minDate&&Se.config.minDate.getFullYear()===Se.config.maxDate.getFullYear());var s=r("div","flatpickr-current-month");return s.appendChild(n),s.appendChild(i),t.appendChild(s),e.appendChild(t),{container:e,yearElement:a,monthElement:n}}function W(){Se.monthNav=r("div","flatpickr-months"),Se.yearElements=[],Se.monthElements=[],Se.prevMonthNav=r("span","flatpickr-prev-month"),Se.prevMonthNav.innerHTML=Se.config.prevArrow,Se.nextMonthNav=r("span","flatpickr-next-month"),Se.nextMonthNav.innerHTML=Se.config.nextArrow,Se.monthNav.appendChild(Se.prevMonthNav);for(var e=Se.config.showMonths;e--;){var t=U();Se.yearElements.push(t.yearElement),Se.monthElements.push(t.monthElement),Se.monthNav.appendChild(t.container)}return Se.monthNav.appendChild(Se.nextMonthNav),Object.defineProperty(Se,"_hidePrevMonthArrow",{get:function(){return Se.__hidePrevMonthArrow},set:function(e){Se.__hidePrevMonthArrow!==e&&(n(Se.prevMonthNav,"disabled",e),Se.__hidePrevMonthArrow=e)}}),Object.defineProperty(Se,"_hideNextMonthArrow",{get:function(){return Se.__hideNextMonthArrow},set:function(e){Se.__hideNextMonthArrow!==e&&(n(Se.nextMonthNav,"disabled",e),Se.__hideNextMonthArrow=e)}}),Se.currentYearElement=Se.yearElements[0],Me(),Se.monthNav}function q(){Se.calendarContainer.classList.add("hasTime"),Se.config.noCalendar&&Se.calendarContainer.classList.add("noCalendar"),Se.timeContainer=r("div","flatpickr-time"),Se.timeContainer.tabIndex=-1;var e=r("span","flatpickr-time-separator",":"),t=o("flatpickr-hour");Se.hourElement=t.childNodes[0];var n=o("flatpickr-minute");if(Se.minuteElement=n.childNodes[0],Se.hourElement.tabIndex=Se.minuteElement.tabIndex=-1,Se.hourElement.value=d(Se.latestSelectedDateObj?Se.latestSelectedDateObj.getHours():Se.config.time_24hr?Se.config.defaultHour:M(Se.config.defaultHour)),Se.minuteElement.value=d(Se.latestSelectedDateObj?Se.latestSelectedDateObj.getMinutes():Se.config.defaultMinute),Se.hourElement.setAttribute("data-step",Se.config.hourIncrement.toString()),Se.minuteElement.setAttribute("data-step",Se.config.minuteIncrement.toString()),Se.hourElement.setAttribute("data-min",Se.config.time_24hr?"0":"1"),Se.hourElement.setAttribute("data-max",Se.config.time_24hr?"23":"12"),Se.minuteElement.setAttribute("data-min","0"),Se.minuteElement.setAttribute("data-max","59"),Se.timeContainer.appendChild(t),Se.timeContainer.appendChild(e),Se.timeContainer.appendChild(n),Se.config.time_24hr&&Se.timeContainer.classList.add("time24hr"),Se.config.enableSeconds){Se.timeContainer.classList.add("hasSeconds");var i=o("flatpickr-second");Se.secondElement=i.childNodes[0],Se.secondElement.value=d(Se.latestSelectedDateObj?Se.latestSelectedDateObj.getSeconds():Se.config.defaultSeconds),Se.secondElement.setAttribute("data-step",Se.minuteElement.getAttribute("data-step")),Se.secondElement.setAttribute("data-min",Se.minuteElement.getAttribute("data-min")),Se.secondElement.setAttribute("data-max",Se.minuteElement.getAttribute("data-max")),Se.timeContainer.appendChild(r("span","flatpickr-time-separator",":")),Se.timeContainer.appendChild(i)}return Se.config.time_24hr||(Se.amPM=r("span","flatpickr-am-pm",Se.l10n.amPM[c((Se.latestSelectedDateObj?Se.hourElement.value:Se.config.defaultHour)>11)]),Se.amPM.title=Se.l10n.toggleTitle,Se.amPM.tabIndex=-1,Se.timeContainer.appendChild(Se.amPM)),Se.timeContainer}function $(){Se.weekdayContainer||(Se.weekdayContainer=r("div","flatpickr-weekdays"));for(var e=Se.config.showMonths;e--;){var t=r("div","flatpickr-weekdaycontainer");Se.weekdayContainer.appendChild(t)}return J(),Se.weekdayContainer}function J(){var e=Se.l10n.firstDayOfWeek,t=Se.l10n.weekdays.shorthand.concat();e>0&&e<t.length&&(t=t.splice(e,t.length).concat(t.splice(0,e)));for(var n=Se.config.showMonths;n--;)Se.weekdayContainer.children[n].innerHTML="\n      <span class=flatpickr-weekday>\n        "+t.join("</span><span class=flatpickr-weekday>")+"\n      </span>\n      "}function V(){Se.calendarContainer.classList.add("hasWeeks");var e=r("div","flatpickr-weekwrapper");e.appendChild(r("span","flatpickr-weekday",Se.l10n.weekAbbreviation));var t=r("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}function K(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1);var r=t?e:e-Se.currentMonth;r<0&&Se._hidePrevMonthArrow===!0||r>0&&Se._hideNextMonthArrow===!0||(Se.currentMonth+=r,(Se.currentMonth<0||Se.currentMonth>11)&&(Se.currentYear+=Se.currentMonth>11?1:-1,Se.currentMonth=(Se.currentMonth+12)%12,Ce("onYearChange")),B(),Ce("onMonthChange"),Me(),n===!0&&Y(void 0,0))}function X(e){void 0===e&&(e=!0),Se.input.value="",void 0!==Se.altInput&&(Se.altInput.value=""),void 0!==Se.mobileInput&&(Se.mobileInput.value=""),Se.selectedDates=[],Se.latestSelectedDateObj=void 0,Se.showTimeInput=!1,Se.config.enableTime===!0&&(void 0!==Se.config.minDate?x(Se.config.minDate):L(Se.config.defaultHour,Se.config.defaultMinute,Se.config.defaultSeconds)),Se.redraw(),e&&Ce("onChange")}function G(){Se.isOpen=!1,Se.isMobile||(Se.calendarContainer.classList.remove("open"),Se._input.classList.remove("active")),Ce("onClose")}function Z(){void 0!==Se.config&&Ce("onDestroy");for(var e=Se._handlers.length;e--;){var t=Se._handlers[e];t.element.removeEventListener(t.event,t.handler)}Se._handlers=[],Se.mobileInput?(Se.mobileInput.parentNode&&Se.mobileInput.parentNode.removeChild(Se.mobileInput),Se.mobileInput=void 0):Se.calendarContainer&&Se.calendarContainer.parentNode&&Se.calendarContainer.parentNode.removeChild(Se.calendarContainer),Se.altInput&&(Se.input.type="text",Se.altInput.parentNode&&Se.altInput.parentNode.removeChild(Se.altInput),delete Se.altInput),Se.input&&(Se.input.type=Se.input._type,Se.input.classList.remove("flatpickr-input"),Se.input.removeAttribute("readonly"),Se.input.value=""),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(e){try{delete Se[e]}catch(e){}})}function Q(e){return!(!Se.config.appendTo||!Se.config.appendTo.contains(e))||Se.calendarContainer.contains(e)}function ee(e){if(Se.isOpen&&!Se.config.inline){var t=Q(e.target),n=e.target===Se.input||e.target===Se.altInput||Se.element.contains(e.target)||e.path&&e.path.indexOf&&(~e.path.indexOf(Se.input)||~e.path.indexOf(Se.altInput)),r="blur"===e.type?n&&e.relatedTarget&&!Q(e.relatedTarget):!n&&!t,i=!Se.config.ignoredFocusElements.some(function(t){return t.contains(e.target)});r&&i&&(Se.close(),"range"===Se.config.mode&&1===Se.selectedDates.length&&(Se.clear(!1),Se.redraw()))}}function te(e){if(!(!e||Se.config.minDate&&e<Se.config.minDate.getFullYear()||Se.config.maxDate&&e>Se.config.maxDate.getFullYear())){var t=e,n=Se.currentYear!==t;Se.currentYear=t||Se.currentYear,Se.config.maxDate&&Se.currentYear===Se.config.maxDate.getFullYear()?Se.currentMonth=Math.min(Se.config.maxDate.getMonth(),Se.currentMonth):Se.config.minDate&&Se.currentYear===Se.config.minDate.getFullYear()&&(Se.currentMonth=Math.max(Se.config.minDate.getMonth(),Se.currentMonth)),n&&(Se.redraw(),Ce("onYearChange"))}}function ne(e,n){void 0===n&&(n=!0);var r=Se.parseDate(e,void 0,n);if(Se.config.minDate&&r&&t(r,Se.config.minDate,void 0!==n?n:!Se.minDateHasTime)<0||Se.config.maxDate&&r&&t(r,Se.config.maxDate,void 0!==n?n:!Se.maxDateHasTime)>0)return!1;if(0===Se.config.enable.length&&0===Se.config.disable.length)return!0;if(void 0===r)return!1;for(var i,a=Se.config.enable.length>0,o=a?Se.config.enable:Se.config.disable,s=0;s<o.length;s++){if(i=o[s],"function"==typeof i&&i(r))return a;if(i instanceof Date&&void 0!==r&&i.getTime()===r.getTime())return a;if("string"==typeof i&&void 0!==r){var l=Se.parseDate(i,void 0,!0);return l&&l.getTime()===r.getTime()?a:!a}if("object"==typeof i&&void 0!==r&&i.from&&i.to&&r.getTime()>=i.from.getTime()&&r.getTime()<=i.to.getTime())return a}return!a}function re(e){var t=e.target===Se._input,n=Q(e.target),r=Se.config.allowInput,i=Se.isOpen&&(!r||!t),a=Se.config.inline&&t&&!r;if(13===e.keyCode&&t){if(r)return Se.setDate(Se._input.value,!0,e.target===Se.altInput?Se.config.altFormat:Se.config.dateFormat),e.target.blur();Se.open()}else if(n||i||a){var o=!!Se.timeContainer&&Se.timeContainer.contains(e.target);switch(e.keyCode){case 13:o?ke():pe(e);break;case 27:e.preventDefault(),fe();break;case 8:case 46:t&&!Se.config.allowInput&&(e.preventDefault(),Se.clear());break;case 37:case 39:if(o)Se.hourElement&&Se.hourElement.focus();else if(e.preventDefault(),Se.daysContainer){var s=t?0:39===e.keyCode?1:-1;e.ctrlKey?K(s,!0,!0):Y(void 0,s)}break;case 38:case 40:e.preventDefault();var l=40===e.keyCode?1:-1;Se.daysContainer&&void 0!==e.target.$i?e.ctrlKey?(te(Se.currentYear-l),Y(e.target.$i,0)):o||Y(e.target.$i,7*l):Se.config.enableTime&&(!o&&Se.hourElement&&Se.hourElement.focus(),w(e),Se._debouncedChange());break;case 9:e.target===Se.hourElement?(e.preventDefault(),Se.minuteElement.select()):e.target===Se.minuteElement&&(Se.secondElement||Se.amPM)?(e.preventDefault(),void 0!==Se.secondElement?Se.secondElement.focus():void 0!==Se.amPM&&Se.amPM.focus()):e.target===Se.secondElement&&Se.amPM&&(e.preventDefault(),Se.amPM.focus())}switch(e.key){case Se.l10n.amPM[0].charAt(0):case Se.l10n.amPM[0].charAt(0).toLowerCase():void 0!==Se.amPM&&e.target===Se.amPM&&(Se.amPM.textContent=Se.l10n.amPM[0],k(),ke());break;case Se.l10n.amPM[1].charAt(0):case Se.l10n.amPM[1].charAt(0).toLowerCase():void 0!==Se.amPM&&e.target===Se.amPM&&(Se.amPM.textContent=Se.l10n.amPM[1],k(),ke())}Ce("onKeyDown",e)}}function ie(e){if(1===Se.selectedDates.length&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")){for(var t=e.dateObj.getTime(),n=Se.parseDate(Se.selectedDates[0],void 0,!0).getTime(),r=Math.min(t,Se.selectedDates[0].getTime()),i=Math.max(t,Se.selectedDates[0].getTime()),a=Se.daysContainer.children,o=a[0].children[0].dateObj.getTime(),s=a[a.length-1].lastChild.dateObj.getTime(),l=!1,d=0,c=0,u=o;u<s;u+=C.DAY)ne(new Date(u),!0)||(l=l||u>r&&u<i,u<n&&(!d||u>d)?d=u:u>n&&(!c||u<c)&&(c=u));for(var f=0;f<Se.config.showMonths;f++)for(var p=Se.daysContainer.children[f],h=Se.daysContainer.children[f-1],m=function(r,i){var a=p.children[r],o=a.dateObj,s=o.getTime(),u=d>0&&s<d||c>0&&s>c;return u?(a.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){a.classList.remove(e)}),"continue"):l&&!u?"continue":(["startRange","inRange","endRange","notAllowed"].forEach(function(e){a.classList.remove(e)}),e.classList.add(t<Se.selectedDates[0].getTime()?"startRange":"endRange"),void(!p.contains(e)&&f>0&&h&&h.lastChild.dateObj.getTime()>=s||(n<t&&s===n?a.classList.add("startRange"):n>t&&s===n&&a.classList.add("endRange"),s>=d&&(0===c||s<=c)&&E(s,n,t)&&a.classList.add("inRange"))))},v=0,g=p.children.length;v<g;v++){m(v,g)}}}function ae(){!Se.isOpen||Se.config.static||Se.config.inline||ce()}function oe(e,t){if(void 0===t&&(t=Se._input),Se.isMobile===!0)return e&&(e.preventDefault(),e.target&&e.target.blur()),setTimeout(function(){void 0!==Se.mobileInput&&Se.mobileInput.click()},0),void Ce("onOpen");if(!Se._input.disabled&&!Se.config.inline){var n=Se.isOpen;Se.isOpen=!0,n||(Se.calendarContainer.classList.add("open"),Se._input.classList.add("active"),Ce("onOpen"),ce(t)),Se.config.enableTime===!0&&Se.config.noCalendar===!0&&(0===Se.selectedDates.length&&(Se.setDate(void 0!==Se.config.minDate?new Date(Se.config.minDate.getTime()):(new Date).setHours(Se.config.defaultHour,Se.config.defaultMinute,Se.config.defaultSeconds,0),!1),k(),ke()),setTimeout(function(){return Se.hourElement.select()},50))}}function se(e){return function(t){var n=Se.config["_"+e+"Date"]=Se.parseDate(t,Se.config.dateFormat),r=Se.config["_"+("min"===e?"max":"min")+"Date"];void 0!==n&&(Se["min"===e?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0),Se.selectedDates&&(Se.selectedDates=Se.selectedDates.filter(function(e){return ne(e)}),Se.selectedDates.length||"min"!==e||x(n),ke()),Se.daysContainer&&(ue(),void 0!==n?Se.currentYearElement[e]=n.getFullYear().toString():Se.currentYearElement.removeAttribute(e),Se.currentYearElement.disabled=!!r&&void 0!==n&&r.getFullYear()===n.getFullYear())}}function le(){var e=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],t=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],n=Object.assign({},l,JSON.parse(JSON.stringify(s.dataset||{}))),r={};Se.config.parseDate=n.parseDate,Se.config.formatDate=n.formatDate,Object.defineProperty(Se.config,"enable",{get:function(){return Se.config._enable},set:function(e){Se.config._enable=ge(e)}}),Object.defineProperty(Se.config,"disable",{get:function(){return Se.config._disable},set:function(e){Se.config._disable=ge(e)}}),!n.dateFormat&&n.enableTime&&(r.dateFormat=n.noCalendar?"H:i"+(n.enableSeconds?":S":""):T.defaultConfig.dateFormat+" H:i"+(n.enableSeconds?":S":"")),n.altInput&&n.enableTime&&!n.altFormat&&(r.altFormat=n.noCalendar?"h:i"+(n.enableSeconds?":S K":" K"):T.defaultConfig.altFormat+(" h:i"+(n.enableSeconds?":S":"")+" K")),Object.defineProperty(Se.config,"minDate",{get:function(){return Se.config._minDate},set:se("min")}),Object.defineProperty(Se.config,"maxDate",{get:function(){return Se.config._maxDate},set:se("max")});var i=function(e){return function(t){Se.config["min"===e?"_minTime":"_maxTime"]=Se.parseDate(t,"H:i")}};Object.defineProperty(Se.config,"minTime",{get:function(){return Se.config._minTime},set:i("min")}),Object.defineProperty(Se.config,"maxTime",{get:function(){return Se.config._maxTime},set:i("max")}),Object.assign(Se.config,r,n);for(var a=0;a<e.length;a++)Se.config[e[a]]=Se.config[e[a]]===!0||"true"===Se.config[e[a]];for(var o=t.length;o--;)void 0!==Se.config[t[o]]&&(Se.config[t[o]]=u(Se.config[t[o]]||[]).map(v));"time"===Se.config.mode&&(Se.config.noCalendar=!0,Se.config.enableTime=!0);for(var d=0;d<Se.config.plugins.length;d++){var c=Se.config.plugins[d](Se)||{};for(var f in c)~t.indexOf(f)?Se.config[f]=u(c[f]).map(v).concat(Se.config[f]):"undefined"==typeof n[f]&&(Se.config[f]=c[f])}Se.isMobile=!Se.config.disableMobile&&!Se.config.inline&&"single"===Se.config.mode&&!Se.config.disable.length&&!Se.config.enable.length&&!Se.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Ce("onParseConfig")}function de(){"object"!=typeof Se.config.locale&&"undefined"==typeof T.l10ns[Se.config.locale]&&Se.config.errorHandler(new Error("flatpickr: invalid locale "+Se.config.locale)),Se.l10n=Object.assign({},T.l10ns.default,"object"==typeof Se.config.locale?Se.config.locale:"default"!==Se.config.locale?T.l10ns[Se.config.locale]:void 0),m.K="("+Se.l10n.amPM[0]+"|"+Se.l10n.amPM[1]+"|"+Se.l10n.amPM[0].toLowerCase()+"|"+Se.l10n.amPM[1].toLowerCase()+")",Se.formatDate=b(Se)}function ce(e){if(void 0!==Se.calendarContainer){Ce("onPreCalendarPosition");var t=e||Se._positionElement,r=Array.prototype.reduce.call(Se.calendarContainer.children,function(e,t){return e+t.offsetHeight},0),i=Se.calendarContainer.offsetWidth,a=Se.config.position,o=t.getBoundingClientRect(),s=window.innerHeight-o.bottom,l="above"===a||"below"!==a&&s<r&&o.top>r,d=window.pageYOffset+o.top+(l?-r-2:t.offsetHeight+2);if(n(Se.calendarContainer,"arrowTop",!l),n(Se.calendarContainer,"arrowBottom",l),!Se.config.inline){var c=window.pageXOffset+o.left,u=window.document.body.offsetWidth-o.right,f=c+i>window.document.body.offsetWidth;n(Se.calendarContainer,"rightMost",f),Se.config.static||(Se.calendarContainer.style.top=d+"px",f?(Se.calendarContainer.style.left="auto",Se.calendarContainer.style.right=u+"px"):(Se.calendarContainer.style.left=c+"px",Se.calendarContainer.style.right="auto"))}}}function ue(){Se.config.noCalendar||Se.isMobile||(J(),Me(),B())}function fe(){Se._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||void 0!==navigator.msMaxTouchPoints?setTimeout(Se.close,0):Se.close()}function pe(e){e.preventDefault(),e.stopPropagation();var n=function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")&&!e.classList.contains("notAllowed")},r=a(e.target,n);if(void 0!==r){var i=r,o=Se.latestSelectedDateObj=new Date(i.dateObj.getTime()),s=(o.getMonth()<Se.currentMonth||o.getMonth()>Se.currentMonth+Se.config.showMonths-1)&&"range"!==Se.config.mode;if(Se.selectedDateElem=i,"single"===Se.config.mode)Se.selectedDates=[o];else if("multiple"===Se.config.mode){var l=_e(o);l?Se.selectedDates.splice(parseInt(l),1):Se.selectedDates.push(o)}else"range"===Se.config.mode&&(2===Se.selectedDates.length&&Se.clear(!1),Se.selectedDates.push(o),0!==t(o,Se.selectedDates[0],!0)&&Se.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()}));if(k(),s){var d=Se.currentYear!==o.getFullYear();Se.currentYear=o.getFullYear(),Se.currentMonth=o.getMonth(),d&&Ce("onYearChange"),Ce("onMonthChange")}if(Me(),B(),Se.config.minDate&&Se.minDateHasTime&&Se.config.enableTime&&0===t(o,Se.config.minDate)&&x(Se.config.minDate),ke(),Se.config.enableTime&&setTimeout(function(){return Se.showTimeInput=!0},50),"range"===Se.config.mode&&(1===Se.selectedDates.length?ie(i):Me()),s||"range"===Se.config.mode||1!==Se.config.showMonths?Se.selectedDateElem&&Se.selectedDateElem.focus():Y(i.$i,0),void 0!==Se.hourElement&&setTimeout(function(){return void 0!==Se.hourElement&&Se.hourElement.select()},451),Se.config.closeOnSelect){var c="single"===Se.config.mode&&!Se.config.enableTime,u="range"===Se.config.mode&&2===Se.selectedDates.length&&!Se.config.enableTime;(c||u)&&fe()}N()}}function he(e,t){null!==e&&"object"==typeof e?Object.assign(Se.config,e):(Se.config[e]=t,void 0!==Oe[e]&&Oe[e].forEach(function(e){return e()})),Se.redraw(),I()}function me(e,t){var n=[];if(e instanceof Array)n=e.map(function(e){return Se.parseDate(e,t)});else if(e instanceof Date||"number"==typeof e)n=[Se.parseDate(e,t)];else if("string"==typeof e)switch(Se.config.mode){case"single":n=[Se.parseDate(e,t)];break;case"multiple":n=e.split(Se.config.conjunction).map(function(e){return Se.parseDate(e,t)});break;case"range":n=e.split(Se.l10n.rangeSeparator).map(function(e){return Se.parseDate(e,t)})}else Se.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));Se.selectedDates=n.filter(function(e){return e instanceof Date&&ne(e,!1)}),"range"===Se.config.mode&&Se.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()})}function ve(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=Se.config.dateFormat),0===e||e?(me(e,n),Se.showTimeInput=Se.selectedDates.length>0,Se.latestSelectedDateObj=Se.selectedDates[0],Se.redraw(),I(),x(),ke(t),void(t&&Ce("onChange"))):Se.clear(t)}function ge(e){return e.map(function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?Se.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:Se.parseDate(e.from,void 0),to:Se.parseDate(e.to,void 0)}:e}).filter(function(e){return e})}function be(){Se.selectedDates=[],Se.now=Se.parseDate(Se.config.now)||new Date;var e=Se.config.defaultDate||Se.input.value;e&&me(e,Se.config.dateFormat);var t=Se.selectedDates.length>0?Se.selectedDates[0]:Se.config.minDate&&Se.config.minDate.getTime()>Se.now.getTime()?Se.config.minDate:Se.config.maxDate&&Se.config.maxDate.getTime()<Se.now.getTime()?Se.config.maxDate:Se.now;Se.currentYear=t.getFullYear(),Se.currentMonth=t.getMonth(),Se.selectedDates.length>0&&(Se.latestSelectedDateObj=Se.selectedDates[0]),void 0!==Se.config.minTime&&(Se.config.minTime=Se.parseDate(Se.config.minTime,"H:i")),void 0!==Se.config.maxTime&&(Se.config.maxTime=Se.parseDate(Se.config.maxTime,"H:i")),Se.minDateHasTime=!!Se.config.minDate&&(Se.config.minDate.getHours()>0||Se.config.minDate.getMinutes()>0||Se.config.minDate.getSeconds()>0),Se.maxDateHasTime=!!Se.config.maxDate&&(Se.config.maxDate.getHours()>0||Se.config.maxDate.getMinutes()>0||Se.config.maxDate.getSeconds()>0),Object.defineProperty(Se,"showTimeInput",{get:function(){return Se._showTimeInput},set:function(e){Se._showTimeInput=e,Se.calendarContainer&&n(Se.calendarContainer,"showTimeInput",e),Se.isOpen&&ce()}})}function ye(){return Se.input=Se.config.wrap?s.querySelector("[data-input]"):s,Se.input?(Se.input._type=Se.input.type,Se.input.type="text",Se.input.classList.add("flatpickr-input"),Se._input=Se.input,Se.config.altInput&&(Se.altInput=r(Se.input.nodeName,Se.input.className+" "+Se.config.altInputClass),Se._input=Se.altInput,Se.altInput.placeholder=Se.input.placeholder,Se.altInput.disabled=Se.input.disabled,Se.altInput.required=Se.input.required,Se.altInput.tabIndex=Se.input.tabIndex,Se.altInput.type="text",Se.input.type="hidden",!Se.config.static&&Se.input.parentNode&&Se.input.parentNode.insertBefore(Se.altInput,Se.input.nextSibling)),Se.config.allowInput||Se._input.setAttribute("readonly","readonly"),void(Se._positionElement=Se.config.positionElement||Se._input)):void Se.config.errorHandler(new Error("Invalid input element specified"))}function we(){var e=Se.config.enableTime?Se.config.noCalendar?"time":"datetime-local":"date";Se.mobileInput=r("input",Se.input.className+" flatpickr-mobile"),Se.mobileInput.step=Se.input.getAttribute("step")||"any",
Se.mobileInput.tabIndex=1,Se.mobileInput.type=e,Se.mobileInput.disabled=Se.input.disabled,Se.mobileInput.required=Se.input.required,Se.mobileInput.placeholder=Se.input.placeholder,Se.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",Se.selectedDates.length>0&&(Se.mobileInput.defaultValue=Se.mobileInput.value=Se.formatDate(Se.selectedDates[0],Se.mobileFormatStr)),Se.config.minDate&&(Se.mobileInput.min=Se.formatDate(Se.config.minDate,"Y-m-d")),Se.config.maxDate&&(Se.mobileInput.max=Se.formatDate(Se.config.maxDate,"Y-m-d")),Se.input.type="hidden",void 0!==Se.altInput&&(Se.altInput.type="hidden");try{Se.input.parentNode&&Se.input.parentNode.insertBefore(Se.mobileInput,Se.input.nextSibling)}catch(e){}O(Se.mobileInput,"change",function(e){Se.setDate(e.target.value,!1,Se.mobileFormatStr),Ce("onChange"),Ce("onClose")})}function Ee(){return Se.isOpen?Se.close():void Se.open()}function Ce(e,t){var n=Se.config[e];if(void 0!==n&&n.length>0)for(var r=0;n[r]&&r<n.length;r++)n[r](Se.selectedDates,Se.input.value,Se,t);"onChange"===e&&(Se.input.dispatchEvent(De("change")),Se.input.dispatchEvent(De("input")))}function De(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function _e(e){for(var n=0;n<Se.selectedDates.length;n++)if(0===t(Se.selectedDates[n],e))return""+n;return!1}function Te(e){return!("range"!==Se.config.mode||Se.selectedDates.length<2)&&(t(e,Se.selectedDates[0])>=0&&t(e,Se.selectedDates[1])<=0)}function Me(){Se.config.noCalendar||Se.isMobile||!Se.monthNav||(Se.yearElements.forEach(function(e,t){var n=new Date(Se.currentYear,Se.currentMonth,1);n.setMonth(Se.currentMonth+t),Se.monthElements[t].textContent=p(n.getMonth(),Se.config.shorthandCurrentMonth,Se.l10n)+" ",e.value=n.getFullYear().toString()}),Se._hidePrevMonthArrow=void 0!==Se.config.minDate&&(Se.currentYear===Se.config.minDate.getFullYear()?Se.currentMonth<=Se.config.minDate.getMonth():Se.currentYear<Se.config.minDate.getFullYear()),Se._hideNextMonthArrow=void 0!==Se.config.maxDate&&(Se.currentYear===Se.config.maxDate.getFullYear()?Se.currentMonth+1>Se.config.maxDate.getMonth():Se.currentYear>Se.config.maxDate.getFullYear()))}function ke(e){if(void 0===e&&(e=!0),0===Se.selectedDates.length)return Se.clear(e);void 0!==Se.mobileInput&&Se.mobileFormatStr&&(Se.mobileInput.value=void 0!==Se.latestSelectedDateObj?Se.formatDate(Se.latestSelectedDateObj,Se.mobileFormatStr):"");var t="range"!==Se.config.mode?Se.config.conjunction:Se.l10n.rangeSeparator;Se.input.value=Se.selectedDates.map(function(e){return Se.formatDate(e,Se.config.dateFormat)}).join(t),void 0!==Se.altInput&&(Se.altInput.value=Se.selectedDates.map(function(e){return Se.formatDate(e,Se.config.altFormat)}).join(t)),e!==!1&&Ce("onValueUpdate")}function xe(e){var t=Se.prevMonthNav.contains(e.target),n=Se.nextMonthNav.contains(e.target);t||n?K(t?-1:1):Se.yearElements.indexOf(e.target)>=0?(e.preventDefault(),e.target.select()):e.target.classList.contains("arrowUp")?Se.changeYear(Se.currentYear+1):e.target.classList.contains("arrowDown")&&Se.changeYear(Se.currentYear-1)}function Le(e){e.preventDefault();var t="keydown"===e.type,n=e.target;void 0!==Se.amPM&&e.target===Se.amPM&&(Se.amPM.textContent=Se.l10n.amPM[c(Se.amPM.textContent===Se.l10n.amPM[0])]);var r=parseFloat(n.getAttribute("data-min")),i=parseFloat(n.getAttribute("data-max")),a=parseFloat(n.getAttribute("data-step")),o=parseInt(n.value,10),s=e.delta||(t?38===e.which?1:-1:0),l=o+a*s;if("undefined"!=typeof n.value&&2===n.value.length){var u=n===Se.hourElement,f=n===Se.minuteElement;l<r?(l=i+l+c(!u)+(c(u)&&c(!Se.amPM)),f&&j(void 0,-1,Se.hourElement)):l>i&&(l=n===Se.hourElement?l-i-c(!Se.amPM):r,f&&j(void 0,1,Se.hourElement)),Se.amPM&&u&&(1===a?l+o===23:Math.abs(l-o)>a)&&(Se.amPM.textContent=Se.l10n.amPM[c(Se.amPM.textContent===Se.l10n.amPM[0])]),n.value=d(l)}}var Se={config:Object.assign({},T.defaultConfig),l10n:g};Se.parseDate=y({config:Se.config,l10n:Se.l10n}),Se._handlers=[],Se._bind=O,Se._setHoursFromDate=x,Se.changeMonth=K,Se.changeYear=te,Se.clear=X,Se.close=G,Se._createElement=r,Se.destroy=Z,Se.isEnabled=ne,Se.jumpToDate=I,Se.open=oe,Se.redraw=ue,Se.set=he,Se.setDate=ve,Se.toggle=Ee;var Oe={locale:[de]};return h(),Se}function l(e,t){for(var n=Array.prototype.slice.call(e),r=[],i=0;i<n.length;i++){var a=n[i];try{if(null!==a.getAttribute("data-fp-omit"))continue;void 0!==a._flatpickr&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=s(a,t||{}),r.push(a._flatpickr)}catch(e){console.error(e)}}return 1===r.length?r[0]:r}var d=function(e){return("0"+e).slice(-2)},c=function(e){return e===!0?1:0},u=function(e){return e instanceof Array?e:[e]},f=function(){},p=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},h={D:f,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours(parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*c(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t){var n=parseInt(t);return new Date(e.getFullYear(),0,2+7*(n-1),0,0,0,0)},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours(parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:f,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},w:f,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},m={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},v={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[v.w(e,t,n)]},F:function(e,t,n){return p(v.n(e,t,n)-1,!1,t)},G:function(e,t,n){return d(v.h(e,t,n))},H:function(e){return d(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[c(e.getHours()>11)]},M:function(e,t){return p(e.getMonth(),!0,t)},S:function(e){return d(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(e){return d(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return d(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return d(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},g={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year"},b=function(e){var t=e.config,n=void 0===t?D:t,r=e.l10n,i=void 0===r?g:r;return function(e,t,r){if(void 0!==n.formatDate)return n.formatDate(e,t);var a=r||i;return t.split("").map(function(t,r,i){return v[t]&&"\\"!==i[r-1]?v[t](e,a,n):"\\"!==t?t:""}).join("")}},y=function(e){var t=e.config,n=void 0===t?D:t,r=e.l10n,i=void 0===r?g:r;return function(e,t,r){if(0===e||e){var a,o=e;if(e instanceof Date)a=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)a=new Date(e);else if("string"==typeof e){var s=t||(n||D).dateFormat,l=String(e).trim();if("today"===l)a=new Date,r=!0;else if(/Z$/.test(l)||/GMT$/.test(l))a=new Date(e);else if(n&&n.parseDate)a=n.parseDate(e,s);else{a=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var d,c=[],u=0,f=0,p="";u<s.length;u++){var v=s[u],g="\\"===v,b="\\"===s[u-1]||g;if(m[v]&&!b){p+=m[v];var y=new RegExp(p).exec(e);y&&(d=!0)&&c["Y"!==v?"push":"unshift"]({fn:h[v],val:y[++f]})}else g||(p+=".");c.forEach(function(e){var t=e.fn,n=e.val;return a=t(a,n,i)||a})}a=d?a:void 0}}return a instanceof Date?(r===!0&&a.setHours(0,0,0,0),a):void n.errorHandler(new Error("Invalid date provided: "+o))}}},w=function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},E=function(e,t,n){return e>Math.min(t,n)&&e<Math.max(t,n)},C={DAY:864e5},D={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:console.warn,getWeek:w,hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};"function"!=typeof Object.assign&&(Object.assign=function(e){if(!e)throw TypeError("Cannot convert undefined or null to object");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=function(t){t&&Object.keys(t).forEach(function(n){return e[n]=t[n]})},a=0;a<n.length;a++){var o=n[a];i(o)}return e});var _=300;"undefined"!=typeof HTMLElement&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return l(this,e)},HTMLElement.prototype.flatpickr=function(e){return l([this],e)});var T=function(e,t){return e instanceof NodeList?l(e,t):"string"==typeof e?l(window.document.querySelectorAll(e),t):l([e],t)};return T.defaultConfig=D,T.l10ns={en:Object.assign({},g),default:Object.assign({},g)},T.localize=function(e){T.l10ns.default=Object.assign({},T.l10ns.default,e)},T.setDefaults=function(e){T.defaultConfig=Object.assign({},T.defaultConfig,e)},T.parseDate=y({}),T.formatDate=b({}),T.compareDates=t,"undefined"!=typeof jQuery&&(jQuery.fn.flatpickr=function(e){return l(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},T})},function(e,t){var n=function(e,t){function n(){a=!0,r()}t=t||{};var r,i=t.timeout,a=!1,o=new Promise(function(e,t){r=e}),s=Promise.race([o,e]).then(function(e){if(a){var t=new Error("User cancelled promise.");return t.type="cancel",Promise.reject(t)}if(i){var t=new Error("Promise timeout");return t.type="timeout",Promise.reject(t)}return Promise.resolve(e)});return t.timeout&&setTimeout(function(){i=!0,r()},+t.timeout),{promise:s,cancel:n,abort:n}};e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),s=r(o),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom_left";i(this,e),this.position=t,this.render()}return a(e,[{key:"render",value:function(){var e=document.createElement("div");e.classList.add("fred--launcher","fred--launcher_"+this.position);var t=document.createElement("button");t.classList.add("fred--launcher_btn","fred--launcher_btn_fred"),t.setAttribute("role","button"),t.addEventListener("click",function(e){e.preventDefault(),s.default.emit("fred-sidebar-toggle")});var n=document.createElement("button");n.classList.add("fred--launcher_btn","fred--launcher_btn_save"),n.setAttribute("role","button"),n.addEventListener("click",function(e){e.preventDefault(),s.default.emit("fred-save")});var r=document.createElement("button");r.classList.add("fred--launcher_btn","fred--launcher_btn_undo"),r.setAttribute("role","button"),r.addEventListener("click",function(e){e.preventDefault(),s.default.emit("fred-undo")}),e.appendChild(t),e.appendChild(n),e.appendChild(r),s.default.emit("fred-wrapper-insert",e)}}]),e}();t.default=l,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ElementSettings=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),s=r(o),l=t.ElementSettings=function(){function e(){i(this,e),this.el=null,this.settings={},this.originalValues={},this.wrapper=null,this.render(),s.default.on("fred-element-settings-open",this.openSettings.bind(this))}return a(e,[{key:"render",value:function(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("fred--panel","fred--panel_element","fred--hidden"),s.default.emit("fred-wrapper-insert",this.wrapper)}},{key:"openSettings",value:function(e){this.el=e,this.settings=e.options.settings,this.originalValues={},this.wrapper.innerHTML="",this.wrapper.appendChild(this.renderSettings()),this.open()}},{key:"renderSettings",value:function(){var e=this,t=document.createElement("form"),n=document.createElement("fieldset"),r=document.createElement("legend");r.innerHTML="Element Settings",n.appendChild(r),this.settings.forEach(function(t){if(t.group&&t.settings)n.appendChild(e.renderSettingsGroup(t));else{var r=e.el.settings[t.name]||t.value;e.originalValues[t.name]=r,n.appendChild(e.renderSetting(t,r))}});var i=document.createElement("button");i.classList.add("fred--btn-panel","fred--btn-apply"),i.innerHTML="Apply",i.addEventListener("click",function(t){t.preventDefault(),e.apply()});var a=document.createElement("button");return a.classList.add("fred--btn-panel"),a.innerHTML="Cancel",a.addEventListener("click",function(t){t.preventDefault(),e.cancel(a)}),n.appendChild(i),n.appendChild(a),t.appendChild(n),t}},{key:"renderSettingsGroup",value:function(e){var t=this,n=document.createElement("dl"),r=document.createElement("dt");r.setAttribute("role","tab"),r.setAttribute("tabindex","1"),r.innerHTML=e.group;var i=document.createElement("dd");return e.settings.forEach(function(e){var n=t.el.settings[e.name]||e.value;t.originalValues[e.name]=n,i.appendChild(t.renderSetting(e,n))}),n.appendChild(r),n.appendChild(i),n}},{key:"renderSetting",value:function(e,t){switch(e.type){case"select":return this.buildSelectInput(e,t);case"toggle":return this.buildToggleInput(e,t);default:return this.buildTextInput(e,t)}}},{key:"buildTextInput",value:function(e,t){var n=this,r=document.createElement("label");r.innerHTML=e.label||e.name;var i=document.createElement("input");return i.setAttribute("type","text"),i.value=t,i.addEventListener("keyup",function(t){n.setSetting(e.name,i.value)}),r.appendChild(i),r}},{key:"buildSelectInput",value:function(e,t){var n=this,r=document.createElement("label");r.innerHTML=e.label||e.name;var i=document.createElement("select");if(e.options)for(var a in e.options)if(e.options.hasOwnProperty(a)){var o=document.createElement("option");o.innerHTML=e.options[a],o.value=a,a===t&&o.setAttribute("selected","selected"),i.appendChild(o)}return i.addEventListener("change",function(t){e.options[i.value]&&n.setSetting(e.name,i.value)}),r.appendChild(i),r}},{key:"buildToggleInput",value:function(e,t){var n=this,r=document.createElement("label");r.classList.add("fred--toggle"),r.innerHTML=e.label||e.name;var i=document.createElement("input");i.setAttribute("type","checkbox"),t===!0&&i.setAttribute("checked","checked"),i.addEventListener("change",function(t){n.setSetting(e.name,t.target.checked)});var a=document.createElement("span");return r.appendChild(i),r.appendChild(a),r}},{key:"setSetting",value:function(e,t){this.el.settings[e]=t,this.el.reRender()}},{key:"apply",value:function(){this.el.reRender(),this.close()}},{key:"settingChanged",value:function(){for(var e in this.el.settings)if(this.el.settings.hasOwnProperty(e)&&(!this.originalValues[e]||this.originalValues[e]!==this.el.settings[e]))return!0;return!1}},{key:"cancel",value:function(e){return this.settingChanged()&&e.confirmed!==!0?(e.innerHTML="There are unsaved changes, are you sure?",void(e.confirmed=!0)):void this.realCancel()}},{key:"realCancel",value:function(){this.el.settings=this.originalValues,this.el.reRender(),this.close()}},{key:"open",value:function(){this.wrapper.classList.remove("fred--hidden")}},{key:"close",value:function(){this.wrapper.classList.add("fred--hidden")}}]),e}();t.default=l}])});