!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Fred",[],t):"object"==typeof exports?exports.Fred=t():e.Fred=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=r(a),u=n(3),c=r(u),l=n(20),d=r(l),f=function(){function e(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.init()}return o(e,[{key:"render",value:function(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("fred"),this.wrapper.addEventListener("click",function(e){e.stopPropagation()}),new d.default(this.wrapper),this.sidebar.render(this.wrapper),null===document.body.firstChild?document.body.appendChild(this.wrapper):document.body.insertBefore(this.wrapper,document.body.firstChild)}},{key:"showFred",value:function(){this.wrapper.removeAttribute("hidden")}},{key:"hideFred",value:function(){this.wrapper.setAttribute("hidden","hidden")}},{key:"save",value:function(){for(var e=this,t={},n=function(n){t[e.dropzones[n].dataset.fredDropzone]||(t[e.dropzones[n].dataset.fredDropzone]=[]),e.dropzones[n].querySelectorAll("[data-fred-id]").forEach(function(r){var i={};r.querySelectorAll("[contenteditable]").forEach(function(e){i[e.dataset.fredName]=e.innerHTML}),t[e.dropzones[n].dataset.fredDropzone].push({widget:r.dataset.fredId,values:i})})},r=0;r<this.dropzones.length;r++)n(r);localStorage.setItem("fred-content",JSON.stringify(t)),console.log(t)}},{key:"loadContent",value:function(){var e=localStorage.getItem("fred-content");if(e)try{e=JSON.parse(e),console.log(e)}catch(e){console.error("Failed to parse stored state.")}}},{key:"init",value:function(){var e=this;console.log("Hello from Fred!"),this.dropzones=document.querySelectorAll('[data-fred-dropzone]:not([data-fred-dropzone=""])');for(var t=[],n=0;n<this.dropzones.length;n++){if(t.indexOf(this.dropzones[n].dataset.fredDropzone)!=-1)return console.error("There are several dropzones with same name: "+this.dropzones[n].dataset.fredDropzone+". The name of each dropzone has to be unique."),!1;t.push(this.dropzones[n].dataset.fredDropzone)}s.default.on("fred-hide",function(){e.hideFred()}),s.default.on("fred-show",function(){e.showFred()}),this.sidebar=new c.default,this.render(),this.loadContent()}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.emitter=void 0;var i=n(2),o=r(i),a=t.emitter=new o.default;t.default=a},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,u=0;u<i;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=r(a),u=n(4),c=r(u),l=n(6),d=r(l),f=n(19),p=r(f),h=function(){function e(){var t=this;i(this,e),this.lastRequest=null,s.default.on("fred-sidebar-expand",function(e,n,r){t.showSidebar2('<span class="fred--loading">LOADING</span>','<span class="fred--loading"></span>'),t.lastRequest=(0,p.default)(Promise.resolve(r)),t.lastRequest.promise.then(function(r){t.lastRequest=null,t.showSidebar2(n,r),e.afterExpand()}).catch(function(e){t.lastRequest=null,"cancel"!==e.type&&t.showSidebar2("ERROR","SOMETHING WRONG HAPPENED")})}),s.default.on("fred-sidebar-hide",function(){t.hideSidebar()}),s.default.on("fred-sidebar-show",function(){t.showSidebar()})}return o(e,[{key:"render",value:function(e){return this.wrapper=document.createElement("div"),this.closeSidebar=this.closeSidebar.bind(this),this.wrapper.appendChild(this.buildOpenButton()),this.wrapper.appendChild(this.buildSidebar()),this.wrapper.appendChild(this.buildSidebar2()),e.appendChild(this.wrapper),this}},{key:"buildSidebar",value:function(){var e=this;this.sidebar=document.createElement("div"),this.sidebar.classList.add("fred--sidebar"),this.sidebar.setAttribute("hidden","hidden"),this.close=document.createElement("button"),this.close.classList.add("fred--sidebar_close"),this.close.innerHTML='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="-4 -4 20 20" enable-background="new -4 -4 20 20" xml:space="preserve"><polygon points="16.079,-0.666 12.717,-4.027 6.052,2.637 -0.613,-4.027 -3.975,-0.666 2.69,6 -3.975,12.664 -0.612,16.026 6.052,9.362 12.717,16.027 16.079,12.664 9.414,6 "></polygon></svg>',this.close.addEventListener("click",function(t){t.preventDefault(),e.sidebar2.hasAttribute("hidden")===!0?(null!==e.lastRequest&&(e.lastRequest.cancel(),e.lastRequest=null),e.sidebar.setAttribute("hidden","hidden"),window.removeEventListener("click",e.closeSidebar)):(null!==e.lastRequest&&(e.lastRequest.cancel(),e.lastRequest=null),e.sidebar2.setAttribute("hidden","hidden"))});var t=document.createElement("div");t.classList.add("fred--sidebar_title"),t.innerHTML='<img src="images/modx-revo-icon-48.svg" alt="MODX FRED" class="fred--logo"><h1>Fred</h1>';var n=document.createElement("dl");return n.classList.add("fred--accordion"),n.setAttribute("tabindex","0"),n.setAttribute("role","tablist"),n.appendChild(new c.default),n.appendChild(new d.default),this.sidebar.appendChild(this.close),this.sidebar.appendChild(t),this.sidebar.appendChild(n),this.sidebar}},{key:"showSidebar2",value:function(e,t){this.sidebar2Header.innerHTML="<span>"+e+"</span>",this.sidebar2Content.innerHTML=t,this.sidebar2.removeAttribute("hidden")}},{key:"buildSidebar2",value:function(){this.sidebar2=document.createElement("div"),this.sidebar2.classList.add("fred--sidebar_paneltwo","active"),this.sidebar2.setAttribute("hidden","hidden");var e=document.createElement("dl");e.classList.add("fred--accordion"),e.setAttribute("tabindex","0"),e.setAttribute("role","tablist"),this.sidebar2Header=document.createElement("dt"),this.sidebar2Header.classList.add("active"),this.sidebar2Header.setAttribute("role","tab"),this.sidebar2Header.setAttribute("tabindex","0");var t=document.createElement("dd");return t.setAttribute("role","tab"),t.setAttribute("tabindex","0"),this.sidebar2Content=document.createElement("div"),t.appendChild(this.sidebar2Content),e.appendChild(this.sidebar2Header),e.appendChild(t),this.sidebar2.appendChild(e),this.sidebar2}},{key:"buildOpenButton",value:function(){var e=this;return this.open=document.createElement("button"),this.open.classList.add("fred--open"),this.open.innerHTML='<i class="fred--angle-right"></i> <i class="fred--angle-right"></i>',this.open.addEventListener("click",function(t){t.preventDefault(),e.sidebar.removeAttribute("hidden"),window.addEventListener("click",e.closeSidebar)}),this.open}},{key:"closeSidebar",value:function(e){e.preventDefault(),null!==this.lastRequest&&(this.lastRequest.cancel(),this.lastRequest=null),this.sidebar.setAttribute("hidden","hidden"),this.sidebar2.setAttribute("hidden","hidden"),window.removeEventListener("click",this.closeSidebar)}},{key:"hideSidebar",value:function(){this.wrapper.setAttribute("hidden","hidden")}},{key:"showSidebar",value:function(){this.wrapper.removeAttribute("hidden")}}]),e}();t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(5),c=r(u),l=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"click",value:function(){var e="<div>THIS IS A DELAYED TEST CONTENT</div>";return new Promise(function(t,n){setTimeout(function(){t(e)},1e4)})}}]),t}(c.default);l.title="Resources",l.expandable=!0,t.default=l,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=r(a),u=function(){function e(){var t=this;i(this,e);var n=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=document.createElement("dt");return r.setAttribute("role","tab"),r.setAttribute("tabindex","0"),r.innerHTML=(n===!0?'<i class="fred--angle-left fred--accordion_toggle"></i>':"")+e+"</span>",n===!1?r.addEventListener("click",t.click):r.addEventListener("click",function(){s.default.emit("fred-sidebar-expand",t,e,t.click())}),r};return this.init(),n(this.constructor.title,this.constructor.expandable)}return o(e,[{key:"init",value:function(){}},{key:"click",value:function(){}},{key:"afterExpand",value:function(){}}]),e}();u.title="TITLE NOT SET",u.expandable=!1,t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(5),l=r(c),d=n(7),f=r(d),p=n(1),h=r(p),v=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"init",value:function(){this.drake=null}},{key:"click",value:function(){var e=document.createElement("div");return e.classList.add("fred--thumbs","source"),e.innerHTML='<figure class="fred--thumb">\n                            <div><img src="layouts/full-width.svg" alt=""></div>\n                            <figcaption>\n                                <strong>Full Width</strong>\n                            </figcaption>\n                            <div class="chunk" data-fred-id="1" hidden="hidden">\n                                <h2 contenteditable="true" data-fred-name="header">Header 2</h2>\n                                <p contenteditable="true" data-fred-name="description">Description</p>\n                            </div>\n                        </figure>\n                        <figure class="fred--thumb">\n                            <div><img src="layouts/right-panel-layout.svg" alt=""></div>\n                            <figcaption>\n                                <strong>2 Column</strong>\n                                <em>Content Left. Component Right.</em>\n                            </figcaption>\n                            <div class="chunk"  data-fred-id="2" hidden="hidden">\n                                <h3>Can\'t Edit THIS</h3>\n                                <img src="http://via.placeholder.com/350x150" />\n                                <p contenteditable="true" data-fred-name="description">Description</p>\n                            </div>\n                        </figure>\n                        <figure class="fred--thumb">\n                            <div><img src="layouts/four-grid.svg" alt=""></div>\n                            <figcaption>\n                                <strong>Grid</strong>\n                            </figcaption>\n                            <div class="chunk" data-fred-id="3" hidden="hidden">\n                                <p contenteditable="true" data-fred-name="description">Description Only</p>\n                            </div>\n                        </figure>',new Promise(function(t,n){setTimeout(function(){t(e.outerHTML)},500)})}},{key:"wrapContent",value:function(e){var t=this,n=document.createElement("div");n.classList.add("fred--block");var r=document.createElement("div");r.classList.add("fred--toolbar");var i=document.createElement("button");i.classList.add("fred--move-icon","handle");var o=document.createElement("button");o.classList.add("fred--duplicate-icon"),o.addEventListener("click",function(e){e.preventDefault();var r=t.wrapContent(n.querySelector(".fred--block_content").cloneNode(!0));null===n.nextSibling?n.parentNode.appendChild(r):n.parentNode.insertBefore(r,n.nextSibling)});var a=document.createElement("button");a.classList.add("fred--trash"),a.addEventListener("click",function(e){e.preventDefault(),n.remove()}),r.appendChild(i),r.appendChild(o),r.appendChild(a),n.appendChild(r);var s=document.createElement("div");return s.classList.add("fred--block_content"),s.dataset.fredId=e.dataset.fredId,s.innerHTML=e.innerHTML,n.appendChild(s),n}},{key:"afterExpand",value:function(){var e=this;if(null===this.drake){var t=[].concat(i(document.querySelectorAll('[data-fred-dropzone]:not([data-fred-dropzone=""])')));t.unshift(document.querySelector(".source")),this.drake=(0,f.default)(t,{copy:function(e,t){return t===document.getElementsByClassName("source")[0]},accepts:function(e,t){return t!==document.getElementsByClassName("source")[0]},moves:function(e,t,n,r){return void 0===t.dataset.fredDropzone||""===t.dataset.fredDropzone||n.classList.contains("handle")}}),this.drake.on("drop",function(t,n,r,i){r.classList.contains("source")&&t.parentNode.replaceChild(e.wrapContent(t.getElementsByClassName("chunk")[0]),t)}),this.drake.on("drag",function(e,t){h.default.emit("fred-sidebar-hide")}),this.drake.on("dragend",function(e){h.default.emit("fred-sidebar-show")})}else{var n=[].concat(i(document.querySelectorAll('[data-fred-dropzone]:not([data-fred-dropzone=""])')));n.unshift(document.querySelector(".source")),this.drake.containers=n}}}]),t}(l.default);v.title="Widgets",v.expandable=!0,t.default=v,e.exports=t.default},function(e,t,n){(function(t){"use strict";function r(e,t){function n(e){return le.containers.indexOf(e)!==-1||ce.isContainer(e)}function r(e){var t=e?"remove":"add";i(T,t,"mousedown",x),i(T,t,"mouseup",j)}function s(e){var t=e?"remove":"add";i(T,t,"mousemove",C)}function v(e){var t=e?"remove":"add";w[t](T,"selectstart",L),w[t](T,"click",L)}function b(){r(!0),j({})}function L(e){se&&e.preventDefault()}function x(e){te=e.clientX,ne=e.clientY;var t=1!==o(e)||e.metaKey||e.ctrlKey;if(!t){var n=e.target,r=k(n);r&&(se=r,s(),"mousedown"===e.type&&(h(n)?n.focus():e.preventDefault()))}}function C(e){if(se){if(0===o(e))return void j({});if(void 0===e.clientX||e.clientX!==te||void 0===e.clientY||e.clientY!==ne){if(ce.ignoreInputTextSelection){var t=g("clientX",e),n=g("clientY",e),r=_.elementFromPoint(t,n);if(h(r))return}var i=se;s(!0),v(),P(),A(i);var u=a(Q);Z=g("pageX",e)-u.left,ee=g("pageY",e)-u.top,E.add(oe||Q,"gu-transit"),Y(),B(e)}}}function k(e){if(!(le.dragging&&K||n(e))){for(var t=e;p(e)&&n(p(e))===!1;){if(ce.invalid(e,t))return;if(e=p(e),!e)return}var r=p(e);if(r&&!ce.invalid(e,t)){var i=ce.moves(e,r,t,m(e));if(i)return{item:e,source:r}}}}function S(e){return!!k(e)}function O(e){var t=k(e);t&&A(t)}function A(e){$(e.item,e.source)&&(oe=e.item.cloneNode(!0),le.emit("cloned",oe,e.item,"copy")),V=e.source,Q=e.item,re=ie=m(e.item),le.dragging=!0,le.emit("drag",Q,V)}function M(){return!1}function P(){if(le.dragging){var e=oe||Q;I(e,p(e))}}function N(){se=!1,s(!0),v(!0)}function j(e){if(N(),le.dragging){var t=oe||Q,n=g("clientX",e),r=g("clientY",e),i=u(K,n,r),o=q(i,n,r);o&&(oe&&ce.copySortSource||!oe||o!==V)?I(t,o):ce.removeOnSpill?R():D()}}function I(e,t){var n=p(e);oe&&ce.copySortSource&&t===V&&n.removeChild(Q),z(t)?le.emit("cancel",e,V,V):le.emit("drop",e,t,V,ie),H()}function R(){if(le.dragging){var e=oe||Q,t=p(e);t&&t.removeChild(e),le.emit(oe?"cancel":"remove",e,t,V),H()}}function D(e){if(le.dragging){var t=arguments.length>0?e:ce.revertOnSpill,n=oe||Q,r=p(n),i=z(r);i===!1&&t&&(oe?r&&r.removeChild(oe):V.insertBefore(n,re)),i||t?le.emit("cancel",n,V,V):le.emit("drop",n,r,V,ie),H()}}function H(){var e=oe||Q;N(),W(),e&&E.rm(e,"gu-transit"),ae&&clearTimeout(ae),le.dragging=!1,ue&&le.emit("out",e,ue,V),le.emit("dragend",e),V=Q=oe=re=ie=ae=ue=null}function z(e,t){var n;return n=void 0!==t?t:K?ie:m(oe||Q),e===V&&n===re}function q(e,t,r){function i(){var i=n(o);if(i===!1)return!1;var a=U(o,e),s=G(o,a,t,r),u=z(o,s);return!!u||ce.accepts(Q,o,V,s)}for(var o=e;o&&!i();)o=p(o);return o}function B(e){function t(e){le.emit(e,c,ue,V)}function n(){f&&t("over")}function r(){ue&&t("out")}if(K){e.preventDefault();var i=g("clientX",e),o=g("clientY",e),a=i-Z,s=o-ee;K.style.left=a+"px",K.style.top=s+"px";var c=oe||Q,l=u(K,i,o),d=q(l,i,o),f=null!==d&&d!==ue;(f||null===d)&&(r(),ue=d,n());var h=p(c);if(d===V&&oe&&!ce.copySortSource)return void(h&&h.removeChild(c));var v,b=U(d,l);if(null!==b)v=G(d,b,i,o);else{if(ce.revertOnSpill!==!0||oe)return void(oe&&h&&h.removeChild(c));v=re,d=V}(null===v&&f||v!==c&&v!==m(c))&&(ie=v,d.insertBefore(c,v),le.emit("shadow",c,d,V))}}function F(e){E.rm(e,"gu-hide")}function X(e){le.dragging&&E.add(e,"gu-hide")}function Y(){if(!K){var e=Q.getBoundingClientRect();K=Q.cloneNode(!0),K.style.width=d(e)+"px",K.style.height=f(e)+"px",E.rm(K,"gu-transit"),E.add(K,"gu-mirror"),ce.mirrorContainer.appendChild(K),i(T,"add","mousemove",B),E.add(ce.mirrorContainer,"gu-unselectable"),le.emit("cloned",K,Q,"mirror")}}function W(){K&&(E.rm(ce.mirrorContainer,"gu-unselectable"),i(T,"remove","mousemove",B),p(K).removeChild(K),K=null)}function U(e,t){for(var n=t;n!==e&&p(n)!==e;)n=p(n);return n===T?null:n}function G(e,t,n,r){function i(){var t,i,o,a=e.children.length;for(t=0;t<a;t++){if(i=e.children[t],o=i.getBoundingClientRect(),s&&o.left+o.width/2>n)return i;if(!s&&o.top+o.height/2>r)return i}return null}function o(){var e=t.getBoundingClientRect();return a(s?n>e.left+d(e)/2:r>e.top+f(e)/2)}function a(e){return e?m(t):t}var s="horizontal"===ce.direction,u=t!==e?o():i();return u}function $(e,t){return"boolean"==typeof ce.copy?ce.copy:ce.copy(e,t)}var J=arguments.length;1===J&&Array.isArray(e)===!1&&(t=e,e=[]);var K,V,Q,Z,ee,te,ne,re,ie,oe,ae,se,ue=null,ce=t||{};void 0===ce.moves&&(ce.moves=l),void 0===ce.accepts&&(ce.accepts=l),void 0===ce.invalid&&(ce.invalid=M),void 0===ce.containers&&(ce.containers=e||[]),void 0===ce.isContainer&&(ce.isContainer=c),void 0===ce.copy&&(ce.copy=!1),void 0===ce.copySortSource&&(ce.copySortSource=!1),void 0===ce.revertOnSpill&&(ce.revertOnSpill=!1),void 0===ce.removeOnSpill&&(ce.removeOnSpill=!1),void 0===ce.direction&&(ce.direction="vertical"),void 0===ce.ignoreInputTextSelection&&(ce.ignoreInputTextSelection=!0),void 0===ce.mirrorContainer&&(ce.mirrorContainer=_.body);var le=y({containers:ce.containers,start:O,end:P,cancel:D,remove:R,destroy:b,canMove:S,dragging:!1});return ce.removeOnSpill===!0&&le.on("over",F).on("out",X),r(),le}function i(e,n,r,i){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},a={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},s={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};t.navigator.pointerEnabled?w[n](e,a[r],i):t.navigator.msPointerEnabled?w[n](e,s[r],i):(w[n](e,o[r],i),w[n](e,r,i))}function o(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function a(e){var t=e.getBoundingClientRect();return{left:t.left+s("scrollLeft","pageXOffset"),top:t.top+s("scrollTop","pageYOffset")}}function s(e,n){return"undefined"!=typeof t[n]?t[n]:T.clientHeight?T[e]:_.body[e]}function u(e,t,n){var r,i=e||{},o=i.className;return i.className+=" gu-hide",r=_.elementFromPoint(t,n),i.className=o,r}function c(){return!1}function l(){return!0}function d(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function p(e){return e.parentNode===_?null:e.parentNode}function h(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||v(e)}function v(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||v(p(e))))}function m(e){function t(){var t=e;do t=t.nextSibling;while(t&&1!==t.nodeType);return t}return e.nextElementSibling||t()}function b(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function g(e,t){var n=b(t),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in n)&&r[e]in n&&(e=r[e]),n[e]}var y=n(8),w=n(15),E=n(18),_=document,T=_.documentElement;e.exports=r}).call(t,function(){return this}())},function(e,t,n){"use strict";var r=n(9),i=n(10);e.exports=function(e,t){var n=t||{},o={};return void 0===e&&(e={}),e.on=function(t,n){return o[t]?o[t].push(n):o[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var r=arguments.length;if(1===r)delete o[t];else if(0===r)o={};else{var i=o[t];if(!i)return e;i.splice(i.indexOf(n),1)}return e},e.emit=function(){var t=r(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var a=(o[t]||[]).slice(0);return function(){var o=r(arguments),s=this||e;if("error"===t&&n.throws!==!1&&!a.length)throw 1===o.length?o[0]:o;return a.forEach(function(r){n.async?i(r,o,s):r.apply(s,o),r._once&&e.off(t,r)}),e}},e}},function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},function(e,t,n){"use strict";var r=n(11);e.exports=function(e,t,n){e&&r(function(){e.apply(n||null,t||[])})}},function(e,t,n){(function(t){var n,r="function"==typeof t;n=r?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=n}).call(t,n(12).setImmediate)},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(13),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return v[h]=r,p(h),h++}function i(e){delete v[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(m)setTimeout(a,0,e);else{var t=v[e];if(t){m=!0;try{o(t)}finally{i(e),m=!1}}}}function s(){p=function(e){t.nextTick(function(){a(e)})}}function u(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function c(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),p=function(n){e.postMessage(t+n,"*")}}function l(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;a(t)},p=function(t){e.port2.postMessage(t)}}function d(){var e=b.documentElement;p=function(t){var n=b.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function f(){p=function(e){setTimeout(a,0,e)}}if(!e.setImmediate){var p,h=1,v={},m=!1,b=e.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(e);g=g&&g.setTimeout?g:e,"[object process]"==={}.toString.call(e.process)?s():u()?c():e.MessageChannel?l():b&&"onreadystatechange"in b.createElement("script")?d():f(),g.setImmediate=r,g.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(14))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){v&&p&&(v=!1,p.length?h=p.concat(h):m=-1,h.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=h.length;t;){for(p=h,h=[];++m<t;)p&&p[m].run();m=-1,t=h.length}p=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,d,f=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var p,h=[],v=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){(function(t){"use strict";function r(e,t,n,r){return e.addEventListener(t,n,r)}function i(e,t,n){return e.attachEvent("on"+t,c(e,t,n))}function o(e,t,n,r){return e.removeEventListener(t,n,r)}function a(e,t,n){var r=l(e,t,n);if(r)return e.detachEvent("on"+t,r)}function s(e,t,n){function r(){var e;return h.createEvent?(e=h.createEvent("Event"),e.initEvent(t,!0,!0)):h.createEventObject&&(e=h.createEventObject()),
e}function i(){return new f(t,{detail:n})}var o=p.indexOf(t)===-1?i():r();e.dispatchEvent?e.dispatchEvent(o):e.fireEvent("on"+t,o)}function u(e,n,r){return function(n){var i=n||t.event;i.target=i.target||i.srcElement,i.preventDefault=i.preventDefault||function(){i.returnValue=!1},i.stopPropagation=i.stopPropagation||function(){i.cancelBubble=!0},i.which=i.which||i.keyCode,r.call(e,i)}}function c(e,t,n){var r=l(e,t,n)||u(e,t,n);return b.push({wrapper:r,element:e,type:t,fn:n}),r}function l(e,t,n){var r=d(e,t,n);if(r){var i=b[r].wrapper;return b.splice(r,1),i}}function d(e,t,n){var r,i;for(r=0;r<b.length;r++)if(i=b[r],i.element===e&&i.type===t&&i.fn===n)return r}var f=n(16),p=n(17),h=t.document,v=r,m=o,b=[];t.addEventListener||(v=i,m=a),e.exports={add:v,remove:m,fabricate:s}}).call(t,function(){return this}())},function(e,t){(function(t){function n(){try{var e=new r("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}var r=t.CustomEvent;e.exports=n()?r:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,function(){return this}())},function(e,t){(function(t){"use strict";var n=[],r="",i=/^on/;for(r in t)i.test(r)&&n.push(r.slice(2));e.exports=n}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){var t=o[e];return t?t.lastIndex=0:o[e]=t=new RegExp(a+e+s,"g"),t}function r(e,t){var r=e.className;r.length?n(t).test(r)||(e.className+=" "+t):e.className=t}function i(e,t){e.className=e.className.replace(n(t)," ").trim()}var o={},a="(?:^|\\s)",s="(?:\\s|$)";e.exports={add:r,rm:i}},function(e,t){var n=function(e,t){function n(){o=!0,r()}t=t||{};var r,i=t.timeout,o=!1,a=new Promise(function(e,t){r=e}),s=Promise.race([a,e]).then(function(e){if(o){var t=new Error("User cancelled promise.");return t.type="cancel",Promise.reject(t)}if(i){var t=new Error("Promise timeout");return t.type="timeout",Promise.reject(t)}return Promise.resolve(e)});return t.timeout&&setTimeout(function(){i=!0,r()},+t.timeout),{promise:s,cancel:n,abort:n}};e.exports=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){return n(this,e),t.appendChild(this.buildTopBar()),this}return r(e,[{key:"liWrapper",value:function(e){var t=document.createElement("li");return t.innerHTML=e.outerHTML,t}},{key:"buildTopBar",value:function(){var e=document.createElement("div");e.classList.add("fred--topbar","fred--clearfix");var t=document.createElement("ul");t.classList.add("fred--topbar_links");var n=document.createElement("a");n.innerHTML='New Page <i class="angle-down"></i>';var r=document.createElement("a");r.innerHTML='Settings <i class="angle-down"></i>',t.appendChild(this.liWrapper(n)),t.appendChild(this.liWrapper(r));var i=document.createElement("div");i.classList.add("fred--topbar_buttons");var o=document.createElement("button");return o.classList.add("fred--btn-small"),o.innerText="Logout",i.appendChild(o),e.appendChild(t),e.appendChild(i),e}}]),e}();t.default=i,e.exports=t.default}])});